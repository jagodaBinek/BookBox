import{a as q,b as ee}from"./chunk-VRNTSX5M.js";import{d as te,e as ne,f as oe}from"./chunk-3CIPV7BY.js";import{B as Y,F as $,d as H,h as U,u as J,y as X}from"./chunk-T6H74JZX.js";import"./chunk-ON2PG36V.js";import{a as j}from"./chunk-EDBJTVLN.js";import{$ as N,aa as F,ba as G,ca as Q,d as B,da as R,e as z,ea as W,fa as A,g as T,ga as V,ha as Z,i as D,ia as K,q as L}from"./chunk-UMXWMGBY.js";import{Ab as d,Ca as p,Nb as s,Ob as o,Pb as n,Qb as C,Vb as M,Zb as h,_b as l,cb as k,eb as r,ic as v,mc as i,nc as y,oc as u,pb as f,qc as S,rc as O,sa as _,sc as P,ta as b,vb as x,xc as I,yc as E,zc as w}from"./chunk-X4CRCAOY.js";function ae(t,a){if(t&1){let e=M();o(0,"button",10),h("click",function(){_(e);let g=l();return b(g.clearSearch())}),o(1,"mat-icon"),i(2,"clear"),n(),i(3," Wyczy\u015B\u0107 "),n()}}function re(t,a){t&1&&(o(0,"div",11)(1,"mat-card",12)(2,"mat-card-content")(3,"p"),i(4,"Szukam ksi\u0105\u017Cek..."),n()()()())}function ce(t,a){if(t&1&&(o(0,"mat-card",16)(1,"mat-card-content")(2,"h2",17),i(3),n()()()),t&2){let e=l(2);r(3),u("Znalezione ksi\u0105\u017Cki (",e.books().length,")")}}function se(t,a){if(t&1&&C(0,"img",30),t&2){let e=l().$implicit;s("src",e.Zdjecie,k)("alt",e.Tytul)}}function de(t,a){t&1&&(o(0,"div",31),i(1,"Brak zdj\u0119cia"),n())}function le(t,a){if(t&1&&(o(0,"mat-card",20)(1,"div",21)(2,"div",22),d(3,se,1,2,"img",23)(4,de,2,0,"div",24),n(),o(5,"div",25)(6,"h3",26),i(7),n(),o(8,"p",27)(9,"strong"),i(10,"Autor:"),n(),i(11),n(),o(12,"p",28)(13,"strong"),i(14,"Szafka:"),n(),i(15),n(),o(16,"p",29)(17,"strong"),i(18,"Rok wydania:"),n(),i(19),I(20,"date"),n()()()()),t&2){let e=a.$implicit;r(3),s("ngIf",e.Zdjecie),r(),s("ngIf",!e.Zdjecie),r(3),y(e.Tytul),r(4),u(" ",e.Autor),r(4),u(" ",e.Szafka),r(4),u(" ",E(20,6,e["Rok wydania"].toDate?e["Rok wydania"].toDate():e["Rok wydania"],"yyyy")," ")}}function me(t,a){if(t&1&&(o(0,"div",18),d(1,le,21,9,"mat-card",19),n()),t&2){let e=l(2);r(),s("ngForOf",e.books())}}function pe(t,a){t&1&&(o(0,"mat-card",32)(1,"mat-card-content")(2,"p",33),i(3,"Nie znaleziono ksi\u0105\u017Cek spe\u0142niaj\u0105cych kryteria wyszukiwania"),n()()())}function ue(t,a){if(t&1&&(o(0,"div",13),d(1,ce,4,1,"mat-card",14)(2,me,2,1,"div",15)(3,pe,4,0,"ng-template",null,0,w),n()),t&2){let e=v(4),c=l();r(),s("ngIf",c.books().length>0),r(),s("ngIf",c.books().length>0)("ngIfElse",e)}}var ie=class t{constructor(a,e){this.bookService=a;this.locationGate=e;this.locationGate.isFarewellActive.set(!1),this.locationGate.hideGeolocation(),this.locationGate.blockAddAndDeletePages()}searchQuery=p("");books=p([]);displayedColumns=["image","title","author","year","added","location"];hasSearched=p(!1);isLoading=p(!1);sub;ngOnDestroy(){this.sub?.unsubscribe()}onSearch(){let a=this.searchQuery().trim();if(!a){this.books.set([]),this.hasSearched.set(!1);return}this.isLoading.set(!0),this.sub?.unsubscribe(),this.sub=this.bookService.searchBooks(a).subscribe({next:e=>{this.books.set(e||[]),this.hasSearched.set(!0),this.isLoading.set(!1)},error:e=>{console.error("Error searching books:",e),this.books.set([]),this.hasSearched.set(!0),this.isLoading.set(!1)}})}onKeyPress(a){a.key==="Enter"&&this.onSearch()}clearSearch(){this.searchQuery.set(""),this.books.set([]),this.hasSearched.set(!1)}static \u0275fac=function(e){return new(e||t)(f(oe),f(j))};static \u0275cmp=x({type:t,selectors:[["app-search-books"]],decls:20,vars:5,consts:[["noResults",""],[1,"search-container"],[1,"search-card"],[1,"search-input-group"],[1,"search-field"],["matInput","","placeholder","Wpisz szukany tytu\u0142 lub autora...",3,"ngModelChange","keypress","ngModel"],["mat-raised-button","",1,"app-action-button",3,"click","disabled"],["mat-stroked-button","",3,"click",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","results-section",4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"loading-state"],[1,"info-card"],[1,"results-section"],["class","results-header-card",4,"ngIf"],["class","cards-container",4,"ngIf","ngIfElse"],[1,"results-header-card"],[1,"results-title"],[1,"cards-container"],["class","book-card",4,"ngFor","ngForOf"],[1,"book-card"],[1,"card-inner"],[1,"thumb"],[3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"info"],[1,"book-title"],[1,"book-author"],[1,"book-szafka"],[1,"book-year"],[3,"src","alt"],[1,"no-image"],[1,"empty-state"],[1,"empty-message"]],template:function(e,c){e&1&&(o(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Szukaj ksi\u0105\u017Cki"),n(),o(5,"mat-card-subtitle"),i(6,"Wpisz tytu\u0142 lub autora"),n()(),o(7,"mat-card-content")(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),i(11,"Tytu\u0142 lub autor"),n(),o(12,"input",5),P("ngModelChange",function(m){return O(c.searchQuery,m)||(c.searchQuery=m),m}),h("keypress",function(m){return c.onKeyPress(m)}),n()(),o(13,"button",6),h("click",function(){return c.onSearch()}),o(14,"mat-icon"),i(15,"search"),n(),i(16," Szukaj "),n(),d(17,ae,4,0,"button",7),n()()(),d(18,re,5,0,"div",8)(19,ue,5,3,"div",9),n()),e&2&&(r(12),S("ngModel",c.searchQuery),r(),s("disabled",c.isLoading()||!c.searchQuery().trim()),r(4),s("ngIf",c.hasSearched()),r(),s("ngIf",c.isLoading()),r(),s("ngIf",c.hasSearched()&&!c.isLoading()))},dependencies:[D,B,z,$,J,X,Y,L,V,G,R,A,W,Q,ne,te,U,H,F,N,K,Z,q,ee,T],styles:[".search-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.search-card[_ngcontent-%COMP%]{margin-bottom:30px;background:#0006;border-radius:5px;color:#000}.search-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:250px}.results-section[_ngcontent-%COMP%]{margin-top:10px}.results-header-card[_ngcontent-%COMP%]{margin-bottom:20px;background:#0006;border-radius:5px;color:#000}.results-header-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{color:#000}.results-title[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.cards-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.book-card[_ngcontent-%COMP%]{background:#0006;border-radius:5px;color:#000;padding:12px;position:relative;overflow:visible}.card-inner[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:160px;object-fit:cover;border-radius:4px}.thumb[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:120px;height:160px;display:flex;align-items:center;justify-content:center;background:#222;color:#ccc;border-radius:4px;font-size:.9rem;text-align:center;padding:8px}.info[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column}.book-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1rem;font-weight:700}.book-author[_ngcontent-%COMP%], .book-year[_ngcontent-%COMP%], .book-szafka[_ngcontent-%COMP%]{margin:0;color:#000;font-size:.95rem}@media (max-width: 720px){.card-inner[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumb[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:40vw;height:auto;max-height:240px}}.empty-state[_ngcontent-%COMP%]{background-color:#f9f9f9;border-left:4px solid #667eea;margin-top:20px}.empty-message[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px;text-align:center;padding:20px}.loading-state[_ngcontent-%COMP%]{text-align:center;margin:30px 0}.info-card[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:20px}@media (max-width: 768px){.search-input-group[_ngcontent-%COMP%]{flex-direction:column}.search-field[_ngcontent-%COMP%]{min-width:100%}.book-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .book-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:12px}.book-thumbnail[_ngcontent-%COMP%], .no-image[_ngcontent-%COMP%]{max-width:50px;max-height:70px}}"]})};export{ie as SearchBooksComponent};
