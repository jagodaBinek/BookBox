import{a as kt}from"./chunk-MK2I62UO.js";import{a as Pt,b as U}from"./chunk-VRNTSX5M.js";import"./chunk-VN3CQEPZ.js";import{b as zt,d as It,e as Tt,f as Bt}from"./chunk-3CIPV7BY.js";import{G as Ot,H as G,K as Dt,L as $,M as W,d as wt,h as H}from"./chunk-T6H74JZX.js";import"./chunk-ON2PG36V.js";import{a as ht}from"./chunk-EDBJTVLN.js";import{$ as yt,G as _t,W as bt,Z as vt,aa as Y,ba as xt,d as pt,da as Ct,e as mt,g as gt,ga as St,i as ft,ia as Mt,l as ut}from"./chunk-UMXWMGBY.js";import{Ab as y,Ca as _,Fa as L,Ga as N,Gb as ot,Hb as x,Ib as C,Jb as S,Kb as nt,Lb as at,Lc as Q,Mb as rt,Nb as c,Ob as a,Oc as I,Pb as r,Pc as T,Qb as M,Vb as v,Zb as g,_b as p,cb as it,eb as s,ia as E,ic as V,ja as F,jb as J,la as K,m as A,mc as m,na as P,nc as j,o as q,oc as k,pb as O,pc as st,sa as u,ta as h,ua as w,va as et,vb as z,wb as R,xc as lt,yc as dt,zc as ct}from"./chunk-X4CRCAOY.js";function Nt(e,n){if(e&1&&(a(0,"mat-option",17),m(1),r()),e&2){let t=n.$implicit;c("value",t),s(),k(" ",t," ")}}function Rt(e,n){if(e&1){let t=v();a(0,"mat-form-field",14)(1,"mat-select",16,0),g("selectionChange",function(i){u(t);let d=p(2);return h(d._changePageSize(i.value))}),at(3,Nt,2,2,"mat-option",17,nt),r(),a(5,"div",18),g("click",function(){u(t);let i=V(2);return h(i.open())}),r()()}if(e&2){let t=p(2);c("appearance",t._formFieldAppearance)("color",t.color),s(),c("value",t.pageSize)("disabled",t.disabled),ot("aria-labelledby",t._pageSizeLabelId),c("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),s(2),rt(t._displayedPageSizeOptions)}}function Vt(e,n){if(e&1&&(a(0,"div",15),m(1),r()),e&2){let t=p(2);s(),j(t.pageSize)}}function jt(e,n){if(e&1&&(a(0,"div",3)(1,"div",13),m(2),r(),C(3,Rt,6,7,"mat-form-field",14),C(4,Vt,2,1,"div",15),r()),e&2){let t=p();s(),x("id",t._pageSizeLabelId),s(),k(" ",t._intl.itemsPerPageLabel," "),s(),S(t._displayedPageSizeOptions.length>1?3:-1),s(),S(t._displayedPageSizeOptions.length<=1?4:-1)}}function Yt(e,n){if(e&1){let t=v();a(0,"button",19),g("click",function(){u(t);let i=p();return h(i._buttonClicked(0,i._previousButtonsDisabled()))}),w(),a(1,"svg",8),M(2,"path",20),r()()}if(e&2){let t=p();c("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("disabled",t._previousButtonsDisabled())("tabindex",t._previousButtonsDisabled()?-1:null),x("aria-label",t._intl.firstPageLabel)}}function Ht(e,n){if(e&1){let t=v();a(0,"button",21),g("click",function(){u(t);let i=p();return h(i._buttonClicked(i.getNumberOfPages()-1,i._nextButtonsDisabled()))}),w(),a(1,"svg",8),M(2,"path",22),r()()}if(e&2){let t=p();c("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("disabled",t._nextButtonsDisabled())("tabindex",t._nextButtonsDisabled()?-1:null),x("aria-label",t._intl.lastPageLabel)}}var Z=(()=>{class e{changes=new A;itemsPerPageLabel="Items per page:";nextPageLabel="Next page";previousPageLabel="Previous page";firstPageLabel="First page";lastPageLabel="Last page";getRangeLabel=(t,o,i)=>{if(i==0||o==0)return`0 of ${i}`;i=Math.max(i,0);let d=t*o,l=d<i?Math.min(d+o,i):d+o;return`${d+1} \u2013 ${l} of ${i}`};static \u0275fac=function(o){return new(o||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Gt(e){return e||new Z}var $t={provide:Z,deps:[[new L,new N,Z]],useFactory:Gt},Wt=50;var Ut=new K("MAT_PAGINATOR_DEFAULT_OPTIONS"),Zt=(()=>{class e{_intl=P(Z);_changeDetectorRef=P(Q);_formFieldAppearance;_pageSizeLabelId=P(_t).getId("mat-paginator-page-size-label-");_intlChanges;_isInitialized=!1;_initializedStream=new q(1);color;get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(t||0,0),this._changeDetectorRef.markForCheck()}_pageIndex=0;get length(){return this._length}set length(t){this._length=t||0,this._changeDetectorRef.markForCheck()}_length=0;get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(t||0,0),this._updateDisplayedPageSizeOptions()}_pageSize;get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(o=>T(o,0)),this._updateDisplayedPageSizeOptions()}_pageSizeOptions=[];hidePageSize=!1;showFirstLastButtons=!1;selectConfig={};disabled=!1;page=new J;_displayedPageSizeOptions;initialized=this._initializedStream;constructor(){let t=this._intl,o=P(Ut,{optional:!0});if(this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),o){let{pageSize:i,pageSizeOptions:d,hidePageSize:l,showFirstLastButtons:f}=o;i!=null&&(this._pageSize=i),d!=null&&(this._pageSizeOptions=d),l!=null&&(this.hidePageSize=l),f!=null&&(this.showFirstLastButtons=f)}this._formFieldAppearance=o?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){this.hasNextPage()&&this._navigate(this.pageIndex+1)}previousPage(){this.hasPreviousPage()&&this._navigate(this.pageIndex-1)}firstPage(){this.hasPreviousPage()&&this._navigate(0)}lastPage(){this.hasNextPage()&&this._navigate(this.getNumberOfPages()-1)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let t=this.getNumberOfPages()-1;return this.pageIndex<t&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){let o=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(o/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:Wt),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,o)=>t-o),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}_navigate(t){let o=this.pageIndex;t!==o&&(this.pageIndex=t,this._emitPageEvent(o))}_buttonClicked(t,o){o||this._navigate(t)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=z({type:e,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",T],length:[2,"length","length",T],pageSize:[2,"pageSize","pageSize",T],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",I],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",I],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",I]},outputs:{page:"page"},exportAs:["matPaginator"],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(o,i){o&1&&(a(0,"div",1)(1,"div",2),C(2,jt,5,4,"div",3),a(3,"div",4)(4,"div",5),m(5),r(),C(6,Yt,3,5,"button",6),a(7,"button",7),g("click",function(){return i._buttonClicked(i.pageIndex-1,i._previousButtonsDisabled())}),w(),a(8,"svg",8),M(9,"path",9),r()(),et(),a(10,"button",10),g("click",function(){return i._buttonClicked(i.pageIndex+1,i._nextButtonsDisabled())}),w(),a(11,"svg",8),M(12,"path",11),r()(),C(13,Ht,3,5,"button",12),r()()()),o&2&&(s(2),S(i.hidePageSize?-1:2),s(3),k(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),s(),S(i.showFirstLastButtons?6:-1),s(),c("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("disabled",i._previousButtonsDisabled())("tabindex",i._previousButtonsDisabled()?-1:null),x("aria-label",i._intl.previousPageLabel),s(3),c("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("disabled",i._nextButtonsDisabled())("tabindex",i._nextButtonsDisabled()?-1:null),x("aria-label",i._intl.nextPageLabel),s(3),S(i.showFirstLastButtons?13:-1))},dependencies:[H,$,G,bt,zt],styles:[`.mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-sys-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-sys-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-sys-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-sys-body-small-tracking));--mat-form-field-container-height: var(--mat-paginator-form-field-container-height, 40px);--mat-form-field-container-vertical-padding: var(--mat-paginator-form-field-container-vertical-padding, 8px)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-sys-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size, 56px)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:var(--mat-paginator-page-size-select-width, 84px)}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}@media(forced-colors: active){.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon,.mat-mdc-paginator-icon{fill:currentColor}.mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-range-actions .mat-mdc-icon-button[aria-disabled]{color:GrayText}}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display, block);position:absolute;top:50%;left:50%;width:var(--mat-paginator-page-size-select-width, 84px);height:var(--mat-paginator-page-size-select-touch-target-height, 48px);background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}
`],encapsulation:2,changeDetection:0})}return e})(),Et=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=R({type:e});static \u0275inj=F({providers:[$t],imports:[Y,W,U,Zt]})}return e})();var X=(()=>{class e{changes=new A;static \u0275fac=function(o){return new(o||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function qt(e){return e||new X}var Kt={provide:X,deps:[[new L,new N,X]],useFactory:qt};var Ft=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=R({type:e});static \u0275inj=F({providers:[Kt],imports:[vt]})}return e})();function Jt(e,n){if(e&1&&(a(0,"mat-option",20),m(1),r()),e&2){let t=n.$implicit;c("value",t.id),s(),st("",t.name," (",t.id,")")}}function Qt(e,n){if(e&1){let t=v();a(0,"div",13)(1,"div",14)(2,"mat-form-field",15)(3,"mat-label"),m(4,"Autor"),r(),a(5,"input",16),g("input",function(i){u(t);let d=p(2);return h(d.onFilterAuthorChange(i.target.value))}),r()(),a(6,"mat-form-field",15)(7,"mat-label"),m(8,"Tytu\u0142"),r(),a(9,"input",16),g("input",function(i){u(t);let d=p(2);return h(d.onFilterTitleChange(i.target.value))}),r()(),a(10,"mat-form-field",15)(11,"input",17),g("input",function(i){u(t);let d=p(2);return h(d.onFilterYearChange(i.target.value))}),r()(),a(12,"mat-form-field",15)(13,"mat-label"),m(14,"Szafka"),r(),a(15,"mat-select",7),g("selectionChange",function(i){u(t);let d=p(2);return h(d.onFilterSzafkaChange(i.value))}),a(16,"mat-option",18),m(17,"Wszystkie"),r(),y(18,Jt,2,3,"mat-option",19),r()()()()}if(e&2){let t=p(2);s(5),c("value",t.filterAuthor()),s(4),c("value",t.filterTitle()),s(2),c("value",t.filterYear()),s(4),c("value",t.filterSzafka()),s(3),c("ngForOf",t.bookshelfOptions())}}function Xt(e,n){if(e&1){let t=v();a(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-select",7),g("selectionChange",function(i){u(t);let d=p();return h(d.onSortChange(i.value))}),a(4,"mat-option",8),m(5,"Najnowsze"),r(),a(6,"mat-option",9),m(7,"Najstarsze"),r(),a(8,"mat-option",10),m(9,"Alfabetycznie"),r()()(),a(10,"button",11),g("click",function(){u(t);let i=p();return h(i.toggleFilterPanel())}),m(11," Filtruj "),r()(),y(12,Qt,19,5,"div",12),r()}if(e&2){let t=p();s(3),c("value",t.sortOrder()),s(9),c("ngIf",t.showFilterPanel())}}function te(e,n){if(e&1&&M(0,"img",33),e&2){let t=p().$implicit;c("src",t.Zdjecie,it)("alt",t.Tytul)}}function ee(e,n){e&1&&(a(0,"div",34),m(1,"Brak zdj\u0119cia"),r())}function ie(e,n){if(e&1){let t=v();a(0,"button",35),g("click",function(){u(t);let i=p().$implicit,d=p(2);return h(d.takeBook(i.Tytul))}),m(1,"Zabierz"),r()}}function oe(e,n){if(e&1&&(a(0,"mat-card",23)(1,"div",24)(2,"div",25),y(3,te,1,2,"img",26)(4,ee,2,0,"div",27),r(),a(5,"div",28)(6,"h3",29),m(7),r(),a(8,"p",30)(9,"strong"),m(10,"Autor:"),r(),m(11),r(),a(12,"p",31)(13,"strong"),m(14,"Rok wydania:"),r(),m(15),lt(16,"date"),r()()(),y(17,ie,2,0,"button",32),r()),e&2){let t=n.$implicit,o=p(2);s(3),c("ngIf",t.Zdjecie),s(),c("ngIf",!t.Zdjecie),s(3),j(t.Tytul),s(4),k(" ",t.Autor),s(4),k(" ",dt(16,6,t["Rok wydania"].toDate?t["Rok wydania"].toDate():t["Rok wydania"],"yyyy")," "),s(2),c("ngIf",!o.isNewest())}}function ne(e,n){if(e&1&&(a(0,"div",21),y(1,oe,18,9,"mat-card",22),r()),e&2){let t=p();s(),c("ngForOf",t.filteredBooks())}}function ae(e,n){e&1&&(a(0,"mat-card",36)(1,"mat-card-content")(2,"p",37),m(3,"Brak ksi\u0105\u017Cek w kolekcji"),r()()())}var Lt=class e{constructor(n,t,o,i){this.bookService=n;this.locationGate=t;this.route=o;this.bookshelfLocationService=i;this.szafkaParam=this.route.snapshot.paramMap.get("szafka");let d=!!this.route.snapshot.data?.newest;this.isNewest.set(d),d?(this.displayedColumns=this.displayedColumns.filter(l=>l!=="actions"),this.sub=this.bookService.getLatestBooks(10).subscribe({next:l=>{this.books.set(l||[]),this.applyFiltersAndSort()},error:l=>console.error("Error loading latest books:",l)})):this.sub=this.bookService.getBooks().subscribe({next:l=>{let f=this.filterBySzafka(l||[]);this.books.set(f),this.applyFiltersAndSort()},error:l=>console.error("Error loading books:",l)}),this.bookshelfLocationService.getBookshelfLocations().subscribe({next:l=>{let f=(l||[]).map(b=>({id:b.id||"",name:b.Nazwa||b.id||"szafka"}));this.bookshelfOptions.set(f)},error:l=>console.error("Failed to load Szafka options",l)}),this.farewellActive=this.locationGate.isFarewellActive}books=_([]);filteredBooks=_([]);displayedColumns=["image","title","author","year","added","location","actions"];sub;szafkaParam;farewellActive=_(!1);isNewest=_(!1);sortOrder=_("newest");filterAuthor=_("");filterTitle=_("");filterYear=_("");filterSzafka=_("");showFilterPanel=_(!1);bookshelfOptions=_([]);ngOnDestroy(){this.sub?.unsubscribe()}onSortChange(n){this.sortOrder.set(n),this.applyFiltersAndSort()}toggleFilterPanel(){this.showFilterPanel.set(!this.showFilterPanel())}onFilterAuthorChange(n){this.filterAuthor.set(n),this.applyFiltersAndSort()}onFilterTitleChange(n){this.filterTitle.set(n),this.applyFiltersAndSort()}onFilterYearChange(n){if(n){let t=n.split("-")[0];this.filterYear.set(t)}else this.filterYear.set("");this.applyFiltersAndSort()}onFilterSzafkaChange(n){this.filterSzafka.set(n),this.applyFiltersAndSort()}applyFiltersAndSort(){let n=[...this.books()],t=this.filterAuthor().toLowerCase(),o=this.filterTitle().toLowerCase(),i=this.filterYear();n=n.filter(l=>{let f=!t||l.Autor.toLowerCase().includes(t),b=!o||l.Tytul.toLowerCase().includes(o),D=!0;i&&(D=String(this.getYear(l["Rok wydania"]))===i);let tt=!0,B=this.filterSzafka();return B&&(tt=l.Szafka===B||l.Szafka===`/${B}`||l.Szafka===`/Szafka/${B}`),f&&b&&D&&tt});let d=this.sortOrder();d==="newest"?n.sort((l,f)=>{let b=this.getYear(l["Rok wydania"]);return this.getYear(f["Rok wydania"])-b}):d==="oldest"?n.sort((l,f)=>{let b=this.getYear(l["Rok wydania"]),D=this.getYear(f["Rok wydania"]);return b-D}):d==="alphabetical"&&n.sort((l,f)=>l.Tytul.localeCompare(f.Tytul,"pl")),this.filteredBooks.set(n)}getYear(n){if(!n)return 0;if(typeof n=="string"){let t=n.match(/\d{4}/);return t?parseInt(t[0],10):0}return n.toDate?n.toDate().getFullYear():0}filterBySzafka(n){let t=this.szafkaParam||this.locationGate.getSelectedBookshelf();return t?n.filter(o=>o.Szafka===t||o.Szafka===`/${t}`||o.Szafka===`/Szafka/${t}`):n}takeBook(n){if(this.locationGate.isFarewellActive()||!n)return;let t=this.books();this.books.set(t.filter(o=>o.Tytul!==n)),this.applyFiltersAndSort();try{this.bookService.deleteBook(n).subscribe({next:()=>{},error:o=>{console.error(o),this.books.set(t),this.applyFiltersAndSort()}})}catch(o){console.error(o),this.books.set(t),this.applyFiltersAndSort()}}static \u0275fac=function(t){return new(t||e)(O(Bt),O(ht),O(ut),O(kt))};static \u0275cmp=z({type:e,selectors:[["app-book-list"]],decls:5,vars:3,consts:[["emptyState",""],[1,"book-list-section"],["class","controls-container",4,"ngIf"],["class","cards-container",4,"ngIf","ngIfElse"],[1,"controls-container"],[1,"controls-wrapper"],["appearance","outline",1,"sort-field"],[3,"selectionChange","value"],["value","newest"],["value","oldest"],["value","alphabetical"],["mat-raised-button","",1,"app-action-button",3,"click"],["class","filter-panel",4,"ngIf"],[1,"filter-panel"],[1,"filter-fields"],["appearance","outline",1,"filter-field"],["matInput","",3,"input","value"],["matInput","","type","date",3,"input","value"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"cards-container"],["class","book-card",4,"ngFor","ngForOf"],[1,"book-card"],[1,"card-inner"],[1,"thumb"],[3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"info"],[1,"book-title"],[1,"book-author"],[1,"book-year"],["mat-raised-button","","class","app-action-button take-btn",3,"click",4,"ngIf"],[3,"src","alt"],[1,"no-image"],["mat-raised-button","",1,"app-action-button","take-btn",3,"click"],[1,"empty-state"],[1,"empty-message"]],template:function(t,o){if(t&1&&(a(0,"div",1),y(1,Xt,13,2,"div",2)(2,ne,2,1,"div",3)(3,ae,4,0,"ng-template",null,0,ct),r()),t&2){let i=V(4);s(),c("ngIf",o.isNewest()),s(),c("ngIf",o.filteredBooks().length>0)("ngIfElse",i)}},dependencies:[ft,pt,mt,Pt,St,xt,Ct,Y,yt,Mt,Et,Ft,U,W,H,wt,$,G,Dt,Tt,It,Ot,gt],styles:[".book-list-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 3rem;padding:1rem}.controls-container[_ngcontent-%COMP%]{margin-bottom:.5rem}.controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:1rem;background:transparent;padding:2rem;border-radius:8px;flex-wrap:nowrap}.control-field[_ngcontent-%COMP%]{width:220px}.control-field[_ngcontent-%COMP%]     .mdc-text-field{background-color:#333!important}.control-field[_ngcontent-%COMP%]     .mat-mdc-form-field-label{color:#fff!important}.control-field[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .control-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .control-field[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border-color:#555!important}.control-field[_ngcontent-%COMP%]     .mat-mdc-select-trigger{color:#fff!important}.control-field[_ngcontent-%COMP%]     input{color:#fff!important}.control-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__leading, .control-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__notch, .control-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__trailing{border-color:#999!important}.sort-field[_ngcontent-%COMP%]{width:220px;height:56px!important;border-radius:5px!important}.sort-field[_ngcontent-%COMP%]     .mdc-text-field{background-color:#000!important;height:100%!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field-label{color:#fff!important}.sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border-color:#fff!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-select-trigger{color:#fff!important}.sort-field[_ngcontent-%COMP%]     input{color:#fff!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__leading, .sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__notch, .sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__trailing{border-color:#fff!important}.controls-wrapper[_ngcontent-%COMP%]   .app-action-button[_ngcontent-%COMP%]{min-width:220px!important;height:56px!important;padding:0 24px!important;border-radius:5px!important;display:flex!important;align-items:center!important;justify-content:center!important}.sort-field[_ngcontent-%COMP%]{border-radius:5px!important}.filter-panel[_ngcontent-%COMP%]{background:transparent;padding:2rem;border-radius:8px;margin-top:1rem}.filter-fields[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;width:100%}.filter-field[_ngcontent-%COMP%]{width:200px}.filter-field[_ngcontent-%COMP%]     .mdc-text-field{background-color:#333!important}.filter-field[_ngcontent-%COMP%]     .mat-mdc-form-field-label{color:#fff!important}.filter-field[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .filter-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .filter-field[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border-color:#555!important}.filter-field[_ngcontent-%COMP%]     input{color:#fff!important}.filter-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__leading, .filter-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__notch, .filter-field[_ngcontent-%COMP%]     .mat-mdc-form-field.mat-focused .mdc-notched-outline__trailing{border-color:#999!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-select-panel{background-color:#000!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-select-panel-wrap{background-color:#000!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-option{background-color:#000!important;color:#fff!important}.sort-field[_ngcontent-%COMP%]     .mat-mdc-option:hover{background-color:#333!important}.section-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:500;color:#333}.table-container[_ngcontent-%COMP%]{overflow-x:auto;box-shadow:0 2px 8px #0000001a;border-radius:4px}.book-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.book-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;padding:1rem;text-align:left;border-bottom:2px solid #ddd}.book-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #eee}.book-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fafafa}.book-thumbnail[_ngcontent-%COMP%]{width:60px;height:80px;object-fit:cover;border-radius:4px}.no-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:60px;height:80px;background-color:#f0f0f0;border-radius:4px;color:#999;font-size:.75rem;text-align:center;padding:.5rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;box-shadow:0 2px 4px #0000001a}.empty-message[_ngcontent-%COMP%]{font-size:1.1rem;color:#999;margin:0}.cards-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.book-card[_ngcontent-%COMP%]{background:#0006;border-radius:5px;color:#000;padding:12px;position:relative;overflow:visible}.card-inner[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:160px;object-fit:cover;border-radius:4px}.thumb[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:120px;height:160px;display:flex;align-items:center;justify-content:center;background:#222;color:#ccc;border-radius:4px;font-size:.9rem;text-align:center;padding:8px}.info[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column}.book-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1rem;font-weight:700}.book-author[_ngcontent-%COMP%], .book-year[_ngcontent-%COMP%]{margin:0;color:#000;font-size:.95rem}.take-btn[_ngcontent-%COMP%]{position:absolute;right:12px;bottom:12px;padding:.5rem .9rem!important;border-radius:6px!important}@media (max-width: 720px){.card-inner[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .thumb[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{width:40vw;height:auto;max-height:240px}.take-btn[_ngcontent-%COMP%]{position:relative;right:auto;bottom:auto;margin-top:12px;width:75vw;max-width:none}}"]})};export{Lt as BookListComponent};
