var dA=Object.defineProperty,fA=Object.defineProperties;var hA=Object.getOwnPropertyDescriptors;var mv=Object.getOwnPropertySymbols,pA=Object.getPrototypeOf,gA=Object.prototype.hasOwnProperty,mA=Object.prototype.propertyIsEnumerable,yA=Reflect.get;var yv=(t,e,n)=>e in t?dA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$e=(t,e)=>{for(var n in e||={})gA.call(e,n)&&yv(t,n,e[n]);if(mv)for(var n of mv(e))mA.call(e,n)&&yv(t,n,e[n]);return t},He=(t,e)=>fA(t,hA(e));var wn=(t,e,n)=>yA(pA(t),n,e);var I=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});var Gl;function wa(){return Gl}function kt(t){let e=Gl;return Gl=t,e}var vv=Symbol("NotFound");function ri(t){return t===vv||t?.name==="\u0275NotFound"}var qe=null,Ta=!1,Wl=1,vA=null,Xe=Symbol("SIGNAL");function W(t){let e=qe;return qe=t,e}function ba(){return qe}var Mo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ko(t){if(Ta)throw new Error("");if(qe===null)return;qe.consumerOnSignalRead(t);let e=qe.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=qe.recomputing;if(r&&(n=e!==void 0?e.nextProducer:qe.producers,n!==void 0&&n.producer===t)){qe.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===qe&&(!r||EA(i,qe)))return;let o=ii(qe),s={producer:t,consumer:qe,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};qe.producersTail=s,e!==void 0?e.nextProducer=s:qe.producers=s,o&&wv(t,s)}function _v(){Wl++}function Kl(t){if(!(ii(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Wl)){if(!t.producerMustRecompute(t)&&!Oo(t)){Da(t);return}t.producerRecomputeValue(t),Da(t)}}function Ql(t){if(t.consumers===void 0)return;let e=Ta;Ta=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||_A(r)}}finally{Ta=e}}function Yl(){return qe?.consumerAllowSignalWrites!==!1}function _A(t){t.dirty=!0,Ql(t),t.consumerMarkedDirty?.(t)}function Da(t){t.dirty=!1,t.lastCleanEpoch=Wl}function xo(t){return t&&Ev(t),W(t)}function Ev(t){t.producersTail=void 0,t.recomputing=!0}function Ca(t,e){W(e),t&&Iv(t)}function Iv(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ii(t))do n=Zl(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Oo(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Kl(n),r!==n.version))return!0}return!1}function Fo(t){if(ii(t)){let e=t.producers;for(;e!==void 0;)e=Zl(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function wv(t,e){let n=t.consumersTail,r=ii(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)wv(i.producer,i)}function Zl(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ii(e)){let o=e.producers;for(;o!==void 0;)o=Zl(o)}return n}function ii(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Jl(t){vA?.(t)}function EA(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Xl(t,e){return Object.is(t,e)}function IA(){throw new Error}var Tv=IA;function Dv(t){Tv(t)}function ed(t){Tv=t}var wA=null;function td(t,e){let n=Object.create(Aa);n.value=t,e!==void 0&&(n.equal=e);let r=()=>bv(n);return r[Xe]=n,Jl(n),[r,s=>oi(n,s),s=>nd(n,s)]}function bv(t){return ko(t),t.value}function oi(t,e){Yl()||Dv(t),t.equal(t.value,e)||(t.value=e,TA(t))}function nd(t,e){Yl()||Dv(t),oi(t,e(t.value))}var Aa=He($e({},Mo),{equal:Xl,value:void 0,kind:"signal"});function TA(t){t.version++,_v(),Ql(t),wA?.(t)}function H(t){return typeof t=="function"}function si(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sa=si(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ur(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var we=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(o){e=o instanceof Sa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Cv(o)}catch(s){e=e??[],s instanceof Sa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Sa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Cv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ur(n,e)}remove(e){let{_finalizers:n}=this;n&&ur(n,e),e instanceof t&&e._removeParent(this)}};we.EMPTY=(()=>{let t=new we;return t.closed=!0,t})();var rd=we.EMPTY;function Na(t){return t instanceof we||t&&"closed"in t&&H(t.remove)&&H(t.add)&&H(t.unsubscribe)}function Cv(t){H(t)?t():t.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ai={setTimeout(t,e,...n){let{delegate:r}=ai;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ai;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ra(t){ai.setTimeout(()=>{let{onUnhandledError:e}=wt;if(e)e(t);else throw t})}function Lo(){}var Av=id("C",void 0,void 0);function Sv(t){return id("E",void 0,t)}function Nv(t){return id("N",t,void 0)}function id(t,e,n){return{kind:t,value:e,error:n}}var lr=null;function ci(t){if(wt.useDeprecatedSynchronousErrorHandling){let e=!lr;if(e&&(lr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=lr;if(lr=null,n)throw r}}else t()}function Rv(t){wt.useDeprecatedSynchronousErrorHandling&&lr&&(lr.errorThrown=!0,lr.error=t)}var dr=class extends we{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Na(e)&&e.add(this)):this.destination=CA}static create(e,n,r){return new ui(e,n,r)}next(e){this.isStopped?sd(Nv(e),this):this._next(e)}error(e){this.isStopped?sd(Sv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sd(Av,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DA=Function.prototype.bind;function od(t,e){return DA.call(t,e)}var ad=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Pa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Pa(r)}else Pa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Pa(n)}}},ui=class extends dr{constructor(e,n,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&wt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&od(e.next,o),error:e.error&&od(e.error,o),complete:e.complete&&od(e.complete,o)}):i=e}this.destination=new ad(i)}};function Pa(t){wt.useDeprecatedSynchronousErrorHandling?Rv(t):Ra(t)}function bA(t){throw t}function sd(t,e){let{onStoppedNotification:n}=wt;n&&ai.setTimeout(()=>n(t,e))}var CA={closed:!0,next:Lo,error:bA,complete:Lo};var li=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ot(t){return t}function AA(...t){return cd(t)}function cd(t){return t.length===0?ot:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=NA(n)?n:new ui(n,r,i);return ci(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Pv(r),new r((i,o)=>{let s=new ui({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[li](){return this}pipe(...n){return cd(n)(this)}toPromise(n){return n=Pv(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Pv(t){var e;return(e=t??wt.Promise)!==null&&e!==void 0?e:Promise}function SA(t){return t&&H(t.next)&&H(t.error)&&H(t.complete)}function NA(t){return t&&t instanceof dr||SA(t)&&Na(t)}function ud(t){return H(t?.lift)}function te(t){return e=>{if(ud(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ne(t,e,n,r,i){return new ld(t,e,n,r,i)}var ld=class extends dr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function dd(){return te((t,e)=>{let n=null;t._refCount++;let r=ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var fd=class extends X{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ud(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new we;let n=this.getSubject();e.add(this.source.subscribe(ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=we.EMPTY)}return e}refCount(){return dd()(this)}};var Mv=si(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jt=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ma(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Mv}next(n){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?rd:(this.currentObservers=null,o.push(n),new we(()=>{this.currentObservers=null,ur(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new Ma(e,n),t})(),Ma=class extends Jt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:rd}};var Vo=class extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hd={now(){return(hd.delegate||Date).now()},delegate:void 0};var ka=class extends we{constructor(e,n){super()}schedule(e,n=0){return this}};var jo={setInterval(t,e,...n){let{delegate:r}=jo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=jo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var di=class extends ka{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return jo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&jo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ur(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var fi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};fi.now=hd.now;var hi=class extends fi{constructor(e,n=fi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var pd=new hi(di);var xa=class extends di{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Oa=class extends hi{};var gd=new Oa(xa);var Bo=new X(t=>t.complete());function kv(t){return t&&H(t.schedule)}function xv(t){return t[t.length-1]}function Ov(t){return H(xv(t))?t.pop():void 0}function Tn(t){return kv(xv(t))?t.pop():void 0}function md(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Lv(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function Fv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fr(t){return this instanceof fr?(this.v=t,this):new fr(t)}function Vv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(P){return new Promise(function(N,x){o.push([y,P,N,x])>1||u(y,P)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof fr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function jv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Fv=="function"?Fv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Fa=t=>t&&typeof t.length=="number"&&typeof t!="function";function La(t){return H(t?.then)}function Va(t){return H(t[li])}function ja(t){return Symbol.asyncIterator&&H(t?.[Symbol.asyncIterator])}function Ba(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ua=RA();function $a(t){return H(t?.[Ua])}function Ha(t){return Vv(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield fr(n.read());if(i)return yield fr(void 0);yield yield fr(r)}}finally{n.releaseLock()}})}function qa(t){return H(t?.getReader)}function Re(t){if(t instanceof X)return t;if(t!=null){if(Va(t))return PA(t);if(Fa(t))return MA(t);if(La(t))return kA(t);if(ja(t))return Bv(t);if($a(t))return xA(t);if(qa(t))return OA(t)}throw Ba(t)}function PA(t){return new X(e=>{let n=t[li]();if(H(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MA(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function kA(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ra)})}function xA(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bv(t){return new X(e=>{FA(t,e).catch(n=>e.error(n))})}function OA(t){return Bv(Ha(t))}function FA(t,e){var n,r,i,o;return Lv(this,void 0,void 0,function*(){try{for(n=jv(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function et(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Dn(t,e=0){return te((n,r)=>{n.subscribe(ne(r,i=>et(r,t,()=>r.next(i),e),()=>et(r,t,()=>r.complete(),e),i=>et(r,t,()=>r.error(i),e)))})}function bn(t,e=0){return te((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Uv(t,e){return Re(t).pipe(bn(e),Dn(e))}function $v(t,e){return Re(t).pipe(bn(e),Dn(e))}function Hv(t,e){return new X(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qv(t,e){return new X(n=>{let r;return et(n,e,()=>{r=t[Ua](),et(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function za(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{et(n,e,()=>{let r=t[Symbol.asyncIterator]();et(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zv(t,e){return za(Ha(t),e)}function Gv(t,e){if(t!=null){if(Va(t))return Uv(t,e);if(Fa(t))return Hv(t,e);if(La(t))return $v(t,e);if(ja(t))return za(t,e);if($a(t))return qv(t,e);if(qa(t))return zv(t,e)}throw Ba(t)}function Cn(t,e){return e?Gv(t,e):Re(t)}function LA(...t){let e=Tn(t);return Cn(t,e)}function VA(t,e){let n=H(t)?t:()=>t,r=i=>i.error(n());return new X(e?i=>e.schedule(r,0,i):r)}function jA(t){return!!t&&(t instanceof X||H(t.lift)&&H(t.subscribe))}var hr=si(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function pr(t,e){return te((n,r)=>{let i=0;n.subscribe(ne(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:BA}=Array;function UA(t,e){return BA(e)?t(...e):t(e)}function Wv(t){return pr(e=>UA(t,e))}var{isArray:$A}=Array,{getPrototypeOf:HA,prototype:qA,keys:zA}=Object;function Kv(t){if(t.length===1){let e=t[0];if($A(e))return{args:e,keys:null};if(GA(e)){let n=zA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function GA(t){return t&&typeof t=="object"&&HA(t)===qA}function Qv(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function WA(...t){let e=Tn(t),n=Ov(t),{args:r,keys:i}=Kv(t);if(r.length===0)return Cn([],e);let o=new X(KA(r,e,i?s=>Qv(i,s):ot));return n?o.pipe(Wv(n)):o}function KA(t,e,n=ot){return r=>{Yv(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)Yv(e,()=>{let l=Cn(t[u],e),h=!1;l.subscribe(ne(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Yv(t,e,n){t?et(n,t,e):e()}function Zv(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let N=!1;Re(n(P,h++)).subscribe(ne(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let x=u.shift();s?et(e,s,()=>S(x)):S(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(ne(e,y,()=>{p=!0,m()})),()=>{c?.()}}function gr(t,e,n=1/0){return H(e)?gr((r,i)=>pr((o,s)=>e(r,o,i,s))(Re(t(r,i))),n):(typeof e=="number"&&(n=e),te((r,i)=>Zv(r,i,t,n)))}function Jv(t=1/0){return gr(ot,t)}function Xv(){return Jv(1)}function Ga(...t){return Xv()(Cn(t,Tn(t)))}function QA(t){return new X(e=>{Re(t()).subscribe(e)})}function Uo(t,e){return te((n,r)=>{let i=0;n.subscribe(ne(r,o=>t.call(e,o,i++)&&r.next(o)))})}function e_(t){return te((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ne(n,void 0,void 0,s=>{o=Re(t(s,e_(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function t_(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(ne(s,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function YA(t,e){return H(e)?gr(t,e,1):gr(t,1)}function $o(t){return te((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function yd(t){return t<=0?()=>Bo:te((e,n)=>{let r=0;e.subscribe(ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Wa(t=ZA){return te((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZA(){return new hr}function JA(t){return te((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function XA(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Uo((i,o)=>t(i,o,r)):ot,yd(1),n?$o(e):Wa(()=>new hr))}function vd(t){return t<=0?()=>Bo:te((e,n)=>{let r=[];e.subscribe(ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function eS(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Uo((i,o)=>t(i,o,r)):ot,vd(1),n?$o(e):Wa(()=>new hr))}function tS(t,e){return te(t_(t,e,arguments.length>=2,!0))}function nS(...t){let e=Tn(t);return te((n,r)=>{(e?Ga(t,n,e):Ga(t,n)).subscribe(r)})}function rS(t,e){return te((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(ne(r,u=>{i?.unsubscribe();let l=0,h=o++;Re(t(u,h)).subscribe(i=ne(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function iS(t){return te((e,n)=>{Re(t).subscribe(ne(n,()=>n.complete(),Lo)),!n.closed&&e.subscribe(n)})}function oS(t,e,n){let r=H(t)||e||n?{next:t,error:e,complete:n}:t;return r?te((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ne(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ot}function n_(t){let e=W(null);try{return t()}finally{W(e)}}var gi=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Pd=new gi("20.3.13");var Ja="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",re=class extends Error{code;constructor(e,n){super(Xa(e,n)),this.code=e}};function sS(t){return`NG0${Math.abs(t)}`}function Xa(t,e){return`${sS(t)}${e?": "+e:""}`}function se(t){for(let e in t)if(t[e]===se)return e;throw Error("")}function en(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(en).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Md(t,e){return t?e?`${t} ${e}`:t:e||""}var aS=se({__forward_ref__:se});function ec(t){return t.__forward_ref__=ec,t.toString=function(){return en(this())},t}function tt(t){return kd(t)?t():t}function kd(t){return typeof t=="function"&&t.hasOwnProperty(aS)&&t.__forward_ref__===ec}function fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tc(t){return{providers:t.providers||[],imports:t.imports||[]}}function Go(t){return uS(t,nc)}function cS(t){return Go(t)!==null}function uS(t,e){return t.hasOwnProperty(e)&&t[e]||null}function lS(t){let e=t?.[nc]??null;return e||null}function Ed(t){return t&&t.hasOwnProperty(Qa)?t[Qa]:null}var nc=se({\u0275prov:se}),Qa=se({\u0275inj:se}),Y=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=fe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xd(t){return t&&!!t.\u0275providers}var Od=se({\u0275cmp:se}),Fd=se({\u0275dir:se}),Ld=se({\u0275pipe:se}),Vd=se({\u0275mod:se}),qo=se({\u0275fac:se}),Ir=se({__NG_ELEMENT_ID__:se}),i_=se({__NG_ENV_ID__:se});function rc(t){return typeof t=="string"?t:t==null?"":String(t)}function s_(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():rc(t)}var a_=se({ngErrorCode:se}),dS=se({ngErrorMessage:se}),fS=se({ngTokenPath:se});function jd(t,e){return c_("",-200,e)}function ic(t,e){throw new re(-201,!1)}function c_(t,e,n){let r=new re(e,t);return r[a_]=e,r[dS]=t,n&&(r[fS]=n),r}function hS(t){return t[a_]}var Id;function u_(){return Id}function st(t){let e=Id;return Id=t,e}function Bd(t,e,n){let r=Go(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;ic(t,"Injector")}var pS={},mr=pS,wd="__NG_DI_FLAG__",Td=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=yr(n)||0;try{return this.injector.get(e,r&8?null:mr,r)}catch(i){if(ri(i))return i;throw i}}};function gS(t,e=0){let n=wa();if(n===void 0)throw new re(-203,!1);if(n===null)return Bd(t,void 0,e);{let r=mS(e),i=n.retrieve(t,r);if(ri(i)){if(r.optional)return null;throw i}return i}}function Le(t,e=0){return(u_()||gS)(tt(t),e)}function L(t,e){return Le(t,yr(e))}function yr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mS(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Dd(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=yS(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(Le(i,o))}else e.push(Le(r))}return e}function l_(t,e){return t[wd]=e,t.prototype[wd]=e,t}function yS(t){return t[wd]}function vr(t,e){let n=t.hasOwnProperty(qo);return n?t[qo]:null}function oc(t,e){t.forEach(n=>Array.isArray(n)?oc(n,e):e(n))}function Ud(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function d_(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function f_(t,e,n){let r=mi(t,e);return r>=0?t[r|1]=n:(r=~r,d_(t,r,e,n)),r}function sc(t,e){let n=mi(t,e);if(n>=0)return t[n|1]}function mi(t,e){return vS(t,e,1)}function vS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wr={},pt=[],Tr=new Y(""),$d=new Y("",-1),Hd=new Y(""),zo=class{get(e,n=mr){if(n===mr){let i=c_("",-201);throw i.name="\u0275NotFound",i}return n}};function qd(t){return t[Vd]||null}function Nn(t){return t[Od]||null}function zd(t){return t[Fd]||null}function h_(t){return t[Ld]||null}function tn(t){return{\u0275providers:t}}function p_(...t){return{\u0275providers:Gd(!0,t),\u0275fromNgModule:!0}}function Gd(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return oc(e,s=>{let c=s;Ya(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&g_(i,o),n}function g_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Wd(i,o=>{e(o,r)})}}function Ya(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=Ed(t),s=!o&&Nn(t);if(!o&&!s){let u=t.ngModule;if(o=Ed(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ya(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{oc(o.imports,h=>{Ya(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&g_(l,e)}if(!c){let l=vr(i)||(()=>new i);e({provide:i,useFactory:l,deps:pt},i),e({provide:Hd,useValue:i,multi:!0},i),e({provide:Tr,useValue:()=>Le(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Wd(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Wd(t,e){for(let n of t)xd(n)&&(n=n.\u0275providers),Array.isArray(n)?Wd(n,e):e(n)}var _S=se({provide:String,useValue:se});function m_(t){return t!==null&&typeof t=="object"&&_S in t}function ES(t){return!!(t&&t.useExisting)}function IS(t){return!!(t&&t.useFactory)}function Za(t){return typeof t=="function"}var Kd=new Y(""),Ka={},o_={},_d;function Ko(){return _d===void 0&&(_d=new zo),_d}var nt=class{},_r=class extends nt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Cd(e,s=>this.processProvider(s)),this.records.set($d,pi(void 0,this)),i.has("environment")&&this.records.set(nt,pi(void 0,this));let o=this.records.get(Kd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Hd,pt,{self:!0}))}retrieve(e,n){let r=yr(n)||0;try{return this.get(e,mr,r)}catch(i){if(ri(i))return i;throw i}}destroy(){Ho(this),this._destroyed=!0;let e=W(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),W(e)}}onDestroy(e){return Ho(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ho(this);let n=kt(this),r=st(void 0),i;try{return e()}finally{kt(n),st(r)}}get(e,n=mr,r){if(Ho(this),e.hasOwnProperty(i_))return e[i_](this);let i=yr(r),o,s=kt(this),c=st(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=CS(e)&&Go(e);h&&this.injectableDefInScope(h)?l=pi(bd(e),Ka):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ko():this.parent;return n=i&8&&n===mr?null:n,u.get(e,n)}catch(u){let l=hS(u);throw l===-200||l===-201?new re(l,null):u}finally{st(c),kt(s)}}resolveInjectorInitializers(){let e=W(null),n=kt(this),r=st(void 0),i;try{let o=this.get(Tr,pt,{self:!0});for(let s of o)s()}finally{kt(n),st(r),W(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(en(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tt(e);let n=Za(e)?e:tt(e&&e.provide),r=TS(e);if(!Za(e)&&e.multi===!0){let i=this.records.get(n);i||(i=pi(void 0,Ka,!0),i.factory=()=>Dd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=W(null);try{if(n.value===o_)throw jd(en(e));return n.value===Ka&&(n.value=o_,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&bS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{W(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function bd(t){let e=Go(t),n=e!==null?e.factory:vr(t);if(n!==null)return n;if(t instanceof Y)throw new re(204,!1);if(t instanceof Function)return wS(t);throw new re(204,!1)}function wS(t){if(t.length>0)throw new re(204,!1);let n=lS(t);return n!==null?()=>n.factory(t):()=>new t}function TS(t){if(m_(t))return pi(void 0,t.useValue);{let e=y_(t);return pi(e,Ka)}}function y_(t,e,n){let r;if(Za(t)){let i=tt(t);return vr(i)||bd(i)}else if(m_(t))r=()=>tt(t.useValue);else if(IS(t))r=()=>t.useFactory(...Dd(t.deps||[]));else if(ES(t))r=(i,o)=>Le(tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=tt(t&&(t.useClass||t.provide));if(DS(t))r=()=>new i(...Dd(t.deps));else return vr(i)||bd(i)}return r}function Ho(t){if(t.destroyed)throw new re(205,!1)}function pi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function DS(t){return!!t.deps}function bS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function CS(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Cd(t,e){for(let n of t)Array.isArray(n)?Cd(n,e):n&&xd(n)?Cd(n.\u0275providers,e):e(n)}function Rn(t,e){let n;t instanceof _r?(Ho(t),n=t):n=new Td(t);let r,i=kt(n),o=st(void 0);try{return e()}finally{kt(i),st(o)}}function v_(){return u_()!==void 0||wa()!=null}var Tt=0,z=1,q=2,Pe=3,gt=4,mt=5,yi=6,vi=7,Te=8,nn=9,xt=10,Se=11,_i=12,Qd=13,Dr=14,at=15,br=16,Cr=17,Ar=18,Qo=19,Yd=20,Xt=21,ac=22,Yo=23,ct=24,cc=25,Sr=26,Ze=27,__=1,Zd=6,Pn=7,Zo=8,Jo=9,Ie=10;function rn(t){return Array.isArray(t)&&typeof t[__]=="object"}function Dt(t){return Array.isArray(t)&&t[__]===!0}function Jd(t){return(t.flags&4)!==0}function Mn(t){return t.componentOffset>-1}function Xo(t){return(t.flags&1)===1}function Nr(t){return!!t.template}function Ei(t){return(t[q]&512)!==0}function Rr(t){return(t[q]&256)===256}var Xd="svg",E_="math";function yt(t){for(;Array.isArray(t);)t=t[Tt];return t}function ef(t,e){return yt(e[t])}function Ot(t,e){return yt(e[t.index])}function es(t,e){return t.data[e]}function bt(t,e){let n=e[t];return rn(n)?n:n[Tt]}function uc(t){return(t[q]&128)===128}function I_(t){return Dt(t[Pe])}function kn(t,e){return e==null?null:t[e]}function tf(t){t[Cr]=0}function nf(t){t[q]&1024||(t[q]|=1024,uc(t)&&ns(t))}function w_(t,e){for(;t>0;)e=e[Dr],t--;return e}function ts(t){return!!(t[q]&9216||t[ct]?.dirty)}function lc(t){t[xt].changeDetectionScheduler?.notify(8),t[q]&64&&(t[q]|=1024),ts(t)&&ns(t)}function ns(t){t[xt].changeDetectionScheduler?.notify(0);let e=An(t);for(;e!==null&&!(e[q]&8192||(e[q]|=8192,!uc(e)));)e=An(e)}function rf(t,e){if(Rr(t))throw new re(911,!1);t[Xt]===null&&(t[Xt]=[]),t[Xt].push(e)}function T_(t,e){if(t[Xt]===null)return;let n=t[Xt].indexOf(e);n!==-1&&t[Xt].splice(n,1)}function An(t){let e=t[Pe];return Dt(e)?e[Pe]:e}function D_(t){return t[vi]??=[]}function b_(t){return t.cleanup??=[]}var Z={lFrame:H_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ad=!1;function C_(){return Z.lFrame.elementDepthCount}function A_(){Z.lFrame.elementDepthCount++}function S_(){Z.lFrame.elementDepthCount--}function of(){return Z.bindingsEnabled}function N_(){return Z.skipHydrationRootTNode!==null}function R_(t){return Z.skipHydrationRootTNode===t}function P_(){Z.skipHydrationRootTNode=null}function pe(){return Z.lFrame.lView}function on(){return Z.lFrame.tView}function M_(t){return Z.lFrame.contextLView=t,t[Te]}function k_(t){return Z.lFrame.contextLView=null,t}function Ct(){let t=sf();for(;t!==null&&t.type===64;)t=t.parent;return t}function sf(){return Z.lFrame.currentTNode}function x_(){let t=Z.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ii(t,e){let n=Z.lFrame;n.currentTNode=t,n.isParent=e}function af(){return Z.lFrame.isParent}function O_(){Z.lFrame.isParent=!1}function cf(){return Ad}function uf(t){let e=Ad;return Ad=t,e}function F_(t){return Z.lFrame.bindingIndex=t}function dc(){return Z.lFrame.bindingIndex++}function L_(t){let e=Z.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function V_(){return Z.lFrame.inI18n}function j_(t,e){let n=Z.lFrame;n.bindingIndex=n.bindingRootIndex=t,fc(e)}function B_(){return Z.lFrame.currentDirectiveIndex}function fc(t){Z.lFrame.currentDirectiveIndex=t}function U_(t){let e=Z.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function lf(t){Z.lFrame.currentQueryIndex=t}function AS(t){let e=t[z];return e.type===2?e.declTNode:e.type===1?t[mt]:null}function df(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=AS(o),i===null||(o=o[Dr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Z.lFrame=$_();return r.currentTNode=e,r.lView=t,!0}function hc(t){let e=$_(),n=t[z];Z.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $_(){let t=Z.lFrame,e=t===null?null:t.child;return e===null?H_(t):e}function H_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function q_(){let t=Z.lFrame;return Z.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ff=q_;function pc(){let t=q_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function z_(t){return(Z.lFrame.contextLView=w_(t,Z.lFrame.contextLView))[Te]}function xn(){return Z.lFrame.selectedIndex}function On(t){Z.lFrame.selectedIndex=t}function G_(){let t=Z.lFrame;return es(t.tView,t.selectedIndex)}function W_(){Z.lFrame.currentNamespace=Xd}function K_(){SS()}function SS(){Z.lFrame.currentNamespace=null}function Q_(){return Z.lFrame.currentNamespace}var Y_=!0;function gc(){return Y_}function mc(t){Y_=t}function Sd(t,e=null,n=null,r){let i=hf(t,e,n,r);return i.resolveInjectorInitializers(),i}function hf(t,e=null,n=null,r,i=new Set){let o=[n||pt,p_(t)];return r=r||(typeof t=="object"?void 0:en(t)),new _r(o,e||Ko(),r||null,i)}var Ye=class t{static THROW_IF_NOT_FOUND=mr;static NULL=new zo;static create(e,n){if(Array.isArray(e))return Sd({name:""},n,e,"");{let r=e.name??"";return Sd({name:r},e.parent,e.providers,r)}}static \u0275prov=fe({token:t,providedIn:"any",factory:()=>Le($d)});static __NG_ELEMENT_ID__=-1},rs=new Y(""),is=(()=>{class t{static __NG_ELEMENT_ID__=NS;static __NG_ENV_ID__=n=>n}return t})(),Nd=class extends is{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Rr(this._lView)}onDestroy(e){let n=this._lView;return rf(n,e),()=>T_(n,e)}};function NS(){return new Nd(pe())}var Er=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ft=new Y("",{providedIn:"root",factory:()=>{let t=L(nt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Er),e.handleError(n))}}}),Z_={provide:Tr,useValue:()=>void L(Er),multi:!0};function pf(t,e){let[n,r,i]=td(t,e?.equal),o=n,s=o[Xe];return o.set=r,o.update=i,o.asReadonly=J_.bind(o),o}function J_(){let t=this[Xe];if(t.readonlyFn===void 0){let e=()=>this();e[Xe]=t,t.readonlyFn=e}return t.readonlyFn}var Sn=class{},os=new Y("",{providedIn:"root",factory:()=>!1});var gf=new Y(""),mf=new Y(""),Fn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Vo(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new X(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),wi=(()=>{class t{internalPendingTasks=L(Fn);scheduler=L(Sn);errorHandler=L(Ft);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}return t})();function ss(...t){}var yf=(()=>{class t{static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new Rd})}return t})(),Rd=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ni(t){return{toString:t}.toString()}var yc="__parameters__";function BS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function US(t,e,n){return Ni(()=>{let r=BS(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(yc)?u[yc]:Object.defineProperty(u,yc,{value:[]})[yc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ut=l_(US("Optional"),8);function $S(t){return typeof t=="function"}var wc=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ME(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var kE=(()=>{let t=()=>xE;return t.ngInherit=!0,t})();function xE(t){return t.type.prototype.ngOnChanges&&(t.setInput=qS),HS}function HS(){let t=FE(this),e=t?.current;if(e){let n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qS(t,e,n,r,i){let o=this.declaredInputs[r],s=FE(t)||zS(t,{previous:wr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new wc(l&&l.currentValue,n,u===wr),ME(t,e,i,n)}var OE="__ngSimpleChanges__";function FE(t){return t[OE]||null}function zS(t,e){return t[OE]=e}var X_=[];var de=function(t,e=null,n){for(let r=0;r<X_.length;r++){let i=X_[r];i(t,e,n)}};function GS(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=xE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function LE(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function _c(t,e,n){VE(t,e,3,n)}function Ec(t,e,n,r){(t[q]&3)===n&&VE(t,e,n,r)}function vf(t,e){let n=t[q];(n&3)===e&&(n&=16383,n+=1,t[q]=n)}function VE(t,e,n,r){let i=r!==void 0?t[Cr]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Cr]+=65536),(c<o||o==-1)&&(WS(t,n,e,u),t[Cr]=(t[Cr]&4294901760)+u+2),u++}function eE(t,e){de(4,t,e);let n=W(null);try{e.call(t)}finally{W(n),de(5,t,e)}}function WS(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[q]>>14<t[Cr]>>16&&(t[q]&3)===e&&(t[q]+=16384,eE(c,o)):eE(c,o)}var Di=-1,us=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function KS(t){return(t.flags&8)!==0}function QS(t){return(t.flags&16)!==0}function YS(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];JS(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ZS(t){return t===3||t===4||t===6}function JS(t){return t.charCodeAt(0)===64}function Kf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?tE(t,n,i,null,e[++r]):tE(t,n,i,null,null))}}return t}function tE(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function jE(t){return t!==Di}function Tc(t){return t&32767}function XS(t){return t>>16}function Dc(t,e){let n=XS(t),r=e;for(;n>0;)r=r[Dr],n--;return r}var Cf=!0;function nE(t){let e=Cf;return Cf=t,e}var e0=256,BE=e0-1,UE=5,t0=0,Lt={};function n0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ir)&&(r=n[Ir]),r==null&&(r=n[Ir]=t0++);let i=r&BE,o=1<<i;e.data[t+(i>>UE)]|=o}function $E(t,e){let n=HE(t,e);if(n!==-1)return n;let r=e[z];r.firstCreatePass&&(t.injectorIndex=e.length,_f(r.data,t),_f(e,null),_f(r.blueprint,null));let i=Qf(t,e),o=t.injectorIndex;if(jE(i)){let s=Tc(i),c=Dc(i,e),u=c[z].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function _f(t,e){t.push(0,0,0,0,0,0,0,0,e)}function HE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Qf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=KE(i),r===null)return Di;if(n++,i=i[Dr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Di}function r0(t,e,n){n0(t,e,n)}function qE(t,e,n){if(n&8||t!==void 0)return t;ic(e,"NodeInjector")}function zE(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[nn],o=st(void 0);try{return i?i.get(e,r,n&8):Bd(e,r,n&8)}finally{st(o)}}return qE(r,e,n)}function GE(t,e,n,r=0,i){if(t!==null){if(e[q]&2048&&!(r&2)){let s=u0(t,e,n,r,Lt);if(s!==Lt)return s}let o=WE(t,e,n,r,Lt);if(o!==Lt)return o}return zE(e,n,r,i)}function WE(t,e,n,r,i){let o=s0(n);if(typeof o=="function"){if(!df(e,t,r))return r&1?qE(i,n,r):zE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ic(n);else return s}finally{ff()}}else if(typeof o=="number"){let s=null,c=HE(t,e),u=Di,l=r&1?e[at][mt]:null;for((c===-1||r&4)&&(u=c===-1?Qf(t,e):e[c+8],u===Di||!iE(r,!1)?c=-1:(s=e[z],c=Tc(u),e=Dc(u,e)));c!==-1;){let h=e[z];if(rE(o,c,h.data)){let p=i0(c,e,n,s,r,l);if(p!==Lt)return p}u=e[c+8],u!==Di&&iE(r,e[z].data[c+8]===l)&&rE(o,c,e)?(s=h,c=Tc(u),e=Dc(u,e)):c=-1}}return i}function i0(t,e,n,r,i,o){let s=e[z],c=s.data[t+8],u=r==null?Mn(c)&&Cf:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=o0(c,s,n,u,l);return h!==null?Af(e,s,h,c,i):Lt}function o0(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&Nr(y)&&y.type===n)return u}return null}function Af(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof us){let c=o;if(c.resolving){let y=s_(s[n]);throw jd(y)}let u=nE(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],h,p=c.injectImpl?st(c.injectImpl):null,m=df(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&GS(n,s[n],e)}finally{p!==null&&st(p),nE(u),c.resolving=!1,ff()}}return o}function s0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ir)?t[Ir]:void 0;return typeof e=="number"?e>=0?e&BE:a0:e}function rE(t,e,n){let r=1<<t;return!!(n[e+(t>>UE)]&r)}function iE(t,e){return!(t&2)&&!(t&1&&e)}var Pr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return GE(this._tNode,this._lView,e,yr(r),n)}};function a0(){return new Pr(Ct(),pe())}function c0(t){return Ni(()=>{let e=t.prototype.constructor,n=e[qo]||Sf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[qo]||Sf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Sf(t){return kd(t)?()=>{let e=Sf(tt(t));return e&&e()}:vr(t)}function u0(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[q]&2048&&!Ei(s);){let c=WE(o,s,n,r|2,Lt);if(c!==Lt)return c;let u=o.parent;if(!u){let l=s[Yd];if(l){let h=l.get(n,Lt,r);if(h!==Lt)return h}u=KE(s),s=s[Dr]}o=u}return i}function KE(t){let e=t[z],n=e.type;return n===2?e.declTNode:n===1?t[mt]:null}function l0(){return Lc(Ct(),pe())}function Lc(t,e){return new Yf(Ot(t,e))}var Yf=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=l0}return t})();function QE(t){return(t.flags&128)===128}var Zf=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Zf||{}),YE=new Map,d0=0;function f0(){return d0++}function h0(t){YE.set(t[Qo],t)}function Nf(t){YE.delete(t[Qo])}var oE="__ngContext__";function bi(t,e){rn(e)?(t[oE]=e[Qo],h0(e)):t[oE]=e}function ZE(t){return XE(t[_i])}function JE(t){return XE(t[gt])}function XE(t){for(;t!==null&&!Dt(t);)t=t[gt];return t}var Rf;function p0(t){Rf=t}function eI(){if(Rf!==void 0)return Rf;if(typeof document<"u")return document;throw new re(210,!1)}var g0=new Y("",{providedIn:"root",factory:()=>m0}),m0="ng",tI=new Y(""),Jf=new Y("",{providedIn:"platform",factory:()=>"unknown"});var y0=new Y("",{providedIn:"root",factory:()=>eI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var v0="h",_0="b";var nI="r";var rI="di";var iI=!1,oI=new Y("",{providedIn:"root",factory:()=>iI});var E0=(t,e,n,r)=>{};function I0(t,e,n,r){E0(t,e,n,r)}function Xf(t){return(t.flags&32)===32}var w0=()=>null;function sI(t,e,n=!1){return w0(t,e,n)}function aI(t,e){let n=t.contentQueries;if(n!==null){let r=W(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];lf(o),c.contentQueries(2,e[s],s)}}}finally{W(r)}}}function Pf(t,e,n){lf(0);let r=W(null);try{e(t,n)}finally{W(r)}}function cI(t,e,n){if(Jd(e)){let r=W(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{W(r)}}}var Ci=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Ci||{});var bc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ja})`}};function eh(t){return t instanceof bc?t.changingThisBreaksApplicationSecurity:t}function uI(t,e){let n=lI(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ja})`)}return n===e}function lI(t){return t instanceof bc&&t.getTypeName()||null}var T0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function dI(t){return t=String(t),t.match(T0)?t:"unsafe:"+t}var th=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(th||{});function D0(t){let e=b0();return e?e.sanitize(th.URL,t)||"":uI(t,"URL")?eh(t):dI(rc(t))}function b0(){let t=pe();return t&&t[xt].sanitizer}function fI(t){return t instanceof Function?t():t}function C0(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var hI="ng-template";function A0(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&C0(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(nh(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function nh(t){return t.type===4&&t.value!==hI}function S0(t,e,n){let r=t.type===4&&!n?hI:t.value;return e===r}function N0(t,e,n){let r=4,i=t.attrs,o=i!==null?M0(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!At(r)&&!At(u))return!1;if(s&&At(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!S0(t,u,n)||u===""&&e.length===1){if(At(r))return!1;s=!0}}else if(r&8){if(i===null||!A0(t,i,u,n)){if(At(r))return!1;s=!0}}else{let l=e[++c],h=R0(u,i,nh(t),n);if(h===-1){if(At(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(At(r))return!1;s=!0}}}}return At(r)||s}function At(t){return(t&1)===0}function R0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return k0(e,t)}function P0(t,e,n=!1){for(let r=0;r<e.length;r++)if(N0(t,e[r],n))return!0;return!1}function M0(t){for(let e=0;e<t.length;e++){let n=t[e];if(ZS(n))return e}return t.length}function k0(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function sE(t,e){return t?":not("+e.trim()+")":e}function x0(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!At(s)&&(e+=sE(o,i),i=""),r=s,o=o||!At(r);n++}return i!==""&&(e+=sE(o,i)),e}function O0(t){return t.map(x0).join(",")}function F0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!At(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Vn={};function L0(t,e){return t.createText(e)}function V0(t,e,n){t.setValue(e,n)}function pI(t,e,n){return t.createElement(e,n)}function Cc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function gI(t,e,n){t.appendChild(e,n)}function aE(t,e,n,r,i){r!==null?Cc(t,e,n,r,i):gI(t,e,n)}function mI(t,e,n,r){t.removeChild(null,e,n,r)}function j0(t,e,n){t.setAttribute(e,"style",n)}function B0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function yI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&YS(t,e,r),i!==null&&B0(t,e,i),o!==null&&j0(t,e,o)}function rh(t,e,n,r,i,o,s,c,u,l,h){let p=Ze+r,m=p+i,y=U0(p,m),S=typeof l=="function"?l():l;return y[z]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function U0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vn);return n}function $0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=rh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ih(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[Tt]=i,p[q]=r|4|128|8|64|1024,(l!==null||t&&t[q]&2048)&&(p[q]|=2048),tf(p),p[Pe]=p[Dr]=t,p[Te]=n,p[xt]=s||t&&t[xt],p[Se]=c||t&&t[Se],p[nn]=u||t&&t[nn]||null,p[mt]=o,p[Qo]=f0(),p[yi]=h,p[Yd]=l,p[at]=e.type==2?t[at]:p,p}function H0(t,e,n){let r=Ot(e,t),i=$0(n),o=t[xt].rendererFactory,s=oh(t,ih(t,i,null,vI(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function vI(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function _I(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oh(t,e){return t[_i]?t[Qd][gt]=e:t[_i]=e,t[Qd]=e,e}function q0(t=1){EI(on(),pe(),xn()+t,!1)}function EI(t,e,n,r){if(!r)if((e[q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&_c(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ec(e,o,0,n)}On(n)}var Vc=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Vc||{});function Mf(t,e,n,r){let i=W(null);try{let[o,s,c]=t.inputs[n],u=null;(s&Vc.SignalBased)!==0&&(u=e[o][Xe]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):ME(e,u,o,r)}finally{W(i)}}var ls=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(ls||{}),z0;function sh(t,e){return z0(t,e)}var ds=new Set,ah=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(ah||{}),ch=new Y(""),cE=new Set;function jc(t){cE.has(t)||(cE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var II=!1,kf=class extends Jt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,v_()&&(this.destroyRef=L(is,{optional:!0})??void 0,this.pendingTasks=L(Fn,{optional:!0})??void 0)}emit(e){let n=W(null);try{super.next(e)}finally{W(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof we&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},sn=kf;function wI(t){let e,n;function r(){t=ss;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function uE(t){return queueMicrotask(()=>t()),()=>{t=ss}}var uh="isAngularZone",Ac=uh+"_ID",G0=0,ge=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new sn(!1);onMicrotaskEmpty=new sn(!1);onStable=new sn(!1);onError=new sn(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=II}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Q0(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uh)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new re(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,W0,ss,ss);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},W0={};function lh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function K0(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){wI(()=>{t.callbackScheduled=!1,xf(t),t.isCheckStableRunning=!0,lh(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),xf(t)}function Q0(t){let e=()=>{K0(t)},n=G0++;t._inner=t._inner.fork({name:"angular",properties:{[uh]:!0,[Ac]:n,[Ac+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(Y0(u))return r.invokeTask(o,s,c,u);try{return lE(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),dE(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return lE(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Z0(u)&&e(),dE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,xf(t),lh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function xf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function lE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dE(t){t._nesting--,lh(t)}var Sc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new sn;onMicrotaskEmpty=new sn;onStable=new sn;onError=new sn;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Y0(t){return TI(t,"__ignore_ng_zone__")}function Z0(t){return TI(t,"__scheduler_tick__")}function TI(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var DI=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}return t})();var bI=new Y("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function CI(t,e,n){let r=t.get(bI);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function J0(t,e){let n=t.get(bI);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function X0(t,e){for(let[n,r]of e)CI(t,r.animateFns)}function fE(t,e,n,r){let i=t?.[Sr]?.enter;e!==null&&i&&i.has(n.index)&&X0(r,i)}function Ti(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;Dt(i)?u=i:rn(i)&&(l=!0,i=i[Tt]);let h=yt(i);t===0&&r!==null?(fE(c,r,o,n),s==null?gI(e,r,h):Cc(e,r,h,s||null,!0)):t===1&&r!==null?(fE(c,r,o,n),Cc(e,r,h,s||null,!0)):t===2?hE(c,o,n,p=>{mI(e,h,l,p)}):t===3&&hE(c,o,n,()=>{e.destroyNode(h)}),u!=null&&fN(e,t,n,u,o,r,s)}}function eN(t,e){AI(t,e),e[Tt]=null,e[mt]=null}function tN(t,e,n,r,i,o){r[Tt]=i,r[mt]=e,Uc(t,r,n,1,i,o)}function AI(t,e){e[xt].changeDetectionScheduler?.notify(9),Uc(t,e,e[Se],2,null,null)}function nN(t){let e=t[_i];if(!e)return Ef(t[z],t);for(;e;){let n=null;if(rn(e))n=e[_i];else{let r=e[Ie];r&&(n=r)}if(!n){for(;e&&!e[gt]&&e!==t;)rn(e)&&Ef(e[z],e),e=e[Pe];e===null&&(e=t),rn(e)&&Ef(e[z],e),n=e&&e[gt]}e=n}}function dh(t,e){let n=t[Jo],r=n.indexOf(e);n.splice(r,1)}function Bc(t,e){if(Rr(e))return;let n=e[Se];n.destroyNode&&Uc(t,e,n,3,null,null),nN(e)}function Ef(t,e){if(Rr(e))return;let n=W(null);try{e[q]&=-129,e[q]|=256,e[ct]&&Fo(e[ct]),oN(t,e),iN(t,e),e[z].type===1&&e[Se].destroy();let r=e[br];if(r!==null&&Dt(e[Pe])){r!==e[Pe]&&dh(r,e);let i=e[Ar];i!==null&&i.detachView(t)}Nf(e)}finally{W(n)}}function hE(t,e,n,r){let i=t?.[Sr];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ds.add(t),CI(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),rN(t,r)}else t&&ds.delete(t),r(!1)},i)}function rN(t,e){let n=t[Sr]?.running;if(n){n.then(()=>{t[Sr].running=void 0,ds.delete(t),e(!0)});return}e(!1)}function iN(t,e){let n=t.cleanup,r=e[vi];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[vi]=null);let i=e[Xt];if(i!==null){e[Xt]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Yo];if(o!==null){e[Yo]=null;for(let s of o)s.destroy()}}function oN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof us)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];de(4,c,u);try{u.call(c)}finally{de(5,c,u)}}else{de(4,i,o);try{o.call(i)}finally{de(5,i,o)}}}}}function sN(t,e,n){return aN(t,e.parent,n)}function aN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Tt];if(Mn(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ci.None||i===Ci.Emulated)return null}return Ot(r,n)}function cN(t,e,n){return lN(t,e,n)}function uN(t,e,n){return t.type&40?Ot(t,n):null}var lN=uN,pE;function fh(t,e,n,r){let i=sN(t,r,e),o=e[Se],s=r.parent||e[mt],c=cN(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)aE(o,i,n[u],c,!1);else aE(o,i,n,c,!1);pE!==void 0&&pE(o,r,e,n,i)}function as(t,e){if(e!==null){let n=e.type;if(n&3)return Ot(e,t);if(n&4)return Of(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return as(t,r);{let i=t[e.index];return Dt(i)?Of(-1,i):yt(i)}}else{if(n&128)return as(t,e.next);if(n&32)return sh(e,t)()||yt(t[e.index]);{let r=SI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=An(t[at]);return as(i,r)}else return as(t,e.next)}}}return null}function SI(t,e){if(e!==null){let r=t[at][mt],i=e.projection;return r.projection[i]}return null}function Of(t,e){let n=Ie+t+1;if(n<e.length){let r=e[n],i=r[z].firstChild;if(i!==null)return as(r,i)}return e[Pn]}function hh(t,e,n,r,i,o,s){for(;n!=null;){let c=r[nn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&bi(yt(u),r),n.flags|=2),!Xf(n))if(l&8)hh(t,e,n.child,r,i,o,!1),Ti(e,t,c,i,u,n,o,r);else if(l&32){let h=sh(n,r),p;for(;p=h();)Ti(e,t,c,i,p,n,o,r);Ti(e,t,c,i,u,n,o,r)}else l&16?dN(t,e,r,n,i,o):Ti(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Uc(t,e,n,r,i,o){hh(n,r,t.firstChild,e,i,o,!1)}function dN(t,e,n,r,i,o){let s=n[at],u=s[mt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ti(e,t,n[nn],i,h,r,o,n)}else{let l=u,h=s[Pe];QE(r)&&(l.flags|=128),hh(t,e,l,h,i,o,!0)}}function fN(t,e,n,r,i,o,s){let c=r[Pn],u=yt(r);c!==u&&Ti(e,t,n,o,c,i,s);for(let l=Ie;l<r.length;l++){let h=r[l];Uc(h[z],h,t,e,o,c)}}function hN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ls.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ls.Important),t.setStyle(n,r,i,o))}}function NI(t,e,n,r,i){let o=xn(),s=r&2;try{On(-1),s&&e.length>Ze&&EI(t,e,Ze,!1),de(s?2:0,i,n),n(r,i)}finally{On(o),de(s?3:1,i,n)}}function ph(t,e,n){IN(t,e,n),(n.flags&64)===64&&wN(t,e,n)}function gh(t,e,n=Ot){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function pN(t,e,n,r){let o=r.get(oI,iI)||n===Ci.ShadowDom,s=t.selectRootElement(e,o);return gN(s),s}function gN(t){mN(t)}var mN=()=>null;function yN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vN(t,e,n,r,i,o){let s=e[z];if(mh(t,s,e,n,r)){Mn(t)&&EN(e,t.index);return}t.type&3&&(n=yN(n)),_N(t,e,n,r,i,o)}function _N(t,e,n,r,i,o){if(t.type&3){let s=Ot(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function EN(t,e){let n=bt(e,t);n[q]&16||(n[q]|=64)}function IN(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Mn(n)&&H0(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||$E(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Af(e,t,s,n);if(bi(u,e),o!==null&&DN(e,s-r,u,c,n,o),Nr(c)){let l=bt(n.index,e);l[Te]=Af(e,t,s,n)}}}function wN(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=B_();try{On(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];fc(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&TN(u,l)}}finally{On(-1),fc(s)}}function TN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function RI(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];P0(e,o.selectors,!1)&&(r??=[],Nr(o)?r.unshift(o):r.push(o))}return r}function DN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Mf(r,n,u,l)}}function bN(t,e,n,r,i){let o=Ze+n,s=e[z],c=i(s,e,t,r,n);e[o]=c,Ii(t,!0);let u=t.type===2;return u?(yI(e[Se],c,t),(C_()===0||Xo(t))&&bi(c,e),A_()):bi(c,e),gc()&&(!u||!Xf(t))&&fh(s,e,c,t),t}function CN(t){let e=t;return af()?O_():(e=e.parent,Ii(e,!1)),e}function AN(t,e){let n=t[nn];if(!n)return;let r;try{r=n.get(Ft,null)}catch{r=null}r?.(e)}function mh(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Mf(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Mf(h,l,r,i),c=!0}return c}function SN(t,e){let n=bt(e,t),r=n[z];NN(r,n);let i=n[Tt];i!==null&&n[yi]===null&&(n[yi]=sI(i,n[nn])),de(18),yh(r,n,n[Te]),de(19,n[Te])}function NN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function yh(t,e,n){hc(e);try{let r=t.viewQuery;r!==null&&Pf(1,r,n);let i=t.template;i!==null&&NI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ar]?.finishViewCreation(t),t.staticContentQueries&&aI(t,e),t.staticViewQueries&&Pf(2,t.viewQuery,n);let o=t.components;o!==null&&RN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[q]&=-5,pc()}}function RN(t,e){for(let n=0;n<e.length;n++)SN(t,e[n])}function vh(t,e,n,r){let i=W(null);try{let o=e.tView,c=t[q]&4096?4096:16,u=ih(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[br]=l;let h=t[Ar];return h!==null&&(u[Ar]=h.createEmbeddedView(o)),yh(o,u,n),u}finally{W(i)}}function Nc(t,e){return!e||e.firstChild===null||QE(t)}function fs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(yt(o)),Dt(o)&&PI(o,r);let s=n.type;if(s&8)fs(t,e,n.child,r);else if(s&32){let c=sh(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=SI(e,n);if(Array.isArray(c))r.push(...c);else{let u=An(e[at]);fs(u[z],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function PI(t,e){for(let n=Ie;n<t.length;n++){let r=t[n],i=r[z].firstChild;i!==null&&fs(r[z],r,i,e)}t[Pn]!==t[Tt]&&e.push(t[Pn])}function MI(t){if(t[cc]!==null){for(let e of t[cc])e.impl.addSequence(e);t[cc].length=0}}var kI=[];function PN(t){return t[ct]??MN(t)}function MN(t){let e=kI.pop()??Object.create(xN);return e.lView=t,e}function kN(t){t.lView[ct]!==t&&(t.lView=null,kI.push(t))}var xN=He($e({},Mo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ns(t.lView)},consumerOnSignalRead(){this.lView[ct]=this}});function ON(t){let e=t[ct]??Object.create(FN);return e.lView=t,e}var FN=He($e({},Mo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=An(t.lView);for(;e&&!xI(e[z]);)e=An(e);e&&nf(e)},consumerOnSignalRead(){this.lView[ct]=this}});function xI(t){return t.type!==2}function OI(t){if(t[Yo]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Yo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[q]&8192)}}var LN=100;function FI(t,e=0){let r=t[xt].rendererFactory,i=!1;i||r.begin?.();try{VN(t,e)}finally{i||r.end?.()}}function VN(t,e){let n=cf();try{uf(!0),Ff(t,e);let r=0;for(;ts(t);){if(r===LN)throw new re(103,!1);r++,Ff(t,1)}}finally{uf(n)}}function jN(t,e,n,r){if(Rr(e))return;let i=e[q],o=!1,s=!1;hc(e);let c=!0,u=null,l=null;o||(xI(t)?(l=PN(e),u=xo(l)):ba()===null?(c=!1,l=ON(e),u=xo(l)):e[ct]&&(Fo(e[ct]),e[ct]=null));try{tf(e),F_(t.bindingStartIndex),n!==null&&NI(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&_c(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ec(e,y,0,null),vf(e,0)}if(s||BN(e),OI(e),LI(e,0),t.contentQueries!==null&&aI(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&_c(e,y)}else{let y=t.contentHooks;y!==null&&Ec(e,y,1),vf(e,1)}$N(t,e);let p=t.components;p!==null&&jI(e,p,0);let m=t.viewQuery;if(m!==null&&Pf(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&_c(e,y)}else{let y=t.viewHooks;y!==null&&Ec(e,y,2),vf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ac]){for(let y of e[ac])y();e[ac]=null}o||(MI(e),e[q]&=-73)}catch(h){throw o||ns(e),h}finally{l!==null&&(Ca(l,u),c&&kN(l)),pc()}}function LI(t,e){for(let n=ZE(t);n!==null;n=JE(n))for(let r=Ie;r<n.length;r++){let i=n[r];VI(i,e)}}function BN(t){for(let e=ZE(t);e!==null;e=JE(e)){if(!(e[q]&2))continue;let n=e[Jo];for(let r=0;r<n.length;r++){let i=n[r];nf(i)}}}function UN(t,e,n){de(18);let r=bt(e,t);VI(r,n),de(19,r[Te])}function VI(t,e){uc(t)&&Ff(t,e)}function Ff(t,e){let r=t[z],i=t[q],o=t[ct],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Oo(o)),s||=!1,o&&(o.dirty=!1),t[q]&=-9217,s)jN(r,t,r.template,t[Te]);else if(i&8192){let c=W(null);try{OI(t),LI(t,1);let u=r.components;u!==null&&jI(t,u,1),MI(t)}finally{W(c)}}}function jI(t,e,n){for(let r=0;r<e.length;r++)UN(t,e[r],n)}function $N(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)On(~i);else{let o=i,s=n[++r],c=n[++r];j_(s,o);let u=e[o];de(24,u),c(2,u),de(25,u)}}}finally{On(-1)}}function _h(t,e){let n=cf()?64:1088;for(t[xt].changeDetectionScheduler?.notify(e);t;){t[q]|=n;let r=An(t);if(Ei(t)&&!r)return t;t=r}return null}function BI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function HN(t,e){let n=Ie+e;if(n<t.length)return t[n]}function Eh(t,e,n,r=!0){let i=e[z];if(zN(i,e,t,n),r){let s=Of(n,t),c=e[Se],u=c.parentNode(t[Pn]);u!==null&&tN(i,t[mt],c,e,u,s)}let o=e[yi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qN(t,e){let n=hs(t,e);return n!==void 0&&Bc(n[z],n),n}function hs(t,e){if(t.length<=Ie)return;let n=Ie+e,r=t[n];if(r){let i=r[br];i!==null&&i!==t&&dh(i,r),e>0&&(t[n-1][gt]=r[gt]);let o=Wo(t,Ie+e);eN(r[z],r);let s=o[Ar];s!==null&&s.detachView(o[z]),r[Pe]=null,r[gt]=null,r[q]&=-129}return r}function zN(t,e,n,r){let i=Ie+r,o=n.length;r>0&&(n[i-1][gt]=e),r<o-Ie?(e[gt]=n[i],Ud(n,Ie+r,e)):(n.push(e),e[gt]=null),e[Pe]=n;let s=e[br];s!==null&&n!==s&&UI(s,e);let c=e[Ar];c!==null&&c.insertView(t),lc(e),e[q]|=128}function UI(t,e){let n=t[Jo],r=e[Pe];if(rn(r))t[q]|=2;else{let i=r[Pe][at];e[at]!==i&&(t[q]|=2)}n===null?t[Jo]=[e]:n.push(e)}var Ln=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[z];return fs(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Te]}set context(e){this._lView[Te]=e}get destroyed(){return Rr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pe];if(Dt(e)){let n=e[Zo],r=n?n.indexOf(this):-1;r>-1&&(hs(e,r),Wo(n,r))}this._attachedToViewContainer=!1}Bc(this._lView[z],this._lView)}onDestroy(e){rf(this._lView,e)}markForCheck(){_h(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[q]&=-129}reattach(){lc(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,FI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ei(this._lView),n=this._lView[br];n!==null&&!e&&dh(n,this._lView),AI(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let n=Ei(this._lView),r=this._lView[br];r!==null&&!n&&UI(r,this._lView),lc(this._lView)}};var $c=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=GN;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=vh(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ln(o)}}return t})();function GN(){return WN(Ct(),pe())}function WN(t,e){return t.type&4?new $c(e,t,Lc(t,e)):null}function Hc(t,e,n,r,i){let o=t.data[e];if(o===null)o=KN(t,e,n,r,i),V_()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=x_();o.injectorIndex=s===null?-1:s.injectorIndex}return Ii(o,!0),o}function KN(t,e,n,r,i){let o=sf(),s=af(),c=s?o:o&&o.parent,u=t.data[e]=YN(t,c,n,e,r,i);return QN(t,u,o,s),u}function QN(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function YN(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return N_()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var S4=new RegExp(`^(\\d+)*(${_0}|${v0})*(.*)`);function ZN(t){let e=t[Zd]??[],r=t[Pe][Se],i=[];for(let o of e)o.data[rI]!==void 0?i.push(o):JN(o,r);t[Zd]=i}function JN(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[nI];for(;n<i;){let o=r.nextSibling;mI(e,r,!1),r=o,n++}}}var XN=()=>null,eR=()=>null;function Lf(t,e){return XN(t,e)}function tR(t,e,n){return eR(t,e,n)}var $I=class{},qc=class{},Vf=class{resolveComponentFactory(e){throw new re(917,!1)}},ys=class{static NULL=new Vf},ps=class{};var HI=(()=>{class t{static \u0275prov=fe({token:t,providedIn:"root",factory:()=>null})}return t})();var Ic={},jf=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Ic,r);return i!==Ic||n===Ic?i:this.parentInjector.get(e,n,r)}};function gE(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Md(i,c);else if(o==2){let u=c,l=e[++s];r=Md(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function vs(t,e=0){let n=pe();if(n===null)return Le(t,e);let r=Ct();return GE(r,n,tt(t),e)}function qI(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}iR(t,e,n,c,o,u,l)}o!==null&&r!==null&&nR(n,r,o)}function nR(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function rR(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function iR(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Nr(y)&&(u=!0,rR(t,n,m)),r0($E(n,e),t,y.type)}lR(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=_I(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Kf(n.mergedAttrs,y.hostAttrs),sR(t,n,e,p,y),uR(p,y,i),s!==null&&s.has(y)){let[P,N]=s.get(y);n.directiveToIndex.set(y.type,[p,P+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}oR(t,n,o)}function oR(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))mE(0,e,i,r),mE(1,e,i,r),vE(e,r,!1);else{let o=n.get(i);yE(0,e,o,r),yE(1,e,o,r),vE(e,r,!0)}}}function mE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),zI(e,o)}}function yE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),zI(e,s)}}function zI(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function vE(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||nh(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function sR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=vr(i.type,!0)),s=new us(o,Nr(i),vs,null);t.blueprint[r]=s,n[r]=s,aR(t,e,r,_I(t,n,i.hostVars,Vn),i)}function aR(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;cR(s)!=c&&s.push(c),s.push(n,r,o)}}function cR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function uR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Nr(e)&&(n[""]=t)}}function lR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function GI(t,e,n,r,i,o,s,c){let u=e[z],l=u.consts,h=kn(l,s),p=Hc(u,t,n,r,h);return o&&qI(u,e,p,kn(l,c),i),p.mergedAttrs=Kf(p.mergedAttrs,p.attrs),p.attrs!==null&&gE(p,p.attrs,!1),p.mergedAttrs!==null&&gE(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function WI(t,e){LE(t,e),Jd(e)&&t.queries.elementEnd(e)}function zc(t,e,n){if(n===Vn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function If(t,e,n){return function r(i){let o=Mn(t)?bt(t.index,e):e;_h(o,5);let s=e[Te],c=_E(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=_E(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function _E(t,e,n,r){let i=W(null);try{return de(6,e,n),n(r)!==!1}catch(o){return AN(t,o),!1}finally{de(7,e,n),W(i)}}function dR(t,e,n,r,i,o,s,c){let u=Xo(t),l=!1,h=null;if(!r&&u&&(h=hR(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Ot(t,n),m=r?r(p):p;I0(n,m,o,c);let y=i.listen(m,o,c);if(!fR(o)){let S=r?P=>r(yt(P[t.index])):t.index;KI(S,e,n,o,c,y,!1)}}return l}function fR(t){return t.startsWith("animation")||t.startsWith("transition")}function hR(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[vi],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function KI(t,e,n,r,i,o,s){let c=e.firstCreatePass?b_(e):null,u=D_(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function EE(t,e,n,r,i,o){let s=e[n],c=e[z],l=c.data[n].outputs[r],p=s[l].subscribe(o);KI(t.index,c,e,i,o,p,!0)}var Bf=Symbol("BINDING");var Rc=class extends ys{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Nn(e);return new Ai(n,this.ngModule)}};function pR(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Vc.SignalBased)!==0};return i&&(o.transform=i),o})}function gR(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function mR(t,e,n){let r=e instanceof nt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new jf(n,r):n}function yR(t){let e=t.get(ps,null);if(e===null)throw new re(407,!1);let n=t.get(HI,null),r=t.get(Sn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function vR(t,e){let n=QI(t);return pI(e,n,n==="svg"?Xd:n==="math"?E_:null)}function QI(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ai=class extends qc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=pR(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=gR(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=O0(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){de(22);let c=W(null);try{let u=this.componentDef,l=_R(r,u,s,o),h=mR(u,i||this.ngModule,e),p=yR(h),m=p.rendererFactory.createRenderer(null,u),y=r?pN(m,r,u.encapsulation,h):vR(u,m),S=s?.some(IE)||o?.some(x=>typeof x!="function"&&x.bindings.some(IE)),P=ih(null,l,null,512|vI(u),null,null,p,m,h,null,sI(y,h,!0));P[Ze]=y,hc(P);let N=null;try{let x=GI(Ze,P,2,"#host",()=>l.directiveRegistry,!0,0);yI(m,y,x),bi(y,P),ph(l,P,x),cI(l,x,P),WI(l,x),n!==void 0&&IR(x,this.ngContentSelectors,n),N=bt(x.index,P),P[Te]=N[Te],yh(l,P,null)}catch(x){throw N!==null&&Nf(N),Nf(P),x}finally{de(23),pc()}return new Pc(this.componentType,P,!!S)}finally{W(c)}}};function _R(t,e,n,r){let i=t?["ng-version","20.3.13"]:F0(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[Bf].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[Bf].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=zd(p);u.push(m)}return rh(0,null,ER(o,s),1,c,u,null,null,null,[i],null)}function ER(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function IE(t){let e=t[Bf].kind;return e==="input"||e==="twoWay"}var Pc=class extends $I{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=es(n[z],Ze),this.location=Lc(this._tNode,n),this.instance=bt(this._tNode.index,n)[Te],this.hostView=this.changeDetectorRef=new Ln(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=mh(r,i[z],i,e,n);this.previousInputValues.set(e,n);let s=bt(r.index,i);_h(s,1)}get injector(){return new Pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function IR(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Gc=(()=>{class t{static __NG_ELEMENT_ID__=wR}return t})();function wR(){let t=Ct();return DR(t,pe())}var TR=Gc,YI=class extends TR{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Lc(this._hostTNode,this._hostLView)}get injector(){return new Pr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qf(this._hostTNode,this._hostLView);if(jE(e)){let n=Dc(e,this._hostLView),r=Tc(e),i=n[z].data[r+8];return new Pr(i,n)}else return new Pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=wE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ie}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Lf(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,Nc(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!$S(e),l;if(u)l=n;else{let N=n||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,c=N.bindings}let h=u?e:new Ai(Nn(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(nt,null);x&&(o=x)}let m=Nn(h.componentType??{}),y=Lf(this._lContainer,m?.id??null),S=y?.firstChild??null,P=h.create(p,i,S,o,s,c);return this.insertImpl(P.hostView,l,Nc(this._hostTNode,y)),P}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(I_(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Pe],l=new YI(u,u[mt],u[Pe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Eh(s,i,o,r),e.attachToViewContainerRef(),Ud(wf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=wE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=hs(this._lContainer,n);r&&(Wo(wf(this._lContainer),n),Bc(r[z],r))}detach(e){let n=this._adjustIndex(e,-1),r=hs(this._lContainer,n);return r&&Wo(wf(this._lContainer),n)!=null?new Ln(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function wE(t){return t[Zo]}function wf(t){return t[Zo]||(t[Zo]=[])}function DR(t,e){let n,r=e[t.index];return Dt(r)?n=r:(n=BI(r,e,null,t),e[t.index]=n,oh(e,n)),CR(n,e,t,r),new YI(n,t,e)}function bR(t,e){let n=t[Se],r=n.createComment(""),i=Ot(e,t),o=n.parentNode(i);return Cc(n,o,r,n.nextSibling(i),!1),r}var CR=NR,AR=()=>!1;function SR(t,e,n){return AR(t,e,n)}function NR(t,e,n,r){if(t[Pn])return;let i;n.type&8?i=yt(r):i=bR(e,n),t[Pn]=i}var Mr=class{},ZI=class{};var Mc=class extends Mr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rc(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=qd(e);this._bootstrapComponents=fI(o.bootstrap),this._r3Injector=hf(e,n,[{provide:Mr,useValue:this},{provide:ys,useValue:this.componentFactoryResolver},...r],en(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kc=class extends ZI{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Mc(this.moduleType,e,[])}};var gs=class extends Mr{injector;componentFactoryResolver=new Rc(this);instance=null;constructor(e){super();let n=new _r([...e.providers,{provide:Mr,useValue:this},{provide:ys,useValue:this.componentFactoryResolver}],e.parent||Ko(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function JI(t,e,n=null){return new gs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var RR=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Gd(!1,n.type),i=r.length>0?JI([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=fe({token:t,providedIn:"environment",factory:()=>new t(Le(nt))})}return t})();function PR(t){return Ni(()=>{let e=XI(t),n=He($e({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(RR).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ci.Emulated,styles:t.styles||pt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&jc("NgStandalone"),ew(n);let r=t.dependencies;return n.directiveDefs=TE(r,MR),n.pipeDefs=TE(r,h_),n.id=OR(n),n})}function MR(t){return Nn(t)||zd(t)}function Ih(t){return Ni(()=>({type:t.type,bootstrap:t.bootstrap||pt,declarations:t.declarations||pt,imports:t.imports||pt,exports:t.exports||pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function kR(t,e){if(t==null)return wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Vc.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function xR(t){if(t==null)return wr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function wh(t){return Ni(()=>{let e=XI(t);return ew(e),e})}function XI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:kR(t.inputs,e),outputs:xR(t.outputs),debugInfo:null}}function ew(t){t.features?.forEach(e=>e(t))}function TE(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function OR(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tw(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=Kf(t.mergedAttrs,t.attrs);let h=t.tView=rh(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),Ii(t,!1);let u=LR(n,e,t,r);gc()&&fh(n,e,u,t),bi(u,e);let l=BI(u,e,u,t);e[r+Ze]=l,oh(e,l),SR(l,t,e)}function FR(t,e,n,r,i,o,s,c,u,l,h){let p=n+Ze,m;return e.firstCreatePass?(m=Hc(e,p,4,s||null,c||null),of()&&qI(e,t,m,kn(e.consts,l),RI),LE(e,m)):m=e.data[p],tw(m,t,e,n,r,i,o,u),Xo(m)&&ph(e,t,m),l!=null&&gh(t,m,h),m}function DE(t,e,n,r,i,o,s,c,u,l,h){let p=n+Ze,m;if(e.firstCreatePass){if(m=Hc(e,p,4,s||null,c||null),l!=null){let y=kn(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return tw(m,t,e,n,r,i,o,u),l!=null&&gh(t,m,h),m}function nw(t,e,n,r,i,o,s,c){let u=pe(),l=on(),h=kn(l.consts,o);return FR(u,l,t,e,n,r,i,h,void 0,s,c),nw}var LR=VR;function VR(t,e,n,r){return mc(!0),e[Se].createComment("")}var jR=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var rw=new Y("");function Wc(t){return!!t&&typeof t.then=="function"}function Th(t){return!!t&&typeof t.subscribe=="function"}var iw=new Y("");var Dh=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(iw,{optional:!0})??[];injector=L(Ye);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Rn(this.injector,i);if(Wc(o))n.push(o);else if(Th(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ow=new Y("");function sw(){ed(()=>{let t="";throw new re(600,t)})}function aw(t){return t.isBoundToModule}var BR=10;var _s=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(Ft);afterRenderManager=L(DI);zonelessEnabled=L(os);rootEffectScheduler=L(yf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Jt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(Fn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pr(n=>!n))}constructor(){L(ch,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(nt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ye.NULL){return this._injector.get(ge).run(()=>{de(10);let s=n instanceof qc;if(!this._injector.get(Dh).done){let S="";throw new re(405,S)}let u;s?u=n:u=this._injector.get(ys).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=aw(u)?void 0:this._injector.get(Mr),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(rw,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),cs(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),de(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){de(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ah.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let n=W(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,W(n),this.afterTick.next(),de(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ps,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<BR;)de(14),this.synchronizeOnce(),de(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ts(i))continue;let o=r&&!this.zonelessEnabled?0:1;FI(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ts(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;cs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ow,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>cs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new re(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var O4=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Uf=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Tf(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function UR(t,e,n){let r,i,o=0,s=t.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Tf(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(s),y=e[u],S=Tf(s,m,u,y,n);if(S!==0){S<0&&t.updateValue(s,y),s--,u--;continue}let P=n(o,l),N=n(s,m),x=n(o,h);if(Object.is(x,N)){let j=n(u,y);Object.is(j,P)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new xc,i??=CE(t,o,s,n),$f(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(P,t.detach(o)),s--;else{let j=t.create(o,e[o]);t.attach(o,j),o++,s++}}for(;o<=u;)bE(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,m=Tf(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new xc,i??=CE(t,o,s,n);let y=n(o,p);if($f(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let S=n(o,h);r.set(S,t.detach(o)),s--}}}for(;!l.done;)bE(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function $f(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function bE(t,e,n,r,i){if($f(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function CE(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var xc=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var Hf=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ie}};var qf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function $R(t,e,n,r,i,o,s,c,u,l,h,p,m){jc("NgControlFlow");let y=pe(),S=on(),P=u!==void 0,N=pe(),x=c?s.bind(N[at][Te]):s,j=new qf(P,x);N[Ze+t]=j,DE(y,S,t+1,e,n,r,i,kn(S.consts,o),256),P&&DE(y,S,t+2,u,l,h,p,kn(S.consts,m),512)}var zf=class extends Uf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ie}at(e){return this.getLView(e)[Te].$implicit}attach(e,n){let r=n[yi];this.needsIndexUpdate||=e!==this.length,Eh(this.lContainer,n,e,Nc(this.templateTNode,r)),qR(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,zR(this.lContainer,e),GR(this.lContainer,e)}create(e,n){let r=Lf(this.lContainer,this.templateTNode.tView.ssrId),i=vh(this.hostLView,this.templateTNode,new Hf(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Bc(e[z],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Te].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Te].$index=e}getLView(e){return WR(this.lContainer,e)}};function HR(t){let e=W(null),n=xn();try{let r=pe(),i=r[z],o=r[n],s=n+1,c=AE(r,s);if(o.liveCollection===void 0){let l=SE(i,s);o.liveCollection=new zf(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(UR(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=dc(),h=u.length===0;if(zc(r,l,h)){let p=n+2,m=AE(r,p);if(h){let y=SE(i,p),S=tR(m,y,r),P=vh(r,y,void 0,{dehydratedView:S});Eh(m,P,0,Nc(y,S))}else i.firstUpdatePass&&ZN(m),qN(m,0)}}}finally{W(e)}}function AE(t,e){return t[e]}function qR(t,e){if(t.length<=Ie)return;let n=Ie+e,r=t[n],i=r?r[Sr]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[nn];J0(o,i),ds.delete(r),i.detachedLeaveAnimationFns=void 0}}function zR(t,e){if(t.length<=Ie)return;let n=Ie+e,r=t[n],i=r?r[Sr]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function GR(t,e){return hs(t,e)}function WR(t,e){return HN(t,e)}function SE(t,e){return es(t,e)}function cw(t,e,n){let r=pe(),i=dc();if(zc(r,i,e)){let o=on(),s=G_();vN(s,r,t,e,r[Se],n)}return cw}function NE(t,e,n,r,i){mh(e,t,n,i?"class":"style",r)}function bh(t,e,n,r){let i=pe(),o=i[z],s=t+Ze,c=o.firstCreatePass?GI(s,i,2,e,RI,of(),n,r):o.data[s];if(bN(c,i,t,e,KR),Xo(c)){let u=i[z];ph(u,i,c),cI(u,c,i)}return r!=null&&gh(i,c),bh}function Ch(){let t=on(),e=Ct(),n=CN(e);return t.firstCreatePass&&WI(t,n),R_(n)&&P_(),S_(),n.classesWithoutHost!=null&&KS(n)&&NE(t,n,pe(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&QS(n)&&NE(t,n,pe(),n.stylesWithoutHost,!1),Ch}function uw(t,e,n,r){return bh(t,e,n,r),Ch(),uw}var KR=(t,e,n,r,i)=>(mc(!0),pI(e[Se],r,Q_()));function QR(){return pe()}var Es="en-US";var YR=Es;function lw(t){typeof t=="string"&&(YR=t.toLowerCase().replace(/_/g,"-"))}function dw(t,e,n){let r=pe(),i=on(),o=Ct();return ZR(i,r,r[Se],o,t,e,n),dw}function ZR(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=If(r,e,o),dR(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=If(r,e,o),EE(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=If(r,e,o),EE(r,e,p,i,i,u)}}function JR(t=1){return z_(t)}function vc(t,e){return t<<17|e<<2}function kr(t){return t>>17&32767}function XR(t){return(t&2)==2}function eP(t,e){return t&131071|e<<17}function Gf(t){return t|2}function Si(t){return(t&131068)>>2}function Df(t,e){return t&-131069|e<<2}function tP(t){return(t&1)===1}function Wf(t){return t|1}function nP(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=kr(s),u=Si(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||mi(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=kr(t[c+1]);t[r+1]=vc(m,c),m!==0&&(t[m+1]=Df(t[m+1],r)),t[c+1]=eP(t[c+1],r)}else t[r+1]=vc(c,0),c!==0&&(t[c+1]=Df(t[c+1],r)),c=r;else t[r+1]=vc(u,0),c===0?c=r:t[u+1]=Df(t[u+1],r),u=r;l&&(t[r+1]=Gf(t[r+1])),RE(t,h,r,!0),RE(t,h,r,!1),rP(e,h,t,r,o),s=vc(c,u),o?e.classBindings=s:e.styleBindings=s}function rP(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&mi(o,e)>=0&&(n[r+1]=Wf(n[r+1]))}function RE(t,e,n,r){let i=t[n+1],o=e===null,s=r?kr(i):Si(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];iP(u,e)&&(c=!0,t[s+1]=r?Wf(l):Gf(l)),s=r?kr(l):Si(l)}c&&(t[n+1]=r?Gf(i):Wf(i))}function iP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?mi(t,e)>=0:!1}function fw(t,e){return oP(t,e,null,!0),fw}function oP(t,e,n,r){let i=pe(),o=on(),s=L_(2);if(o.firstUpdatePass&&aP(o,t,s,r),e!==Vn&&zc(i,s,e)){let c=o.data[xn()];fP(o,c,i,i[Se],t,i[s+1]=hP(e,n),r,s)}}function sP(t,e){return e>=t.expandoStartIndex}function aP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[xn()],s=sP(t,n);pP(o,r)&&e===null&&!s&&(e=!1),e=cP(i,o,e,r),nP(i,o,e,n,s,r)}}function cP(t,e,n,r){let i=U_(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=bf(null,t,e,n,r),n=ms(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=bf(i,t,e,n,r),o===null){let u=uP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=bf(null,t,e,u[1],r),u=ms(u,e.attrs,r),lP(t,e,r,u))}else o=dP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function uP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Si(r)!==0)return t[kr(r)]}function lP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[kr(i)]=r}function dP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ms(r,s,n)}return ms(r,e.attrs,n)}function bf(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=ms(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ms(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),f_(t,s,n?!0:e[++o]))}return t===void 0?null:t}function fP(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=tP(l)?PE(u,e,n,i,Si(l),s):void 0;if(!Oc(h)){Oc(o)||XR(l)&&(o=PE(u,null,n,i,c,s));let p=ef(xn(),n);hN(r,s,p,i,o)}}function PE(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Vn&&(m=p?pt:void 0);let y=p?sc(m,r):h===r?m:void 0;if(l&&!Oc(y)&&(y=sc(u,r)),Oc(y)&&(c=y,s))return c;let S=t[i+1];i=s?kr(S):Si(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=sc(u,r))}return c}function Oc(t){return t!==void 0}function hP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=en(eh(t)))),t}function pP(t,e){return(t.flags&(e?8:16))!==0}function gP(t,e=""){let n=pe(),r=on(),i=t+Ze,o=r.firstCreatePass?Hc(r,i,1,e,null):r.data[i],s=mP(r,n,o,e,t);n[i]=s,gc()&&fh(r,n,s,o),Ii(o,!1)}var mP=(t,e,n,r,i)=>(mc(!0),L0(e[Se],r));function yP(t,e,n,r=""){return zc(t,dc(),n)?e+rc(n)+r:Vn}function hw(t){return Ah("",t),hw}function Ah(t,e,n){let r=pe(),i=yP(r,t,e,n);return i!==Vn&&vP(r,xn(),i),Ah}function vP(t,e,n){let r=ef(e,t);V0(t[Se],r,n)}var Fc=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_P=(()=>{class t{compileModuleSync(n){return new kc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=qd(n),o=fI(i.declarations).reduce((s,c)=>{let u=Nn(c);return u&&s.push(new Ai(u)),s},[]);return new Fc(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var EP=(()=>{class t{zone=L(ge);changeDetectionScheduler=L(Sn);applicationRef=L(_s);applicationErrorHandler=L(Ft);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pw=new Y("",{factory:()=>!1});function Sh({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(He($e({},Nh()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:Tr,multi:!0,useFactory:()=>{let r=L(EP,{optional:!0});return()=>r.initialize()}},{provide:Tr,multi:!0,useFactory:()=>{let r=L(wP);return()=>{r.initialize()}}},e===!0?{provide:gf,useValue:!0}:[],{provide:mf,useValue:n??II},{provide:Ft,useFactory:()=>{let r=L(ge),i=L(nt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Er),o.handleError(s))})}}}]}function IP(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Sh({ngZoneFactory:()=>{let i=Nh(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&jc("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return tn([{provide:pw,useValue:!0},{provide:os,useValue:!1},r])}function Nh(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var wP=(()=>{class t{subscription=new we;initialized=!1;zone=L(ge);pendingTasks=L(Fn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var gw=(()=>{class t{applicationErrorHandler=L(Ft);appRef=L(_s);taskService=L(Fn);ngZone=L(ge);zonelessEnabled=L(os);tracing=L(ch,{optional:!0});disableScheduling=L(gf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new we;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ac):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(mf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Sc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?uE:wI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ac+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TP(){return typeof $localize<"u"&&$localize.locale||Es}var Kc=new Y("",{providedIn:"root",factory:()=>L(Kc,{optional:!0,skipSelf:!0})||TP()});function yw(t){return n_(t)}var mw=class{[Xe];constructor(e){this[Xe]=e}destroy(){this[Xe].destroy()}};var _w=Symbol("InputSignalNode#UNSET"),OP=He($e({},Aa),{transformFn:void 0,applyValueToInputSignal(t,e){oi(t,e)}});function Ew(t,e){let n=Object.create(OP);n.value=t,n.transformFn=e?.transform;function r(){if(ko(n),n.value===_w){let i=null;throw new re(-950,i)}return n.value}return r[Xe]=n,r}var FP=new Y("");FP.__NG_ELEMENT_ID__=t=>{let e=Ct();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new re(204,!1)};function vw(t,e){return Ew(t,e)}function LP(t){return Ew(_w,t)}var FG=(vw.required=LP,vw);var Rh=new Y(""),VP=new Y("");function Is(t){return!t.moduleRef}function jP(t){let e=Is(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{Is(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ft),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Is(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Rh);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Rh);s.add(o),t.moduleRef.onDestroy(()=>{cs(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return UP(r,n,()=>{let o=e.get(Fn),s=o.add(),c=e.get(Dh);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Kc,Es);if(lw(u||Es),!e.get(VP,!0))return Is(t)?e.get(_s):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Is(t)){let h=e.get(_s);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return BP?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var BP;function UP(t,e,n){try{let r=n();return Wc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Qc=null;function $P(t=[],e){return Ye.create({name:e,providers:[{provide:Kd,useValue:"platform"},{provide:Rh,useValue:new Set([()=>Qc=null])},...t]})}function HP(t=[]){if(Qc)return Qc;let e=$P(t);return Qc=e,sw(),qP(e),e}function qP(t){let e=t.get(tI,null);Rn(t,()=>{e?.forEach(n=>n())})}function Ph(){return!1}var zP=(()=>{class t{static __NG_ELEMENT_ID__=GP}return t})();function GP(t){return WP(Ct(),pe(),(t&16)===16)}function WP(t,e,n){if(Mn(t)&&!n){let r=bt(t.index,e);return new Ln(r,r)}else if(t.type&175){let r=e[at];return new Ln(r,e)}return null}function LG(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;de(8);try{let o=i?.injector??HP(r),s=[Sh({}),{provide:Sn,useExisting:gw},Z_,...n||[]],c=new gs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return jP({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{de(9)}}var Tw=null;function Yc(){return Tw}function KP(t){Tw??=t}var kh=class{},xh=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:()=>L(Dw),providedIn:"platform"})}return t})();var Dw=(()=>{class t extends xh{_location;_history;_doc=L(rs);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yc().getBaseHref(this._doc)}onPopState(n){let r=Yc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Yc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function bw(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Iw(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function jn(t){return t&&t[0]!=="?"?`?${t}`:t}var Zc=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:()=>L(Aw),providedIn:"root"})}return t})(),Cw=new Y(""),Aw=(()=>{class t extends Zc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(rs).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return bw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+jn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+jn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Le(xh),Le(Cw,8))};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sw=(()=>{class t{_subject=new Jt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=ZP(Iw(ww(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+jn(r))}normalize(n){return t.stripTrailingSlash(YP(this._basePath,ww(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=jn;static joinWithSlash=bw;static stripTrailingSlash=Iw;static \u0275fac=function(r){return new(r||t)(Le(Zc))};static \u0275prov=fe({token:t,factory:()=>QP(),providedIn:"root"})}return t})();function QP(){return new Sw(Le(Zc))}function YP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ww(t){return t.replace(/\/index.html$/,"")}function ZP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var JP=(()=>{class t{_viewContainer;_context=new Jc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Nw(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Nw(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(vs(Gc),vs($c))};static \u0275dir=wh({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Jc=class{$implicit=null;ngIf=null};function Nw(t,e){if(t&&!t.createEmbeddedView)throw new re(2020,!1)}var XP=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ih({type:t});static \u0275inj=tc({})}return t})();function eM(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Oh=class{};var m5="browser";var Rw=()=>{};var kw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Xc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Lh;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Lh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rM=function(t){let e=kw(t);return Xc.encodeByteArray(e,!0)},Ts=function(t){return rM(t).replace(/\./g,"")},eu=function(t){try{return Xc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var iM=()=>jh().__FIREBASE_DEFAULTS__,oM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&eu(t[1]);return e&&JSON.parse(e)},tu=()=>{try{return Rw()||iM()||oM()||sM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bh=t=>{var e,n;return(n=(e=tu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xw=t=>{let e=Bh(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uh=()=>{var t;return(t=tu())===null||t===void 0?void 0:t.config},$h=t=>{var e;return(e=tu())===null||e===void 0?void 0:e[`_${t}`]};var xr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Bn(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function nu(t){return I(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function Ow(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ts(JSON.stringify(n)),Ts(JSON.stringify(s)),""].join(".")}var ws={};function aM(){let t={prod:[],emulator:[]};for(let e of Object.keys(ws))ws[e]?t.emulator.push(e):t.prod.push(e);return t}function cM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Pw=!1;function ru(t,e){if(typeof window>"u"||typeof document>"u"||!Bn(window.location.host)||ws[t]===e||ws[t]||Pw)return;ws[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=aM().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Pw=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=cM(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),P=n("learnmore"),N=document.getElementById(P)||document.createElement("a"),x=n("preprendIcon"),j=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let K=m.element;c(K),h(N,P);let ue=l();u(j,x),K.append(j,S,N,ue),document.body.appendChild(K)}o?(S.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function uM(){var t;let e=(t=tu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vw(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bw(){let t=Me();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Uw(){return!uM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ds(){try{return typeof indexedDB=="object"}catch{return!1}}function $w(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var lM="FirebaseError",lt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}},St=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?dM(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new lt(i,c,r)}};function dM(t,e){return t.replace(fM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fM=/\{\$([^}]+)}/g;function Hw(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vt(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Mw(o)&&Mw(s)){if(!Vt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Mw(t){return t!==null&&typeof t=="object"}function bs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qw(t,e){let n=new Vh(t,e);return n.subscribe.bind(n)}var Vh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fh),i.error===void 0&&(i.error=Fh),i.complete===void 0&&(i.complete=Fh);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function hM(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fh(){}var b5=14400*1e3;function ke(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Or="[DEFAULT]";var Hh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new xr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gM(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pM(t){return t===Or?void 0:t}function gM(t){return t.instantiationMode==="EAGER"}var iu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Hh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var mM=[],J=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(J||{}),yM={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},vM=J.INFO,_M={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},EM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=_M[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},jt=class{constructor(e){this.name=e,this._logLevel=vM,this._logHandler=EM,this._userLogHandler=null,mM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}};var IM=(t,e)=>e.some(n=>t instanceof n),zw,Gw;function wM(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TM(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ww=new WeakMap,zh=new WeakMap,Kw=new WeakMap,qh=new WeakMap,Wh=new WeakMap;function DM(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Bt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Ww.set(n,t)}).catch(()=>{}),Wh.set(e,t),e}function bM(t){if(zh.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});zh.set(t,e)}var Gh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qw(t){Gh=t(Gh)}function CM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ou(this),e,...n);return Kw.set(r,e.sort?e.sort():[e]),Bt(r)}:TM().includes(t)?function(...e){return t.apply(ou(this),e),Bt(Ww.get(this))}:function(...e){return Bt(t.apply(ou(this),e))}}function AM(t){return typeof t=="function"?CM(t):(t instanceof IDBTransaction&&bM(t),IM(t,wM())?new Proxy(t,Gh):t)}function Bt(t){if(t instanceof IDBRequest)return DM(t);if(qh.has(t))return qh.get(t);let e=AM(t);return e!==t&&(qh.set(t,e),Wh.set(e,t)),e}var ou=t=>Wh.get(t);function Zw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=Bt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Bt(s.result),u.oldVersion,u.newVersion,Bt(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var SM=["get","getKey","getAll","getAllKeys","count"],NM=["put","add","delete","clear"],Kh=new Map;function Yw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kh.get(e))return Kh.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=NM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SM.includes(n)))return;let o=function(s,...c){return I(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Kh.set(e,o),o}Qw(t=>He($e({},t),{get:(e,n,r)=>Yw(e,n)||t.get(e,n,r),has:(e,n)=>!!Yw(e,n)||t.has(e,n)}));var Yh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function RM(t){let e=t.getComponent();return e?.type==="VERSION"}var Zh="@firebase/app",Jw="0.13.2";var an=new jt("@firebase/app"),PM="@firebase/app-compat",MM="@firebase/analytics-compat",kM="@firebase/analytics",xM="@firebase/app-check-compat",OM="@firebase/app-check",FM="@firebase/auth",LM="@firebase/auth-compat",VM="@firebase/database",jM="@firebase/data-connect",BM="@firebase/database-compat",UM="@firebase/functions",$M="@firebase/functions-compat",HM="@firebase/installations",qM="@firebase/installations-compat",zM="@firebase/messaging",GM="@firebase/messaging-compat",WM="@firebase/performance",KM="@firebase/performance-compat",QM="@firebase/remote-config",YM="@firebase/remote-config-compat",ZM="@firebase/storage",JM="@firebase/storage-compat",XM="@firebase/firestore",ek="@firebase/ai",tk="@firebase/firestore-compat",nk="firebase",rk="11.10.0";var Jh="[DEFAULT]",ik={[Zh]:"fire-core",[PM]:"fire-core-compat",[kM]:"fire-analytics",[MM]:"fire-analytics-compat",[OM]:"fire-app-check",[xM]:"fire-app-check-compat",[FM]:"fire-auth",[LM]:"fire-auth-compat",[VM]:"fire-rtdb",[jM]:"fire-data-connect",[BM]:"fire-rtdb-compat",[UM]:"fire-fn",[$M]:"fire-fn-compat",[HM]:"fire-iid",[qM]:"fire-iid-compat",[zM]:"fire-fcm",[GM]:"fire-fcm-compat",[WM]:"fire-perf",[KM]:"fire-perf-compat",[QM]:"fire-rc",[YM]:"fire-rc-compat",[ZM]:"fire-gcs",[JM]:"fire-gcs-compat",[XM]:"fire-fst",[tk]:"fire-fst-compat",[ek]:"fire-vertex","fire-js":"fire-js",[nk]:"fire-js-all"};var Cs=new Map,ok=new Map,Xh=new Map;function Xw(t,e){try{t.container.addComponent(e)}catch(n){an.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nt(t){let e=t.name;if(Xh.has(e))return an.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,t);for(let n of Cs.values())Xw(n,t);for(let n of ok.values())Xw(n,t);return!0}function Ri(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vt(t){return t==null?!1:t.settings!==void 0}var sk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new St("app","Firebase",sk);var ep=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}};var $n=rk;function rp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jh,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Un.create("bad-app-name",{appName:String(i)});if(n||(n=Uh()),!n)throw Un.create("no-options");let o=Cs.get(i);if(o){if(Vt(n,o.options)&&Vt(r,o.config))return o;throw Un.create("duplicate-app",{appName:i})}let s=new iu(i);for(let u of Xh.values())s.addComponent(u);let c=new ep(n,r,s);return Cs.set(i,c),c}function Fr(t=Jh){let e=Cs.get(t);if(!e&&t===Jh&&Uh())return rp();if(!e)throw Un.create("no-app",{appName:t});return e}function su(){return Array.from(Cs.values())}function _e(t,e,n){var r;let i=(r=ik[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),an.warn(c.join(" "));return}Nt(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var ak="firebase-heartbeat-database",ck=1,As="firebase-heartbeat-store",Qh=null;function rT(){return Qh||(Qh=Zw(ak,ck,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(As)}catch(n){console.warn(n)}}}}).catch(t=>{throw Un.create("idb-open",{originalErrorMessage:t.message})})),Qh}function uk(t){return I(this,null,function*(){try{let n=(yield rT()).transaction(As),r=yield n.objectStore(As).get(iT(t));return yield n.done,r}catch(e){if(e instanceof lt)an.warn(e.message);else{let n=Un.create("idb-get",{originalErrorMessage:e?.message});an.warn(n.message)}}})}function eT(t,e){return I(this,null,function*(){try{let r=(yield rT()).transaction(As,"readwrite");yield r.objectStore(As).put(e,iT(t)),yield r.done}catch(n){if(n instanceof lt)an.warn(n.message);else{let r=Un.create("idb-set",{originalErrorMessage:n?.message});an.warn(r.message)}}})}function iT(t){return`${t.name}!${t.options.appId}`}var lk=1024,dk=30,tp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new np(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=tT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>dk){let s=hk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){an.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=tT(),{heartbeatsToSend:r,unsentEntries:i}=fk(this._heartbeatsCache.heartbeats),o=Ts(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return an.warn(n),""}})}};function tT(){return new Date().toISOString().substring(0,10)}function fk(t,e=lk){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),nT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var np=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Ds()?$w().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield uk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return eT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return eT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function nT(t){return Ts(JSON.stringify({version:2,heartbeats:t})).length}function hk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function pk(t){Nt(new Je("platform-logger",e=>new Yh(e),"PRIVATE")),Nt(new Je("heartbeat",e=>new tp(e),"PRIVATE")),_e(Zh,Jw,t),_e(Zh,Jw,"esm2017"),_e("fire-js","")}pk("");var gk="firebase",mk="11.10.0";_e(gk,mk,"app");function oT(t){t===void 0&&(t=L(Ye));let e=t.get(wi);return n=>new X(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var Hn=new gi("ANGULARFIRE2_VERSION");function Ss(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Mi=(t,e)=>{let n=e?[e]:su(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Pi=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Pi||{}),sT=Ph()&&typeof Zone<"u"?Pi.WARN:Pi.SILENT;var au=class{zone;delegate;constructor(e,n=gd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},qn=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=L(ge);this.outsideAngular=n.runOutsideAngular(()=>new au(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new au(typeof Zone>"u"?void 0:Zone.current,pd))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),aT=!1;function yk(t,e){!aT&&(sT>Pi.SILENT||Ph())&&(aT=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),sT>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function vk(t){let e=L(ge,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Lr(t){let e=L(ge,{optional:!0});return e?e.run(()=>t()):t()}var _k=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Rn(n,()=>Lr(()=>t.apply(void 0,r)))),dt=(t,e,n)=>(n||=e?Pi.WARN:Pi.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=L(qn),s=L(wi),c=L(nt)}catch{return yk(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Lr(()=>s.add())),i[l]=_k(i[l],r,c));let u=vk(()=>t.apply(this,i));return e?u instanceof X?u.pipe(bn(o.outsideAngular),Dn(o.insideAngular),oT(c)):u instanceof Promise?Lr(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Rn(c,()=>Lr(()=>h(m))),m=>Rn(c,()=>Lr(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Lr(()=>u):u instanceof X?u.pipe(bn(o.outsideAngular),Dn(o.insideAngular)):Lr(()=>u)});var cn=class{constructor(e){return e}},Vr=class{constructor(){return su()}};function Ek(t){return t&&t.length===1?t[0]:new cn(Fr())}var ip=new Y("angularfire2._apps"),Ik={provide:cn,useFactory:Ek,deps:[[new ut,ip]]},wk={provide:Vr,deps:[[new ut,ip]]};function Tk(t){return(e,n)=>{let r=n.get(Jf);_e("angularfire",Hn.full,"core"),_e("angularfire",Hn.full,"app"),_e("angular",Pd.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new cn(i)}}function E7(t,...e){return tn([Ik,wk,{provide:ip,useFactory:Tk(t),multi:!0,deps:[ge,Ye,qn,...e]}])}var I7=dt(rp,!0);var Dk=new Map,bk={activated:!1,tokenObservers:[]},Ck={initialized:!1,enabled:!1};function Rt(t){return Dk.get(t)||Object.assign({},bk)}function dT(){return Ck}var Ak="https://content-firebaseappcheck.googleapis.com/v1";var Sk="exchangeDebugToken",cT={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},R7=1440*60*1e3;var ap=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return I(this,null,function*(){this.stop();try{this.pending=new xr,this.pending.promise.catch(n=>{}),yield Nk(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new xr,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Nk(t){return new Promise(e=>{setTimeout(e,t)})}var Rk={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},zn=new St("appCheck","AppCheck",Rk);function fT(t){if(!Rt(t).activated)throw zn.create("use-before-activation",{appName:t.name})}function hT(r,i){return I(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(y){throw zn.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw zn.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw zn.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw zn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function pT(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Ak}/projects/${n}/apps/${r}:${Sk}?key=${i}`,body:{debug_token:e}}}var Pk="firebase-app-check-database",Mk=1,cp="firebase-app-check-store";var cu=null;function kk(){return cu||(cu=new Promise((t,e)=>{try{let n=indexedDB.open(Pk,Mk);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(zn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(cp,{keyPath:"compositeKey"})}}}catch(n){e(zn.create("storage-open",{originalErrorMessage:n?.message}))}}),cu)}function xk(t,e){return Ok(Fk(t),e)}function Ok(t,e){return I(this,null,function*(){let r=(yield kk()).transaction(cp,"readwrite"),o=r.objectStore(cp).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(zn.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Fk(t){return`${t.options.appId}-${t.name}`}var Ns=new jt("@firebase/app-check");function op(t,e){return Ds()?xk(t,e).catch(n=>{Ns.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function gT(){return dT().enabled}function mT(){return I(this,null,function*(){let t=dT();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Lk={error:"UNKNOWN_ERROR"};function Vk(t){return Xc.encodeString(JSON.stringify(t),!1)}function up(t,e=!1,n=!1){return I(this,null,function*(){let r=t.app;fT(r);let i=Rt(r),o=i.token,s;if(o&&!Rs(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Rs(l)?o=l:yield op(r,void 0))}if(!e&&o&&Rs(o))return{token:o.token};let c=!1;if(gT())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=hT(pT(r,yield mT()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield op(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ns.warn(l.message):n&&Ns.error(l),sp(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield Rt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ns.warn(l.message):n&&Ns.error(l),s=l}let u;return o?s?Rs(o)?u={token:o.token,internalError:s}:u=sp(s):(u={token:o.token},i.token=o,yield op(r,o)):u=sp(s),c&&$k(r,u),u})}function jk(t){return I(this,null,function*(){let e=t.app;fT(e);let{provider:n}=Rt(e);if(gT()){let r=yield mT(),{token:i}=yield hT(pT(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function Bk(t,e,n,r){let{app:i}=t,o=Rt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Rs(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),uT(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uT(t))}function yT(t,e){let n=Rt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function uT(t){let{app:e}=t,n=Rt(e),r=n.tokenRefresher;r||(r=Uk(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Uk(t){let{app:e}=t;return new ap(()=>I(null,null,function*(){let n=Rt(e),r;if(n.token?r=yield up(t,!0):r=yield up(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Rt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cT.RETRIAL_MIN_WAIT,cT.RETRIAL_MAX_WAIT)}function $k(t,e){let n=Rt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Rs(t){return t.expireTimeMillis-Date.now()>0}function sp(t){return{token:Vk(Lk),error:t}}var lp=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Rt(this.app);for(let n of e)yT(this.app,n.next);return Promise.resolve()}};function Hk(t,e){return new lp(t,e)}function qk(t){return{getToken:e=>up(t,e),getLimitedUseToken:()=>jk(t),addTokenListener:e=>Bk(t,"INTERNAL",e),removeTokenListener:e=>yT(t.app,e)}}var zk="@firebase/app-check",Gk="0.10.1";var Wk="app-check",lT="app-check-internal";function Kk(){Nt(new Je(Wk,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Hk(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(lT).initialize()})),Nt(new Je(lT,t=>{let e=t.getProvider("app-check").getImmediate();return qk(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_e(zk,Gk)}Kk();var Qk="app-check";var ki=class{constructor(){return Mi(Qk)}};var Yk=["localhost","0.0.0.0","127.0.0.1"],H7=typeof window<"u"&&Yk.includes(window.location.hostname);function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kT=MT,xT=new St("auth","Firebase",MT());var pu=new jt("@firebase/auth");function Zk(t,...e){pu.logLevel<=J.WARN&&pu.warn(`Auth (${$n}): ${t}`,...e)}function lu(t,...e){pu.logLevel<=J.ERROR&&pu.error(`Auth (${$n}): ${t}`,...e)}function Kn(t,...e){throw Rp(t,...e)}function Br(t,...e){return Rp(t,...e)}function OT(t,e,n){let r=Object.assign(Object.assign({},kT()),{[e]:n});return new St("auth","Firebase",r).create(e,{appName:t.name})}function jr(t){return OT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xT.create(t,...e)}function U(t,e,...n){if(!t)throw Rp(e,...n)}function un(t){let e="INTERNAL ASSERTION FAILED: "+t;throw lu(e),new Error(e)}function Qn(t,e){t||un(e)}function pp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Jk(){return vT()==="http:"||vT()==="https:"}function vT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Xk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jk()||Vw()||"connection"in navigator)?navigator.onLine:!0}function ex(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ur=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=Fw()||jw()}get(){return Xk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Pp(t,e){Qn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var gu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rx=new Ur(3e4,6e4);function Mp(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function xi(o,s,c,u){return I(this,arguments,function*(t,e,n,r,i={}){return FT(t,i,()=>I(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=bs(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return Lw()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Bn(t.emulatorConfig.host)&&(y.credentials="include"),gu.fetch()(yield LT(t,t.config.apiHost,n,p),y)}))})}function FT(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},tx),e);try{let i=new gp(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw uu(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uu(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw uu(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw uu(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw OT(t,h,l);Kn(t,h)}}catch(i){if(i instanceof lt)throw i;Kn(t,"network-request-failed",{message:String(i)})}})}function ix(o,s,c,u){return I(this,arguments,function*(t,e,n,r,i={}){let l=yield xi(t,e,n,r,i);return"mfaPendingCredential"in l&&Kn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function LT(t,e,n,r){return I(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Pp(t.config,i):`${t.config.apiScheme}://${i}`;return nx.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var gp=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),rx.get())})}};function uu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Br(t,e,r);return i.customData._tokenResponse=n,i}function ox(t,e){return I(this,null,function*(){return xi(t,"POST","/v1/accounts:delete",e)})}function mu(t,e){return I(this,null,function*(){return xi(t,"POST","/v1/accounts:lookup",e)})}function Ps(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function kp(t,e=!1){return I(this,null,function*(){let n=ke(t),r=yield n.getIdToken(e),i=xp(r);U(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ps(dp(i.auth_time)),issuedAtTime:Ps(dp(i.iat)),expirationTime:Ps(dp(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function dp(t){return Number(t)*1e3}function xp(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lu("JWT malformed, contained fewer than 3 sections"),null;try{let i=eu(n);return i?JSON.parse(i):(lu("Failed to decode base64 JWT payload"),null)}catch(i){return lu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _T(t){let e=xp(t);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ks(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof lt&&sx(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function sx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var mp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xs=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ps(this.lastLoginAt),this.creationTime=Ps(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yu(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ks(t,mu(n,{idToken:r}));U(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VT(o.providerUserInfo):[],c=ax(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new xs(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Op(t){return I(this,null,function*(){let e=ke(t);yield yu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ax(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VT(t){return t.map(e=>{var{providerId:n}=e,r=md(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function cx(t,e){return I(this,null,function*(){let n=yield FT(t,{},()=>I(null,null,function*(){let r=bs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield LT(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Bn(t.emulatorConfig.host)&&(u.credentials="include"),gu.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function ux(t,e){return I(this,null,function*(){return xi(t,"POST","/v2/accounts:revokeToken",Mp(t,e))})}var Ms=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_T(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){U(e.length!==0,"internal-error");let n=_T(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield cx(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(U(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(U(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return un("not implemented")}};function Gn(t,e){U(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Wn=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=md(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xs(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield ks(this,this.stsTokenManager.getToken(this.auth,e));return U(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return kp(this,e)}reload(){return Op(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield yu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(vt(this.auth.app))return Promise.reject(jr(this.auth));let e=yield this.getIdToken();return yield ks(this,ox(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:ue,isAnonymous:We,providerData:ce,stsTokenManager:T}=n;U(K&&T,e,"internal-error");let v=Ms.fromJSON(this.name,T);U(typeof K=="string",e,"internal-error"),Gn(p,e.name),Gn(m,e.name),U(typeof ue=="boolean",e,"internal-error"),U(typeof We=="boolean",e,"internal-error"),Gn(y,e.name),Gn(S,e.name),Gn(P,e.name),Gn(N,e.name),Gn(x,e.name),Gn(j,e.name);let E=new t({uid:K,auth:e,email:m,emailVerified:ue,displayName:p,isAnonymous:We,photoURL:S,phoneNumber:y,tenantId:P,stsTokenManager:v,createdAt:x,lastLoginAt:j});return ce&&Array.isArray(ce)&&(E.providerData=ce.map(w=>Object.assign({},w))),N&&(E._redirectEventId=N),E}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new Ms;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yu(o),o})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];U(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Ms;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var ET=new Map;function ln(t){Qn(t instanceof Function,"Expected a class definition");let e=ET.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ET.set(t,e),e)}var lx=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),yp=lx;function du(t,e,n){return`firebase:${t}:${e}:${n}`}var vu=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=du(this.userKey,i.apiKey,o),this.fullPersistenceKey=du("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield mu(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(ln(yp),e,r);let i=(yield Promise.all(n.map(l=>I(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ln(yp),s=du(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield mu(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Wn._fromGetAccountInfoResponse(e,m,h)}else p=Wn._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>I(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function IT(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qT(e))return"Blackberry";if(zT(e))return"Webos";if(BT(e))return"Safari";if((e.includes("chrome/")||UT(e))&&!e.includes("edge/"))return"Chrome";if(HT(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function jT(t=Me()){return/firefox\//i.test(t)}function BT(t=Me()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UT(t=Me()){return/crios\//i.test(t)}function $T(t=Me()){return/iemobile/i.test(t)}function HT(t=Me()){return/android/i.test(t)}function qT(t=Me()){return/blackberry/i.test(t)}function zT(t=Me()){return/webos/i.test(t)}function Fp(t=Me()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dx(t=Me()){var e;return Fp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fx(){return Bw()&&document.documentMode===10}function GT(t=Me()){return Fp(t)||HT(t)||zT(t)||qT(t)||/windows phone/i.test(t)||$T(t)}function WT(t,e=[]){let n;switch(t){case"Browser":n=IT(Me());break;case"Worker":n=`${IT(Me())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$n}/${r}`}var vp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function hx(n){return I(this,arguments,function*(t,e={}){return xi(t,"GET","/v2/passwordPolicy",Mp(t,e))})}var px=6,_p=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:px,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ep=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _u(this),this.idTokenSubscription=new _u(this),this.beforeStateQueue=new vp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ln(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield vu.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield mu(this,{idToken:e}),r=yield Wn._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(vt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield yu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ex()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(vt(this.app))return Promise.reject(jr(this));let n=e?ke(e):null;return n&&U(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return vt(this.app)?Promise.reject(jr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return vt(this.app)?Promise.reject(jr(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(ln(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield hx(this),n=new _p(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new St("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield ux(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ln(e)||this._popupRedirectResolver;U(n,this,"argument-error"),this.redirectPersistenceManager=yield vu.create(this,[ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;if(vt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Zk(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Lp(t){return ke(t)}var _u=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qw(n=>this.observer=n)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Vp={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gx(t){Vp=t}function mx(t){return Vp.loadJS(t)}function yx(){return Vp.gapiScript}function KT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function jp(t,e){let n=Ri(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Vt(o,e??{}))return i;Kn(i,"already-initialized")}return n.initialize({options:e})}function vx(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Bp(t,e,n){let r=Lp(t);U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=QT(e),{host:s,port:c}=_x(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){U(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),U(Vt(l,r.config.emulator)&&Vt(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Bn(s)?(nu(`${o}//${s}${u}`),ru("Auth",!0)):i||Ex()}function QT(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _x(t){let e=QT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:wT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:wT(s)}}}function wT(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Ex(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Eu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return un("not implemented")}_getIdTokenResponse(e){return un("not implemented")}_linkToIdToken(e,n){return un("not implemented")}_getReauthenticationResolver(e){return un("not implemented")}};function fp(t,e){return I(this,null,function*(){return ix(t,"POST","/v1/accounts:signInWithIdp",Mp(t,e))})}var Iu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ip=class extends Iu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Os=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let o=yield Wn._fromIdTokenResponse(e,r,i),s=TT(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=TT(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function TT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var wp=class t extends lt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function YT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wp._fromErrorAndOperation(t,o,e,r):o})}function Ix(t,e,n=!1){return I(this,null,function*(){let r=yield ks(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Os._forOperation(t,"link",r)})}function wx(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(vt(r.app))return Promise.reject(jr(r));let i="reauthenticate";try{let o=yield ks(t,YT(r,i,e,t),n);U(o.idToken,r,"internal-error");let s=xp(o.idToken);U(s,r,"internal-error");let{sub:c}=s;return U(t.uid===c,r,"user-mismatch"),Os._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Kn(r,"user-mismatch"),o}})}function Tx(t,e,n=!1){return I(this,null,function*(){if(vt(t.app))return Promise.reject(jr(t));let r="signIn",i=yield YT(t,r,e),o=yield Os._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Up(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function $p(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}var wu="__sak";var Tu=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wu,"1"),this.storage.removeItem(wu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Dx=1e3,bx=10,Cx=(()=>{class t extends Tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);fx()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,bx):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Dx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield wn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield wn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield wn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),ZT=Cx;var Ax=(()=>{class t extends Tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Hp=Ax;function Sx(t){return Promise.all(t.map(e=>I(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Nx=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>I(this,null,function*(){return h(r.origin,s)})),l=yield Sx(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function JT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Tp=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=JT("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ut(){return window}function Rx(t){Ut().location.href=t}function XT(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}function Px(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Mx(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kx(){return XT()?self:null}var eD="firebaseLocalStorageDb",xx=1,Du="firebaseLocalStorage",tD="fbase_key",$r=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Cu(t,e){return t.transaction([Du],e?"readwrite":"readonly").objectStore(Du)}function Ox(){let t=indexedDB.deleteDatabase(eD);return new $r(t).toPromise()}function Dp(){let t=indexedDB.open(eD,xx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Du,{keyPath:tD})}catch(i){n(i)}}),t.addEventListener("success",()=>I(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Du)?e(r):(r.close(),yield Ox(),e(yield Dp()))}))})}function DT(t,e,n){return I(this,null,function*(){let r=Cu(t,!0).put({[tD]:e,value:n});return new $r(r).toPromise()})}function Fx(t,e){return I(this,null,function*(){let n=Cu(t,!1).get(e),r=yield new $r(n).toPromise();return r===void 0?null:r.value})}function bT(t,e){let n=Cu(t,!0).delete(e);return new $r(n).toPromise()}var Lx=800,Vx=3,jx=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield Dp(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Vx)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return XT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=Nx._getInstance(kx()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Px(),!this.activeServiceWorker)return;this.sender=new Tp(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Mx()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Dp();return yield DT(n,wu,"1"),yield bT(n,wu),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>DT(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>Fx(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>bT(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(o=>{let s=Cu(o,!1).getAll();return new $r(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),Lx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),nD=jx;var X7=KT("rcb"),eK=new Ur(3e4,6e4);function Bx(t,e){return e?ln(e):(U(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Fs=class extends Eu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fp(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Ux(t){return Tx(t.auth,new Fs(t),t.bypassAuthState)}function $x(t){let{auth:e,user:n}=t;return U(n,e,"internal-error"),wx(n,new Fs(t),t.bypassAuthState)}function Hx(t){return I(this,null,function*(){let{auth:e,user:n}=t;return U(n,e,"internal-error"),Ix(n,new Fs(t),t.bypassAuthState)})}var bp=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ux;case"linkViaPopup":case"linkViaRedirect":return Hx;case"reauthViaPopup":case"reauthViaRedirect":return $x;default:Kn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var tK=new Ur(2e3,1e4);var qx="pendingRedirect",fu=new Map,Cp=class t extends bp{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=fu.get(this.auth._key());if(!e){try{let r=(yield zx(this.resolver,this.auth))?yield wn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return wn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,wn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function zx(t,e){return I(this,null,function*(){let n=Kx(e),r=Wx(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Gx(t,e){fu.set(t._key(),e)}function Wx(t){return ln(t._redirectPersistence)}function Kx(t){return du(qx,t.config.apiKey,t.name)}function Qx(t,e,n=!1){return I(this,null,function*(){if(vt(t.app))return Promise.reject(jr(t));let r=Lp(t),i=Bx(r,e),s=yield new Cp(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Yx=600*1e3,Ap=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rD(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yx&&this.cachedEventUids.clear(),this.cachedEventUids.has(CT(e))}saveEventToCache(e){this.cachedEventUids.add(CT(e)),this.lastProcessedEventTime=Date.now()}};function CT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rD({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Zx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rD(t);default:return!1}}function Jx(n){return I(this,arguments,function*(t,e={}){return xi(t,"GET","/v1/projects",e)})}var Xx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eO=/^https?/;function tO(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Jx(t);for(let n of e)try{if(nO(n))return}catch{}Kn(t,"unauthorized-domain")})}function nO(t){let e=pp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!eO.test(n))return!1;if(Xx.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var rO=new Ur(3e4,6e4);function AT(){let t=Ut().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iO(t){return new Promise((e,n)=>{var r,i,o;function s(){AT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AT(),n(Br(t,"network-request-failed"))},timeout:rO.get()})}if(!((i=(r=Ut().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ut().gapi)===null||o===void 0)&&o.load)s();else{let c=KT("iframefcb");return Ut()[c]=()=>{gapi.load?s():n(Br(t,"network-request-failed"))},mx(`${yx()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw hu=null,e})}var hu=null;function oO(t){return hu=hu||iO(t),hu}var sO=new Ur(5e3,15e3),aO="__/auth/iframe",cO="emulator/auth/iframe",uO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dO(t){let e=t.config;U(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Pp(e,cO):`https://${t.config.authDomain}/${aO}`,r={apiKey:e.apiKey,appName:t.name,v:$n},i=lO.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${bs(r).slice(1)}`}function fO(t){return I(this,null,function*(){let e=yield oO(t),n=Ut().gapi;return U(n,t,"internal-error"),e.open({where:document.body,url:dO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uO,dontclear:!0},r=>new Promise((i,o)=>I(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Br(t,"network-request-failed"),c=Ut().setTimeout(()=>{o(s)},sO.get());function u(){Ut().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var hO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pO=500,gO=600,mO="_blank",yO="http://localhost",bu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vO(t,e,n,r=pO,i=gO){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},hO),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Me().toLowerCase();n&&(c=UT(l)?mO:n),jT(l)&&(e=e||yO,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(dx(l)&&c!=="_self")return _O(e||"",c),new bu(null);let p=window.open(e||"",c,h);U(p,t,"popup-blocked");try{p.focus()}catch{}return new bu(p)}function _O(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var EO="__/auth/handler",IO="emulator/auth/handler",wO=encodeURIComponent("fac");function ST(t,e,n,r,i,o){return I(this,null,function*(){U(t.config.authDomain,t,"auth-domain-config-required"),U(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$n,eventId:i};if(e instanceof Iu){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Hw(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Ip){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${wO}=${encodeURIComponent(u)}`:"";return`${TO(t)}?${bs(c).slice(1)}${l}`})}function TO({config:t}){return t.emulator?Pp(t,IO):`https://${t.authDomain}/${EO}`}var hp="webStorageSupport",Sp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hp,this._completeRedirectFn=Qx,this._overrideRedirectResult=Gx}_openPopup(e,n,r,i){return I(this,null,function*(){var o;Qn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield ST(e,n,r,pp(),i);return vO(e,s,JT())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield ST(e,n,r,pp(),i);return Rx(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Qn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield fO(e),r=new Ap(e);return n.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hp,{type:hp},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[hp];s!==void 0&&n(!!s),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GT()||BT()||Fp()}},iD=Sp;var NT="@firebase/auth",RT="1.10.8";var Np=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bO(t){Nt(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;U(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WT(t)},l=new Ep(r,i,o,u);return vx(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Nt(new Je("auth-internal",e=>{let n=Lp(e.getProvider("auth").getImmediate());return(r=>new Np(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_e(NT,RT,DO(t)),_e(NT,RT,"esm2017")}var CO=300,AO=$h("authIdTokenMaxAge")||CO,PT=null,SO=t=>e=>I(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AO)return;let i=n?.token;PT!==i&&(PT=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function qp(t=Fr()){let e=Ri(t,"auth");if(e.isInitialized())return e.getImmediate();let n=jp(t,{popupRedirectResolver:iD,persistence:[nD,ZT,Hp]}),r=$h("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=SO(o.toString());$p(n,s,()=>s(n.currentUser)),Up(n,c=>s(c))}}let i=Bh("auth");return i&&Bp(n,`http://${i}`),n}function NO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gx({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Br("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",NO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bO("Browser");var oD="auth",Ls=class{constructor(e){return e}},Vs=class{constructor(){return Mi(oD)}};var zp=new Y("angularfire2.auth-instances");function w1(t,e){let n=Ss(oD,t,e);return n&&new Ls(n)}function T1(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ls(r)}}var D1={provide:Vs,deps:[[new ut,zp]]},b1={provide:Ls,useFactory:w1,deps:[[new ut,zp],cn]};function qK(t,...e){return _e("angularfire",Hn.full,"auth"),tn([b1,D1,{provide:zp,useFactory:T1(t),multi:!0,deps:[ge,Ye,qn,Vr,[new ut,ki],...e]}])}var zK=dt(qp,!0);var sD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aD={};var dn,Gp;(function(){var t;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(w,D,C){for(var _=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)_[Qt-2]=arguments[Qt];return v.prototype[D].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)w[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],D=T.g[2];var C=T.g[3],_=v+(C^E&(D^C))+w[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[2]+606105819&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+w[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[6]+2821735955&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+w[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[10]+4294925233&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+w[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[14]+2792965006&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^C&(E^D))+w[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[11]+643717713&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+w[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[15]+3634488961&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+w[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[3]+4107603335&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+w[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[7]+1735328473&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^C)+w[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[11]+1839030562&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+w[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[7]+4139469664&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+w[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[3]+3572445317&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+w[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[15]+530742520&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~C))+w[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[14]+2878612391&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+w[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[10]+4293915773&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+w[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[6]+2734768916&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+w[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[2]+718787259&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,w=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=E;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,w),D=0;break}}else for(;C<v;)if(w[D++]=T[C++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)T[E++]=this.g[v]>>>w&255;return T};function o(T,v){var E=c;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function s(T,v){this.h=v;for(var E=[],w=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;w&&C==v||(E[D]=C,w=!1)}this.g=E}var c={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return N(l(-T));for(var v=[],E=1,w=0;T>=E;w++)v[w]=T/E|0,E*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return N(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),_=parseInt(T.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(_))):(w=w.j(E),w=w.add(l(_)))}return w}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-N(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(P(this))return"-"+N(this).toString(T);for(var v=l(Math.pow(T,6)),E=this,w="";;){var D=ue(E,v).g;E=x(E,D.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=D,S(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=x(this,T),P(T)?-1:S(T)?0:1};function N(T){for(var v=T.g.length,E=[],w=0;w<v;w++)E[w]=~T.g[w];return new s(E,~T.h).add(m)}t.abs=function(){return P(this)?N(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0,D=0;D<=v;D++){var C=w+(this.i(D)&65535)+(T.i(D)&65535),_=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);w=_>>>16,C&=65535,_&=65535,E[D]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(N(v))}t.j=function(T){if(S(this)||S(T))return p;if(P(this))return P(T)?N(this).j(N(T)):N(N(this).j(T));if(P(T))return N(this.j(N(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<T.g.length;D++){var C=this.i(w)>>>16,_=this.i(w)&65535,Qt=T.i(D)>>>16,ho=T.i(D)&65535;E[2*w+2*D]+=_*ho,j(E,2*w+2*D),E[2*w+2*D+1]+=C*ho,j(E,2*w+2*D+1),E[2*w+2*D+1]+=_*Qt,j(E,2*w+2*D+1),E[2*w+2*D+2]+=C*Qt,j(E,2*w+2*D+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function j(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function K(T,v){this.g=T,this.h=v}function ue(T,v){if(S(v))throw Error("division by zero");if(S(T))return new K(p,p);if(P(T))return v=ue(N(T),v),new K(N(v.g),N(v.h));if(P(v))return v=ue(T,N(v)),new K(N(v.g),v.h);if(30<T.g.length){if(P(T)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,w=v;0>=w.l(T);)E=We(E),w=We(w);var D=ce(E,1),C=ce(w,1);for(w=ce(w,2),E=ce(E,2);!S(w);){var _=C.add(w);0>=_.l(T)&&(D=D.add(E),C=_),w=ce(w,1),E=ce(E,1)}return v=x(T,D.j(v)),new K(D,v)}for(D=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(E),_=C.j(v);P(_)||0<_.l(T);)E-=w,C=l(E),_=C.j(v);S(C)&&(C=m),D=D.add(C),T=x(T,_)}return new K(D,T)}t.A=function(T){return ue(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&T.i(w);return new s(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|T.i(w);return new s(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^T.i(w);return new s(E,this.h^T.h)};function We(T){for(var v=T.g.length+1,E=[],w=0;w<v;w++)E[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(E,T.h)}function ce(T,v){var E=v>>5;v%=32;for(var w=T.g.length-E,D=[],C=0;C<w;C++)D[C]=0<v?T.i(C+E)>>>v|T.i(C+E+1)<<32-v:T.i(C+E);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gp=aD.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,dn=aD.Integer=s}).apply(typeof sD<"u"?sD:typeof self<"u"?self:typeof window<"u"?window:{});var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={};var Wp,C1,Oi,Kp,js,Su,Qp,Yp,Zp;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in f))break e;f=f[b]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,b={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function S(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,b,A){for(var k=Array(arguments.length-2),le=2;le<arguments.length;le++)k[le-2]=arguments[le];return d.prototype[b].apply(g,k)}}function P(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function N(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=a.length||0,A=g.length||0;a.length=b+A;for(let k=0;k<A;k++)a[b+k]=g[k]}else a.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(a){return/^[\s\xa0]*$/.test(a)}function K(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ue(a){return ue[" "](a),a}ue[" "]=function(){};var We=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ce(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)a[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function D(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=Il;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Qt{constructor(){this.h=this.g=null}add(d,f){let g=ho.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ho=new x(()=>new PC,a=>a.reset());class PC{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let po,go=!1,Il=new Qt,gy=()=>{let a=c.Promise.resolve(void 0);po=()=>{a.then(MC)}};var MC=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){C(f)}var d=ho;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}go=!1};function vn(){this.s=this.s,this.C=this.C}vn.prototype.s=!1,vn.prototype.ma=function(){this.s||(this.s=!0,this.N())},vn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var kC=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a})();function mo(a,d){if(Ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(We){e:{try{ue(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:xC[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&mo.aa.h.call(this)}}S(mo,Ve);var xC={2:"touch",3:"pen",4:"mouse"};mo.prototype.h=function(){mo.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var yo="closure_listenable_"+(1e6*Math.random()|0),OC=0;function FC(a,d,f,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++OC,this.da=this.fa=!1}function oa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function sa(a){this.src=a,this.g={},this.h=0}sa.prototype.add=function(a,d,f,g,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var k=Tl(a,d,g,b);return-1<k?(d=a[k],f||(d.fa=!1)):(d=new FC(d,this.src,A,!!g,b),d.fa=f,a.push(d)),d};function wl(a,d){var f=d.type;if(f in a.g){var g=a.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(oa(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Tl(a,d,f,g){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Dl="closure_lm_"+(1e6*Math.random()|0),bl={};function my(a,d,f,g,b){if(g&&g.once)return vy(a,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)my(a,d[A],f,g,b);return null}return f=Nl(f),a&&a[yo]?a.K(d,f,l(g)?!!g.capture:!!g,b):yy(a,d,f,!1,g,b)}function yy(a,d,f,g,b,A){if(!d)throw Error("Invalid event type");var k=l(b)?!!b.capture:!!b,le=Al(a);if(le||(a[Dl]=le=new sa(a)),f=le.add(d,f,g,k,A),f.proxy)return f;if(g=LC(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)kC||(b=k),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(Ey(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function LC(){function a(f){return d.call(a.src,a.listener,f)}let d=VC;return a}function vy(a,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)vy(a,d[A],f,g,b);return null}return f=Nl(f),a&&a[yo]?a.L(d,f,l(g)?!!g.capture:!!g,b):yy(a,d,f,!0,g,b)}function _y(a,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)_y(a,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Nl(f),a&&a[yo]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Tl(A,f,g,b),-1<f&&(oa(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=Al(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Tl(d,f,g,b)),(f=-1<a?d[a]:null)&&Cl(f))}function Cl(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[yo])wl(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(Ey(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Al(d))?(wl(f,a),f.h==0&&(f.src=null,d[Dl]=null)):oa(a)}}}function Ey(a){return a in bl?bl[a]:bl[a]="on"+a}function VC(a,d){if(a.da)a=!0;else{d=new mo(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Cl(a),a=f.call(g,d)}return a}function Al(a){return a=a[Dl],a instanceof sa?a:null}var Sl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nl(a){return typeof a=="function"?a:(a[Sl]||(a[Sl]=function(d){return a.handleEvent(d)}),a[Sl])}function je(){vn.call(this),this.i=new sa(this),this.M=this,this.F=null}S(je,vn),je.prototype[yo]=!0,je.prototype.removeEventListener=function(a,d,f,g){_y(this,a,d,f,g)};function Ke(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ve(d,a);else if(d instanceof Ve)d.target=d.target||a;else{var b=d;d=new Ve(g,a),w(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];b=aa(k,g,!0,d)&&b}if(k=d.g=a,b=aa(k,g,!0,d)&&b,b=aa(k,g,!1,d)&&b,f)for(A=0;A<f.length;A++)k=d.g=f[A],b=aa(k,g,!1,d)&&b}je.prototype.N=function(){if(je.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)oa(f[g]);delete a.g[d],a.h--}}this.F=null},je.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},je.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function aa(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var le=k.listener,Fe=k.ha||k.src;k.fa&&wl(a.i,k),b=le.call(Fe,g)!==!1&&b}}return b&&!g.defaultPrevented}function Iy(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function wy(a){a.g=Iy(()=>{a.g=null,a.i&&(a.i=!1,wy(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class jC extends vn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:wy(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vo(a){vn.call(this),this.h=a,this.g={}}S(vo,vn);var Ty=[];function Dy(a){ce(a.g,function(d,f){this.g.hasOwnProperty(f)&&Cl(d)},a),a.g={}}vo.prototype.N=function(){vo.aa.N.call(this),Dy(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rl=c.JSON.stringify,BC=c.JSON.parse,UC=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Pl(){}Pl.prototype.h=null;function by(a){return a.h||(a.h=a.i())}function Cy(){}var _o={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ml(){Ve.call(this,"d")}S(Ml,Ve);function kl(){Ve.call(this,"c")}S(kl,Ve);var or={},Ay=null;function ca(){return Ay=Ay||new je}or.La="serverreachability";function Sy(a){Ve.call(this,or.La,a)}S(Sy,Ve);function Eo(a){let d=ca();Ke(d,new Sy(d))}or.STAT_EVENT="statevent";function Ny(a,d){Ve.call(this,or.STAT_EVENT,a),this.stat=d}S(Ny,Ve);function Qe(a){let d=ca();Ke(d,new Ny(d,a))}or.Ma="timingevent";function Ry(a,d){Ve.call(this,or.Ma,a),this.size=d}S(Ry,Ve);function Io(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function $C(a,d,f,g,b,A){a.info(function(){if(a.g)if(A)for(var k="",le=A.split("&"),Fe=0;Fe<le.length;Fe++){var oe=le[Fe].split("=");if(1<oe.length){var Be=oe[0];oe=oe[1];var Ue=Be.split("_");k=2<=Ue.length&&Ue[1]=="type"?k+(Be+"="+oe+"&"):k+(Be+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+k})}function HC(a,d,f,g,b,A,k){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+k})}function Xr(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+zC(a,f)+(g?" "+g:"")})}function qC(a,d){a.info(function(){return"TIMEOUT: "+d})}wo.prototype.info=function(){};function zC(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<b.length;k++)b[k]=""}}}}return Rl(f)}catch{return d}}var ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Py={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xl;function la(){}S(la,Pl),la.prototype.g=function(){return new XMLHttpRequest},la.prototype.i=function(){return{}},xl=new la;function _n(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new vo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new My}function My(){this.i=null,this.g="",this.h=!1}var ky={},Ol={};function Fl(a,d,f){a.L=1,a.v=pa(Yt(d)),a.m=f,a.P=!0,xy(a,null)}function xy(a,d){a.F=Date.now(),da(a),a.A=Yt(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),Ky(f.i,"t",g),a.C=0,f=a.j.J,a.h=new My,a.g=fv(a.j,f?d:null,!a.m),0<a.O&&(a.M=new jC(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(Ty[0]=b.toString()),b=Ty);for(var A=0;A<b.length;A++){var k=my(f,b[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Eo(),$C(a.i,a.u,a.A,a.l,a.R,a.m)}_n.prototype.ca=function(a){a=a.target;let d=this.M;d&&Zt(a)==3?d.j():this.Y(a)},_n.prototype.Y=function(a){try{if(a==this.g)e:{let Ue=Zt(this.g);var d=this.g.Ba();let ni=this.g.Z();if(!(3>Ue)&&(Ue!=3||this.g&&(this.h.h||this.g.oa()||tv(this.g)))){this.J||Ue!=4||d==7||(d==8||0>=ni?Eo(3):Eo(2)),Ll(this);var f=this.g.Z();this.X=f;t:if(Oy(this)){var g=tv(this.g);a="";var b=g.length,A=Zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),To(this);var k="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,HC(this.i,this.u,this.A,this.l,this.R,Ue,f),this.o){if(this.T&&!this.K){t:{if(this.g){var le,Fe=this.g;if((le=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(le)){var oe=le;break t}}oe=null}if(f=oe)Xr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vl(this,f);else{this.o=!1,this.s=3,Qe(12),sr(this),To(this);break e}}if(this.P){f=!0;let It;for(;!this.J&&this.C<k.length;)if(It=GC(this,k),It==Ol){Ue==4&&(this.s=4,Qe(14),f=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(It==ky){this.s=4,Qe(15),Xr(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Xr(this.i,this.l,It,null),Vl(this,It);if(Oy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||k.length!=0||this.h.h||(this.s=1,Qe(16),f=!1),this.o=this.o&&f,!f)Xr(this.i,this.l,k,"[Invalid Chunked Response]"),sr(this),To(this);else if(0<k.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),ql(Be),Be.M=!0,Qe(11))}}else Xr(this.i,this.l,k,null),Vl(this,k);Ue==4&&sr(this),this.o&&!this.J&&(Ue==4?cv(this.j,this):(this.o=!1,da(this)))}else uA(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,Qe(12)):(this.s=0,Qe(13)),sr(this),To(this)}}}catch{}finally{}};function Oy(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function GC(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Ol:(f=Number(d.substring(f,g)),isNaN(f)?ky:(g+=1,g+f>d.length?Ol:(d=d.slice(g,g+f),a.C=g+f,d)))}_n.prototype.cancel=function(){this.J=!0,sr(this)};function da(a){a.S=Date.now()+a.I,Fy(a,a.I)}function Fy(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Io(m(a.ba,a),d)}function Ll(a){a.B&&(c.clearTimeout(a.B),a.B=null)}_n.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(qC(this.i,this.A),this.L!=2&&(Eo(),Qe(17)),sr(this),this.s=2,To(this)):Fy(this,this.S-a)};function To(a){a.j.G==0||a.J||cv(a.j,a)}function sr(a){Ll(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Dy(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Vl(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||jl(f.h,a))){if(!a.K&&jl(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)_a(f),ya(f);else break e;Hl(f),Qe(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Io(m(f.Za,f),6e3));if(1>=jy(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else cr(f,11)}else if((a.K||f.g==a)&&_a(f),!j(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let oe=b[d];if(f.T=oe[0],oe=oe[1],f.G==2)if(oe[0]=="c"){f.K=oe[1],f.ia=oe[2];let Be=oe[3];Be!=null&&(f.la=Be,f.j.info("VER="+f.la));let Ue=oe[4];Ue!=null&&(f.Aa=Ue,f.j.info("SVER="+f.Aa));let ni=oe[5];ni!=null&&typeof ni=="number"&&0<ni&&(g=1.5*ni,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let It=a.g;if(It){let Ia=It.g?It.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var A=g.h;A.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Bl(A,A.h),A.h=null))}if(g.D){let zl=It.g?It.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(g.ya=zl,he(g.I,g.D,zl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=a;if(g.qa=dv(g,g.J?g.ia:null,g.W),k.K){By(g.h,k);var le=k,Fe=g.L;Fe&&(le.I=Fe),le.B&&(Ll(le),da(le)),g.g=k}else sv(g);0<f.i.length&&va(f)}else oe[0]!="stop"&&oe[0]!="close"||cr(f,7);else f.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?cr(f,7):$l(f):oe[0]!="noop"&&f.l&&f.l.ta(oe),f.v=0)}}Eo(4)}catch{}}var WC=class{constructor(a,d){this.g=a,this.map=d}};function Ly(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jy(a){return a.h?1:a.g?a.g.size:0}function jl(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Bl(a,d){a.g?a.g.add(d):a.h=d}function By(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Ly.prototype.cancel=function(){if(this.i=Uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Uy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return P(a.i)}function KC(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function QC(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function $y(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=QC(a),g=KC(a),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],a)}var Hy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YC(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),b=null;if(0<=g){var A=a[f].substring(0,g);b=a[f].substring(g+1)}else A=a[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ar(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ar){this.h=a.h,fa(this,a.j),this.o=a.o,this.g=a.g,ha(this,a.s),this.l=a.l;var d=a.i,f=new Co;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),qy(this,f),this.m=a.m}else a&&(d=String(a).match(Hy))?(this.h=!1,fa(this,d[1]||"",!0),this.o=Do(d[2]||""),this.g=Do(d[3]||"",!0),ha(this,d[4]),this.l=Do(d[5]||"",!0),qy(this,d[6]||"",!0),this.m=Do(d[7]||"")):(this.h=!1,this.i=new Co(null,this.h))}ar.prototype.toString=function(){var a=[],d=this.j;d&&a.push(bo(d,zy,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(bo(d,zy,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(bo(f,f.charAt(0)=="/"?XC:JC,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",bo(f,tA)),a.join("")};function Yt(a){return new ar(a)}function fa(a,d,f){a.j=f?Do(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ha(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function qy(a,d,f){d instanceof Co?(a.i=d,nA(a.i,a.h)):(f||(d=bo(d,eA)),a.i=new Co(d,a.h))}function he(a,d,f){a.i.set(d,f)}function pa(a){return he(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Do(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,ZC),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var zy=/[#\/\?@]/g,JC=/[#\?:]/g,XC=/[#\?]/g,eA=/[#\?@]/g,tA=/#/g;function Co(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function En(a){a.g||(a.g=new Map,a.h=0,a.i&&YC(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Co.prototype,t.add=function(a,d){En(this),this.i=null,a=ei(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Gy(a,d){En(a),d=ei(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Wy(a,d){return En(a),d=ei(a,d),a.g.has(d)}t.forEach=function(a,d){En(this),this.g.forEach(function(f,g){f.forEach(function(b){a.call(d,b,g,this)},this)},this)},t.na=function(){En(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=a[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(a){En(this);let d=[];if(typeof a=="string")Wy(this,a)&&(d=d.concat(this.g.get(ei(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return En(this),this.i=null,a=ei(this,a),Wy(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Ky(a,d,f){Gy(a,d),0<f.length&&(a.i=null,a.g.set(ei(a,d),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var b=A;k[g]!==""&&(b+="="+encodeURIComponent(String(k[g]))),a.push(b)}}return this.i=a.join("&")};function ei(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function nA(a,d){d&&!a.j&&(En(a),a.i=null,a.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(Gy(this,g),Ky(this,b,f))},a)),a.j=d}function rA(a,d){let f=new wo;if(c.Image){let g=new Image;g.onload=y(In,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(In,f,"TestLoadImage: error",!1,d,g),g.onabort=y(In,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(In,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function iA(a,d){let f=new wo,g=new AbortController,b=setTimeout(()=>{g.abort(),In(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?In(f,"TestPingServer: ok",!0,d):In(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),In(f,"TestPingServer: error",!1,d)})}function In(a,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function oA(){this.g=new UC}function sA(a,d,f){let g=f||"";try{$y(a,function(b,A){let k=b;l(b)&&(k=Rl(b)),d.push(g+A+"="+encodeURIComponent(k))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Ao(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Ao,Pl),Ao.prototype.g=function(){return new ga(this.l,this.j)},Ao.prototype.i=(function(a){return function(){return a}})({});function ga(a,d){je.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ga,je),t=ga.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,No(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qy(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qy(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?So(this):No(this),this.readyState==3&&Qy(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,So(this))},t.Qa=function(a){this.g&&(this.response=a,So(this))},t.ga=function(){this.g&&So(this)};function So(a){a.readyState=4,a.l=null,a.j=null,a.v=null,No(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function No(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Yy(a){let d="";return ce(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Ul(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Yy(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):he(a,d,f))}function ve(a){je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ve,je);var aA=/^https?$/i,cA=["POST","PUT"];t=ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xl.g(),this.v=this.o?by(this.o):by(xl),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){Zy(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cA,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ev(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){Zy(this,A)}};function Zy(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Jy(a),ma(a)}function Jy(a){a.A||(a.A=!0,Ke(a,"complete"),Ke(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ke(this,"complete"),Ke(this,"abort"),ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ma(this,!0)),ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xy(this):this.bb())},t.bb=function(){Xy(this)};function Xy(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Zt(a)!=4||a.Z()!=2)){if(a.u&&Zt(a)==4)Iy(a.Ea,0,a);else if(Ke(a,"readystatechange"),Zt(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var b=String(a.D).match(Hy)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),g=!aA.test(b?b.toLowerCase():"")}f=g}if(f)Ke(a,"complete"),Ke(a,"success");else{a.m=6;try{var A=2<Zt(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",Jy(a)}}finally{ma(a)}}}}function ma(a,d){if(a.g){ev(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Ke(a,"ready");try{f.onreadystatechange=g}catch{}}}function ev(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Zt(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),BC(d)}};function tv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function uA(a){let d={};a=(a.g&&2<=Zt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(j(a[g]))continue;var f=D(a[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ro(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function nv(a){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ro("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ro("baseRetryDelayMs",5e3,a),this.cb=Ro("retryDelaySeedMs",1e4,a),this.Wa=Ro("forwardChannelMaxRetries",2,a),this.wa=Ro("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ly(a&&a.concurrentRequestLimit),this.Da=new oA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nv.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){Qe(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=dv(this,null,this.W),va(this)};function $l(a){if(rv(a),a.G==3){var d=a.U++,f=Yt(a.I);if(he(f,"SID",a.K),he(f,"RID",d),he(f,"TYPE","terminate"),Po(a,f),d=new _n(a,a.j,d),d.L=2,d.v=pa(Yt(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=fv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),da(d)}lv(a)}function ya(a){a.g&&(ql(a),a.g.cancel(),a.g=null)}function rv(a){ya(a),a.u&&(c.clearTimeout(a.u),a.u=null),_a(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function va(a){if(!Vy(a.h)&&!a.s){a.s=!0;var d=a.Ga;po||gy(),go||(po(),go=!0),Il.add(d,a),a.B=0}}function lA(a,d){return jy(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Io(m(a.Ga,a,d),uv(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new _n(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ov(this,b,d),f=Yt(this.I),he(f,"RID",a),he(f,"CVER",22),this.D&&he(f,"X-HTTP-Session-Id",this.D),Po(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Yy(A)))+"&"+d:this.m&&Ul(f,this.m,A)),Bl(this.h,b),this.Ua&&he(f,"TYPE","init"),this.P?(he(f,"$req",d),he(f,"SID","null"),b.T=!0,Fl(b,f,null)):Fl(b,f,d),this.G=2}}else this.G==3&&(a?iv(this,a):this.i.length==0||Vy(this.h)||iv(this))};function iv(a,d){var f;d?f=d.l:f=a.U++;let g=Yt(a.I);he(g,"SID",a.K),he(g,"RID",f),he(g,"AID",a.T),Po(a,g),a.m&&a.o&&Ul(g,a.m,a.o),f=new _n(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=ov(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bl(a.h,f),Fl(f,g,d)}function Po(a,d){a.H&&ce(a.H,function(f,g){he(d,g,f)}),a.l&&$y({},function(f,g){he(d,g,f)})}function ov(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=b[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let le=!0;for(let Fe=0;Fe<f;Fe++){let oe=b[Fe].g,Be=b[Fe].map;if(oe-=A,0>oe)A=Math.max(0,b[Fe].g-100),le=!1;else try{sA(Be,k,"req"+oe+"_")}catch{g&&g(Be)}}if(le){g=k.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function sv(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;po||gy(),go||(po(),go=!0),Il.add(d,a),a.v=0}}function Hl(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Io(m(a.Fa,a),uv(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,av(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Io(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qe(10),ya(this),av(this))};function ql(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function av(a){a.g=new _n(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Yt(a.qa);he(d,"RID","rpc"),he(d,"SID",a.K),he(d,"AID",a.T),he(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&he(d,"TO",a.ja),he(d,"TYPE","xmlhttp"),Po(a,d),a.m&&a.o&&Ul(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=pa(Yt(d)),f.m=null,f.P=!0,xy(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),Hl(this),Qe(19))};function _a(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function cv(a,d){var f=null;if(a.g==d){_a(a),ql(a),a.g=null;var g=2}else if(jl(a.h,d))f=d.D,By(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;g=ca(),Ke(g,new Ry(g,f)),va(a)}else sv(a);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&lA(a,d)||g==2&&Hl(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),b){case 1:cr(a,5);break;case 4:cr(a,10);break;case 3:cr(a,6);break;default:cr(a,2)}}}function uv(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function cr(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let b=!g;g=new ar(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fa(g,"https"),pa(g),b?rA(g.toString(),f):iA(g.toString(),f)}else Qe(2);a.G=0,a.l&&a.l.sa(d),lv(a),rv(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function lv(a){if(a.G=0,a.ka=[],a.l){let d=Uy(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function dv(a,d,f){var g=f instanceof ar?Yt(f):new ar(f);if(g.g!="")d&&(g.g=d+"."+g.g),ha(g,g.s);else{var b=c.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new ar(null);g&&fa(A,g),d&&(A.g=d),b&&ha(A,b),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&he(g,f,d),he(g,"VER",a.la),Po(a,g),g}function fv(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ve(new Ao({eb:f})):new ve(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hv(){}t=hv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ea(){}Ea.prototype.g=function(a,d){return new it(a,d)};function it(a,d){je.call(this),this.g=new nv(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!j(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ti(this)}S(it,je),it.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},it.prototype.close=function(){$l(this.g)},it.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Rl(a),a=f);d.i.push(new WC(d.Ya++,a)),d.G==3&&va(d)},it.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,it.aa.N.call(this)};function pv(a){Ml.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(pv,Ml);function gv(){kl.call(this),this.status=1}S(gv,kl);function ti(a){this.g=a}S(ti,hv),ti.prototype.ua=function(){Ke(this.g,"a")},ti.prototype.ta=function(a){Ke(this.g,new pv(a))},ti.prototype.sa=function(a){Ke(this.g,new gv)},ti.prototype.ra=function(){Ke(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,it.prototype.send=it.prototype.o,it.prototype.open=it.prototype.m,it.prototype.close=it.prototype.close,Zp=fn.createWebChannelTransport=function(){return new Ea},Yp=fn.getStatEventTarget=function(){return ca()},Qp=fn.Event=or,Su=fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ua.NO_ERROR=0,ua.TIMEOUT=8,ua.HTTP_ERROR=6,js=fn.ErrorCode=ua,Py.COMPLETE="complete",Kp=fn.EventType=Py,Cy.EventType=_o,_o.OPEN="a",_o.CLOSE="b",_o.ERROR="c",_o.MESSAGE="d",je.prototype.listen=je.prototype.K,Oi=fn.WebChannel=Cy,C1=fn.FetchXmlHttpFactory=Ao,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,Wp=fn.XhrIo=ve}).apply(typeof Au<"u"?Au:typeof self<"u"?self:typeof window<"u"?window:{});var cD="@firebase/firestore",uD="4.8.0";var xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xe.UNAUTHENTICATED=new xe(null),xe.GOOGLE_CREDENTIALS=new xe("google-credentials-uid"),xe.FIRST_PARTY=new xe("first-party-uid"),xe.MOCK_USER=new xe("mock-user");var co="11.10.0";var zr=new jt("@firebase/firestore");function Fi(){return zr.logLevel}function O(t,...e){if(zr.logLevel<=J.DEBUG){let n=e.map(Um);zr.debug(`Firestore (${co}): ${t}`,...n)}}function hn(t,...e){if(zr.logLevel<=J.ERROR){let n=e.map(Um);zr.error(`Firestore (${co}): ${t}`,...n)}}function er(t,...e){if(zr.logLevel<=J.WARN){let n=e.map(Um);zr.warn(`Firestore (${co}): ${t}`,...n)}}function Um(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ZD(t,r,n)}function ZD(t,e,n){let r=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hn(r),new Error(r)}function ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||ZD(e,i,r)}function $(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends lt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $t=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ou=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xe.UNAUTHENTICATED))}shutdown(){}},ig=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},og=class{constructor(e){this.t=e,this.currentUser=xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $t,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $t)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new Ou(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new xe(e)}},sg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ag=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sg(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fu=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cg=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fu(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fu(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function A1(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function JD(){return new TextEncoder}var zs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=A1(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function Q(t,e){return t<e?-1:t>e?1:0}function ug(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Q(r,i);{let o=JD(),s=S1(o.encode(lD(t,n)),o.encode(lD(e,n)));return s!==0?s:Q(r,i)}}n+=r>65535?2:1}return Q(t.length,e.length)}function lD(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function S1(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Q(t[n],e[n]);return Q(t.length,e.length)}function Gi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var dD="__name__",Lu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Q(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):ug(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dn.fromString(e.substring(4,e.length-2))}},ye=class t extends Lu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},N1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ht=class t extends Lu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return N1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dD}static keyField(){return new t([dD])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var V=class t{constructor(e){this.path=e}static fromPath(e){return new t(ye.fromString(e))}static fromName(e){return new t(ye.fromString(e).popFirst(5))}static empty(){return new t(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ye(e.slice()))}};function XD(t,e,n){if(!n)throw new F(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R1(t,e,n,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fD(t){if(!V.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hD(t){if(V.isDocumentKey(t))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $m(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function Wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$m(t);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ce(t,e){let n={typeString:t};return e&&(n.value=e),n}function ta(t,e){if(!eb(t))throw new F(R.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(R.INVALID_ARGUMENT,n);return!0}var pD=-62135596800,gD=1e6,Ae=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gD);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pD)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gD}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:Ce("string",Ae._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};var G=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ae(0,0))}static max(){return new t(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Gs=-1,lg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};lg.UNKNOWN_ID=-1;function P1(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Gr(i,V.empty(),e)}function M1(t){return new Gr(t.readTime,t.key,Gs)}var Gr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(G.min(),V.empty(),Gs)}static max(){return new t(G.max(),V.empty(),Gs)}};function k1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}var x1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function uo(t){return I(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==x1)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function O1(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(t){return t.name==="IndexedDbTransactionError"}var Hm=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),qm=-1;function hl(t){return t==null}function Ws(t){return t===0&&1/t==-1/0}function F1(t){return typeof t=="number"&&Number.isInteger(t)&&!Ws(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var tb="";function L1(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mD(e)),e=V1(t.get(n),e);return mD(e)}function V1(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case tb:n+="";break;default:n+=o}}return n}function mD(t){return t+tb+""}var j1="remoteDocuments",nb="owner";var rb="mutationQueues";var ib="mutations";var ob="documentMutations",B1="remoteDocumentsV14";var sb="remoteDocumentGlobal";var ab="targets";var cb="targetDocuments";var ub="targetGlobal",lb="collectionParents";var db="clientMetadata";var fb="bundles";var hb="namedQueries";var U1="indexConfiguration";var $1="indexState";var H1="indexEntries";var pb="documentOverlays";var q1="globals";var z1=[rb,ib,ob,j1,ab,nb,ub,cb,db,sb,lb,fb,hb],sQ=[...z1,pb],G1=[rb,ib,ob,B1,ab,nb,ub,cb,db,sb,lb,fb,hb,pb],W1=G1,K1=[...W1,U1,$1,H1];var aQ=[...K1,q1];function yD(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ir(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ee=class t{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bi(this.root,e,this.comparator,!0)}},Bi=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ht=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Oe=class t{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vu(this.data.getIterator())}getIteratorFrom(e){return new Vu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Vu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Et=class t{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new t([])}unionWith(e){let n=new Oe(ht.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ju=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ge=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ju("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var Q1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pn(t){if(ae(!!t,39018),typeof t=="string"){let e=0,n=Q1.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:me(t.seconds),nanos:me(t.nanos)}}function me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gn(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}var mb="server_timestamp",yb="__type__",vb="__previous_value__",_b="__local_write_time__";function zm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[yb])===null||n===void 0?void 0:n.stringValue)===mb}function pl(t){let e=t.mapValue.fields[vb];return zm(e)?pl(e):e}function Ks(t){let e=pn(t.mapValue.fields[_b].timestampValue);return new Ae(e.seconds,e.nanos)}var fg=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Bu="(default)",Uu=class t{constructor(e,n){this.projectId=e,this.database=n||Bu}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Bu}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Gm="__type__",Eb="__max__",Nu={mapValue:{fields:{__type__:{stringValue:Eb}}}},Wm="__vector__",Ki="value";function tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zm(t)?4:wb(t)?9007199254740991:Ib(t)?10:11:B(28295,{value:t})}function Gt(t,e){if(t===e)return!0;let n=tr(t);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ks(t).isEqual(Ks(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=pn(i.timestampValue),c=pn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return gn(i.bytesValue).isEqual(gn(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return me(i.geoPointValue.latitude)===me(o.geoPointValue.latitude)&&me(i.geoPointValue.longitude)===me(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return me(i.integerValue)===me(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=me(i.doubleValue),c=me(o.doubleValue);return s===c?Ws(s)===Ws(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],Gt);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(yD(s)!==yD(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Gt(s[u],c[u])))return!1;return!0})(t,e);default:return B(52216,{left:t})}}function Qs(t,e){return(t.values||[]).find(n=>Gt(n,e))!==void 0}function Qi(t,e){if(t===e)return 0;let n=tr(t),r=tr(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=me(o.integerValue||o.doubleValue),u=me(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return vD(t.timestampValue,e.timestampValue);case 4:return vD(Ks(t),Ks(e));case 5:return ug(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=gn(o),u=gn(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=Q(c[l],u[l]);if(h!==0)return h}return Q(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=Q(me(o.latitude),me(s.latitude));return c!==0?c:Q(me(o.longitude),me(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return _D(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[Ki])===null||c===void 0?void 0:c.arrayValue,S=(u=m[Ki])===null||u===void 0?void 0:u.arrayValue,P=Q(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:_D(y,S)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Nu.mapValue&&s===Nu.mapValue)return 0;if(o===Nu.mapValue)return 1;if(s===Nu.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ug(u[p],h[p]);if(m!==0)return m;let y=Qi(c[u[p]],l[h[p]]);if(y!==0)return y}return Q(u.length,h.length)})(t.mapValue,e.mapValue);default:throw B(23264,{le:n})}}function vD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);let n=pn(t),r=pn(e),i=Q(n.seconds,r.seconds);return i!==0?i:Q(n.nanos,r.nanos)}function _D(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Qi(n[i],r[i]);if(o)return o}return Q(n.length,r.length)}function Yi(t){return hg(t)}function hg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=pn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return gn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return V.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=hg(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${hg(n.fields[s])}`;return i+"}"})(t.mapValue):B(61005,{value:t})}function Mu(t){switch(tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=pl(t);return e?16+Mu(e):16;case 5:return 2*t.stringValue.length;case 6:return gn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Mu(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ir(r.fields,(o,s)=>{i+=o.length+Mu(s)}),i})(t.mapValue);default:throw B(13486,{value:t})}}function pg(t){return!!t&&"integerValue"in t}function Km(t){return!!t&&"arrayValue"in t}function ED(t){return!!t&&"nullValue"in t}function ID(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ku(t){return!!t&&"mapValue"in t}function Ib(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gm])===null||n===void 0?void 0:n.stringValue)===Wm}function Us(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Us(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Us(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Eb}var uQ={mapValue:{fields:{[Gm]:{stringValue:Wm},[Ki]:{arrayValue:{}}}}};var ft=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Us(n)}setAll(e){let n=ht.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Us(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ku(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ir(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Us(this.value))}};function Tb(t){let e=[];return ir(t.fields,(n,r)=>{let i=new ht([n]);if(ku(r)){let o=Tb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Et(e)}var Mt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,G.min(),G.min(),G.min(),ft.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,G.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,G.min(),G.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,G.min(),G.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zi=class{constructor(e,n){this.position=e,this.inclusive=n}};function wD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),n.key):r=Qi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function TD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gt(t.position[n],e.position[n]))return!1;return!0}var Ji=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Y1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var $u=class{},Ne=class t extends $u{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mg(e,n,r):n==="array-contains"?new _g(e,r):n==="in"?new Eg(e,r):n==="not-in"?new Ig(e,r):n==="array-contains-any"?new wg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yg(e,r):new vg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qi(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wt=class t extends $u{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return Db(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Db(t){return t.op==="and"}function bb(t){return Z1(t)&&Db(t)}function Z1(t){for(let e of t.filters)if(e instanceof Wt)return!1;return!0}function gg(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+Yi(t.value);if(bb(t))return t.filters.map(e=>gg(e)).join(",");{let e=t.filters.map(n=>gg(n)).join(",");return`${t.op}(${e})`}}function Cb(t,e){return t instanceof Ne?(function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&Gt(r.value,i.value)})(t,e):t instanceof Wt?(function(r,i){return i instanceof Wt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&Cb(s,i.filters[c]),!0):!1})(t,e):void B(19439)}function Ab(t){return t instanceof Ne?(function(n){return`${n.field.canonicalString()} ${n.op} ${Yi(n.value)}`})(t):t instanceof Wt?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ab).join(" ,")+"}"})(t):"Filter"}var mg=class extends Ne{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){let n=V.comparator(e.key,this.key);return this.matchesComparison(n)}},yg=class extends Ne{constructor(e,n){super(e,"in",n),this.keys=Sb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},vg=class extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=Sb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Sb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}var _g=class extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Km(n)&&Qs(n.arrayValue,this.value)}},Eg=class extends Ne{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qs(this.value.arrayValue,n)}},Ig=class extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qs(this.value.arrayValue,n)}},wg=class extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qs(this.value.arrayValue,r))}};var Tg=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function DD(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Tg(t,e,n,r,i,o,s)}function Qm(t){let e=$(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),hl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yi(r)).join(",")),e.Pe=n}return e.Pe}function Ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Y1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Cb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TD(t.startAt,e.startAt)&&TD(t.endAt,e.endAt)}function Dg(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Xi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function J1(t,e,n,r,i,o,s,c){return new Xi(t,e,n,r,i,o,s,c)}function Nb(t){return new Xi(t)}function bD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function X1(t){return t.collectionGroup!==null}function $s(t){let e=$(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Oe(ht.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ji(o,r))}),n.has(ht.keyField().canonicalString())||e.Te.push(new Ji(ht.keyField(),r))}return e.Te}function qt(t){let e=$(t);return e.Ie||(e.Ie=eF(e,$s(t))),e.Ie}function eF(t,e){if(t.limitType==="F")return DD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ji(i.field,o)});let n=t.endAt?new Zi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zi(t.startAt.position,t.startAt.inclusive):null;return DD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bg(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gl(t,e){return Ym(qt(t),qt(e))&&t.limitType===e.limitType}function Rb(t){return`${Qm(qt(t))}|lt:${t.limitType}`}function Li(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ab(i)).join(", ")}]`),hl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Yi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Yi(i)).join(",")),`Target(${r})`})(qt(t))}; limitType=${t.limitType})`}function ml(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of $s(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=wD(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,$s(r),i)||r.endAt&&!(function(s,c,u){let l=wD(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,$s(r),i))})(t,e)}function tF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pb(t){return(e,n)=>{let r=!1;for(let i of $s(t)){let o=nF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function nF(t,e,n){let r=t.field.isKeyField()?V.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Qi(u,l):B(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var mn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ir(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return gb(this.inner)}size(){return this.innerSize}};var rF=new Ee(V.comparator);function yn(){return rF}var Mb=new Ee(V.comparator);function Bs(...t){let e=Mb;for(let n of t)e=e.insert(n.key,n);return e}function kb(t){let e=Mb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return Hs()}function xb(){return Hs()}function Hs(){return new mn(t=>t.toString(),(t,e)=>t.isEqual(e))}var iF=new Ee(V.comparator),oF=new Oe(V.comparator);function ee(...t){let e=oF;for(let n of t)e=e.add(n);return e}var sF=new Oe(Q);function aF(){return sF}function Zm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ws(e)?"-0":e}}function Ob(t){return{integerValue:""+t}}function cF(t,e){return F1(e)?Ob(e):Zm(t,e)}var eo=class{constructor(){this._=void 0}};function uF(t,e,n){return t instanceof to?(function(i,o){let s={fields:{[yb]:{stringValue:mb},[_b]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zm(o)&&(o=pl(o)),o&&(s.fields[vb]=o),{mapValue:s}})(n,e):t instanceof Wr?Lb(t,e):t instanceof Kr?Vb(t,e):(function(i,o){let s=Fb(i,o),c=CD(s)+CD(i.Ee);return pg(s)&&pg(i.Ee)?Ob(c):Zm(i.serializer,c)})(t,e)}function lF(t,e,n){return t instanceof Wr?Lb(t,e):t instanceof Kr?Vb(t,e):n}function Fb(t,e){return t instanceof no?(function(r){return pg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var to=class extends eo{},Wr=class extends eo{constructor(e){super(),this.elements=e}};function Lb(t,e){let n=jb(e);for(let r of t.elements)n.some(i=>Gt(i,r))||n.push(r);return{arrayValue:{values:n}}}var Kr=class extends eo{constructor(e){super(),this.elements=e}};function Vb(t,e){let n=jb(e);for(let r of t.elements)n=n.filter(i=>!Gt(i,r));return{arrayValue:{values:n}}}var no=class extends eo{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function CD(t){return me(t.integerValue||t.doubleValue)}function jb(t){return Km(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dF(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Wr&&i instanceof Wr||r instanceof Kr&&i instanceof Kr?Gi(r.elements,i.elements,Gt):r instanceof no&&i instanceof no?Gt(r.Ee,i.Ee):r instanceof to&&i instanceof to})(t.transform,e.transform)}var Cg=class{constructor(e,n){this.version=e,this.transformResults=n}},Pt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ro=class{};function Bb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new io(t.key,Pt.none()):new Qr(t.key,t.data,Pt.none());{let n=t.data,r=ft.empty(),i=new Oe(ht.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Kt(t.key,r,new Et(i.toArray()),Pt.none())}}function fF(t,e,n){t instanceof Qr?(function(i,o,s){let c=i.value.clone(),u=SD(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Kt?(function(i,o,s){if(!xu(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=SD(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Ub(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function qs(t,e,n,r){return t instanceof Qr?(function(o,s,c,u){if(!xu(o.precondition,s))return c;let l=o.value.clone(),h=ND(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Kt?(function(o,s,c,u){if(!xu(o.precondition,s))return c;let l=ND(o.fieldTransforms,u,s),h=s.data;return h.setAll(Ub(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return xu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function hF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=Fb(r.transform,i||null);o!=null&&(n===null&&(n=ft.empty()),n.set(r.field,o))}return n||null}function AD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gi(r,i,(o,s)=>dF(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Qr=class extends ro{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Kt=class extends ro{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Ub(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function SD(t,e,n){let r=new Map;ae(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,lF(s,c,n[i]))}return r}function ND(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,uF(o,s,e))}return r}var io=class extends ro{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ag=class extends ro{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sg=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&fF(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=qs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=qs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=xb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=Bb(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Gi(this.mutations,e.mutations,(n,r)=>AD(n,r))&&Gi(this.baseMutations,e.baseMutations,(n,r)=>AD(n,r))}},Ng=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return iF})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Rg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Pg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var De,ie;function pF(t){switch(t){case R.OK:return B(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function $b(t){if(t===void 0)return hn("GRPC error has no .code"),R.UNKNOWN;switch(t){case De.OK:return R.OK;case De.CANCELLED:return R.CANCELLED;case De.UNKNOWN:return R.UNKNOWN;case De.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case De.INTERNAL:return R.INTERNAL;case De.UNAVAILABLE:return R.UNAVAILABLE;case De.UNAUTHENTICATED:return R.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case De.NOT_FOUND:return R.NOT_FOUND;case De.ALREADY_EXISTS:return R.ALREADY_EXISTS;case De.PERMISSION_DENIED:return R.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case De.ABORTED:return R.ABORTED;case De.OUT_OF_RANGE:return R.OUT_OF_RANGE;case De.UNIMPLEMENTED:return R.UNIMPLEMENTED;case De.DATA_LOSS:return R.DATA_LOSS;default:return B(39323,{code:t})}}(ie=De||(De={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var RD=null;var gF=new dn([4294967295,4294967295],0);function PD(t){let e=JD().encode(t),n=new Gp;return n.update(e),new Uint8Array(n.digest())}function MD(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new dn([n,r],0),new dn([i,o],0)]}var Mg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qr(`Invalid padding: ${n}`);if(r<0)throw new qr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qr(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=dn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(dn.fromNumber(r)));return i.compare(gF)===1&&(i=new dn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=PD(e),[r,i]=MD(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let n=PD(e),[r,i]=MD(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},qr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ys.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(G.min(),i,new Ee(Q),yn(),ee())}},Ys=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ee(),ee(),ee())}};var $i=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},qu=class{constructor(e,n){this.targetId=e,this.De=n}},zu=class{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Gu=class{constructor(){this.ve=0,this.Ce=kD(),this.Fe=Ge.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ee(),n=ee(),r=ee();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new Ys(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=kD()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},kg=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=yn(),this.je=Ru(),this.Je=Ru(),this.He=new Ee(Q)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(Dg(o))if(r===0){let s=new V(o.path);this.Xe(n,s,Mt.newNoDocument(s,G.min()))}else ae(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}RD?.ct((function(h,p,m,y,S){var P,N,x,j,K,ue;let We={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ce=p.unchangedNames;return ce&&(We.bloomFilter={applied:S===0,hashCount:(P=ce?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(j=(x=(N=ce?.bits)===null||N===void 0?void 0:N.bitmap)===null||x===void 0?void 0:x.length)!==null&&j!==void 0?j:0,padding:(ue=(K=ce?.bits)===null||K===void 0?void 0:K.padding)!==null&&ue!==void 0?ue:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),We})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=gn(r).toUint8Array()}catch(u){if(u instanceof ju)return er("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Mg(s,i,o)}catch(u){return er(u instanceof qr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&Dg(c.target)){let u=new V(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Mt.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ee();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Hu(e,n,this.He,this.ze,r);return this.ze=yn(),this.je=Ru(),this.Je=Ru(),this.He=new Ee(Q),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Gu,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Oe(Q),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Oe(Q),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Gu),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Ru(){return new Ee(V.comparator)}function kD(){return new Ee(V.comparator)}var mF={asc:"ASCENDING",desc:"DESCENDING"},yF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vF={and:"AND",or:"OR"},xg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Og(t,e){return t.useProto3Json||hl(e)?e:{value:e}}function Wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _F(t,e){return Wu(t,e.toTimestamp())}function zt(t){return ae(!!t,49232),G.fromTimestamp((function(n){let r=pn(n);return new Ae(r.seconds,r.nanos)})(t))}function Jm(t,e){return Fg(t,e).canonicalString()}function Fg(t,e){let n=(function(i){return new ye(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function qb(t){let e=ye.fromString(t);return ae(Qb(e),10190,{key:e.toString()}),e}function Lg(t,e){return Jm(t.databaseId,e.path)}function Jp(t,e){let n=qb(e);if(n.get(1)!==t.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(Gb(n))}function zb(t,e){return Jm(t.databaseId,e)}function EF(t){let e=qb(t);return e.length===4?ye.emptyPath():Gb(e)}function Vg(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gb(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xD(t,e,n){return{name:Lg(t,e),fields:n.value.mapValue.fields}}function IF(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ae(h===void 0||typeof h=="string",58123),Ge.fromBase64String(h||"")):(ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ge.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?R.UNKNOWN:$b(l.code);return new F(h,l.message||"")})(s);n=new zu(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jp(t,r.document.name),o=zt(r.document.updateTime),s=r.document.createTime?zt(r.document.createTime):G.min(),c=new ft({mapValue:{fields:r.document.fields}}),u=Mt.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new $i(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jp(t,r.document),o=r.readTime?zt(r.readTime):G.min(),s=Mt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new $i([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jp(t,r.document),o=r.removedTargetIds||[];n=new $i([],o,i,null)}else{if(!("filter"in e))return B(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Pg(i,o),c=r.targetId;n=new qu(c,s)}}return n}function wF(t,e){let n;if(e instanceof Qr)n={update:xD(t,e.key,e.value)};else if(e instanceof io)n={delete:Lg(t,e.key)};else if(e instanceof Kt)n={update:xD(t,e.key,e.data),updateMask:PF(e.fieldMask)};else{if(!(e instanceof Ag))return B(16599,{Rt:e.type});n={verify:Lg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof to)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Kr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof no)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw B(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:_F(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)})(t,e.precondition)),n}function TF(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?zt(i.updateTime):zt(o);return s.isEqual(G.min())&&(s=zt(o)),new Cg(s,i.transformResults||[])})(n,e))):[]}function DF(t,e){return{documents:[zb(t,e.path)]}}function bF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zb(t,i);let o=(function(l){if(l.length!==0)return Kb(Wt.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Vi(m.field),direction:SF(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Og(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function CF(t){let e=EF(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ae(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=Wb(p);return m instanceof Wt&&bb(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Ji(ji(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,hl(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Zi(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Zi(y,m)})(n.endAt)),J1(e,i,s,o,c,"F",u,l)}function AF(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wb(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ji(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ji(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ji(n.unaryFilter.field);return Ne.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ji(n.unaryFilter.field);return Ne.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ne.create(ji(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Wt.create(n.compositeFilter.filters.map(r=>Wb(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}})(n.compositeFilter.op))})(t):B(30097,{filter:t})}function SF(t){return mF[t]}function NF(t){return yF[t]}function RF(t){return vF[t]}function Vi(t){return{fieldPath:t.canonicalString()}}function ji(t){return ht.fromServerFormat(t.fieldPath)}function Kb(t){return t instanceof Ne?(function(n){if(n.op==="=="){if(ID(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NAN"}};if(ED(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ID(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NOT_NAN"}};if(ED(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vi(n.field),op:NF(n.op),value:n.value}}})(t):t instanceof Wt?(function(n){let r=n.getFilters().map(i=>Kb(i));return r.length===1?r[0]:{compositeFilter:{op:RF(n.op),filters:r}}})(t):B(54877,{filter:t})}function PF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Zs=class t{constructor(e,n,r,i,o=G.min(),s=G.min(),c=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jg=class{constructor(e){this.gt=e}};function MF(t){let e=CF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bg(e,e.limit,"L"):e}var Ku=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(me(e.integerValue));else if("doubleValue"in e){let r=me(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Ws(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=pn(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(gn(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?wb(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Ib(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):B(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ki,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(me(c)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),V.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Ku.Ut=new Ku;var Bg=class{constructor(){this.Dn=new Ug}addToCollectionParentIndex(e,n){return this.Dn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Gr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},Ug=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Oe(ye.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oe(ye.comparator)).toArray()}};var lQ=new Uint8Array(0);var OD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yb=41943040,_t=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(Yb,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);var Js=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var FD="LruGarbageCollector",kF=1048576;function LD([t,e],[n,r]){let i=Q(t,n);return i===0?Q(e,r):i}var $g=class{constructor(e){this.Tr=e,this.buffer=new Oe(LD),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();LD(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Hg=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){O(FD,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>I(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?O(FD,"Ignoring IndexedDB error during garbage collection: ",n):yield uo(n)}yield this.Rr(3e5)}))}},qg=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Hm.ue);let r=new $g(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(OD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OD):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Fi()<=J.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function xF(t,e){return new qg(t,e)}var zg=class{constructor(){this.changes=new mn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gg=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Wg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&qs(r.mutation,i,Et.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){let i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Bs();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=yn(),s=Hs(),c=(function(){return Hs()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Kt)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),qs(h.mutation,l,h.mutation.getFieldMask(),Ae.now())):s.set(l.key,Et.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new Gg(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Hs(),i=new Ee((s,c)=>s-c),o=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Et.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||ee()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=xb();h.forEach(m=>{if(!o.has(m)){let y=Bb(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):X1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(Hr()),c=Gs,u=o;return s.next(l=>M.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ee())).next(h=>({batchId:c,changes:kb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=Bs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Bs();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=(function(p,m){return new Xi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Mt.newInvalidDocument(h)))});let c=Bs();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&qs(h.mutation,l,Et.empty(),Ae.now()),ml(n,l)&&(c=c.insert(u,l))}),c})}};var Kg=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return M.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:zt(i.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:MF(i.bundledQuery),readTime:zt(i.readTime)}})(n)),M.resolve()}};var Qg=class{constructor(){this.overlays=new Ee(V.comparator),this.kr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Hr();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=Hr(),o=n.length+1,s=new V(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ee((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Hr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Hr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return M.resolve(c)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Rg(n,r));let o=this.kr.get(n);o===void 0&&(o=ee(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var Yg=class{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Xs=class{constructor(){this.qr=new Oe(be.Qr),this.$r=new Oe(be.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new be(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new be(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new V(new ye([])),r=new be(n,e),i=new be(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new V(new ye([])),r=new be(n,e),i=new be(n,e+1),o=ee();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new be(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},be=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return V.comparator(e.key,n.key)||Q(e.Hr,n.Hr)}static Ur(e,n){return Q(e.Hr,n.Hr)||V.comparator(e.key,n.key)}};var Zg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Oe(be.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Sg(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new be(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?qm:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Oe(Q);return n.forEach(i=>{let o=new be(i,0),s=new be(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new be(new V(o),0),c=new Oe(Q);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),M.resolve(this.ei(c))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(n.mutations,i=>{let o=new be(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new be(n,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Jg=class{constructor(e){this.ni=e,this.docs=(function(){return new Ee(V.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let r=yn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Mt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=yn(),s=n.path,c=new V(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||k1(M1(h),r)<=0||(i.has(h.key)||ml(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){B(9500)}ri(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Xg(this)}getSize(e){return M.resolve(this.size)}},Xg=class extends zg{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var em=class{constructor(e){this.persistence=e,this.ii=new mn(n=>Qm(n),Ym),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.si=0,this.oi=new Xs,this.targetCount=0,this._i=Js.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),M.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.hr(n),M.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.oi.containsKey(n))}};var Qu=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new Hm(0),this.ci=!1,this.ci=!0,this.li=new Yg,this.referenceDelegate=e(this),this.hi=new em(this),this.indexManager=new Bg,this.remoteDocumentCache=(function(i){return new Jg(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new jg(n),this.Ti=new Kg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qg,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Zg(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new tm(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},tm=class extends dg{constructor(e){super(),this.currentSequenceNumber=e}},nm=class t{constructor(e){this.persistence=e,this.Ai=new Xs,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw B(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=V.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,G.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return M.or([()=>M.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Yu=class t{constructor(e,n){this.persistence=e,this.gi=new mn(r=>L1(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xF(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,G.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),M.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mu(e.data.value)),n}Sr(e,n,r){return M.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var rm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ee(),i=ee();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var im=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var om=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Uw()?8:O1(Me())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new im;return this.ws(e,n,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,n,s,c.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Fi()<=J.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(Fi()<=J.DEBUG&&O("QueryEngine","Query:",Li(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Fi()<=J.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):M.resolve())}ps(e,n){if(bD(n))return M.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bg(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ee(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,c);return this.Ds(n,l,s,u.readTime)?this.ps(e,bg(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return bD(n)||i.isEqual(G.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?M.resolve(null):(Fi()<=J.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Li(n)),this.vs(e,s,n,P1(i,Gs)).next(c=>c))})}bs(e,n){let r=new Oe(Pb(e));return n.forEach((i,o)=>{ml(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Fi()<=J.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Li(n)),this.gs.getDocumentsMatchingQuery(e,n,Gr.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Xm="LocalStore",OF=3e8,sm=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ee(Q),this.Ms=new mn(o=>Qm(o),Ym),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wg(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function FF(t,e,n,r){return new sm(t,e,n,r)}function Zb(t,e){return I(this,null,function*(){let n=$(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ee();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function LF(t,e){let n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(P=>{let N=l.docVersions.get(S);ae(N!==null,48541),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ee();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Jb(t){let e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function VF(t,e){let n=$(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ge.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,N,x){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=OF?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(m,y,h)&&c.push(n.hi.updateTargetData(o,y))});let u=yn(),l=ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(jF(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(G.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function jF(t,e,n){let r=ee(),i=ee();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=yn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(G.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):O(Xm,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function BF(t,e){let n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function UF(t,e){let n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Zs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function am(t,e,n){return I(this,null,function*(){let r=$(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!lo(s))throw s;O(Xm,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function VD(t,e,n){let r=$(t),i=G.min(),o=ee();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=$(u),m=p.Ms.get(h);return m!==void 0?M.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,qt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:G.min(),n?o:ee())).next(c=>($F(r,tF(e),c),{documents:c,qs:o})))}function $F(t,e,n){let r=t.xs.get(e)||G.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Zu=class{constructor(){this.activeTargetIds=aF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var cm=class{constructor(){this.Fo=new Zu,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Zu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var um=class{xo(e){}shutdown(){}};var jD="ConnectivityMonitor",Ju=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){O(jD,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){O(jD,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pu=null;function lm(){return Pu===null?Pu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pu++,"0x"+Pu.toString(16)}var Xp="RestConnection",HF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},dm=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Bu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=lm(),c=this.Go(e,n.toUriEncodedString());O(Xp,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),h=Bn(l);return this.jo(e,c,u,r,h).then(p=>(O(Xp,`Received RPC '${e}' ${s}: `,p),p),p=>{throw er(Xp,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=HF[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var fm=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ze="WebChannelConnection",hm=class extends dm{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=lm();return new Promise((c,u)=>{let l=new Wp;l.setWithCredentials(!0),l.listenOnce(Kp.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case js.NO_ERROR:let p=l.getResponseJson();O(ze,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case js.TIMEOUT:O(ze,`RPC '${e}' ${s} timed out`),u(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case js.HTTP_ERROR:let m=l.getStatus();if(O(ze,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let P=(function(x){let j=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(j)>=0?j:R.UNKNOWN})(S.status);u(new F(P,S.message))}else u(new F(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(R.UNAVAILABLE,"Connection failed."));break;default:B(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{O(ze,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);O(ze,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=lm(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Zp(),c=Yp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(ze,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new fm({Ho:N=>{y?O(ze,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(O(ze,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(ze,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),P=(N,x,j)=>{N.listen(x,K=>{try{j(K)}catch(ue){setTimeout(()=>{throw ue},0)}})};return P(p,Oi.EventType.OPEN,()=>{y||(O(ze,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),P(p,Oi.EventType.CLOSE,()=>{y||(y=!0,O(ze,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),P(p,Oi.EventType.ERROR,N=>{y||(y=!0,er(ze,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.__(new F(R.UNAVAILABLE,"The operation could not be completed")))}),P(p,Oi.EventType.MESSAGE,N=>{var x;if(!y){let j=N.data[0];ae(!!j,16349);let K=j,ue=K?.error||((x=K[0])===null||x===void 0?void 0:x.error);if(ue){O(ze,`RPC '${e}' stream ${i} received error:`,ue);let We=ue.status,ce=(function(E){let w=De[E];if(w!==void 0)return $b(w)})(We),T=ue.message;ce===void 0&&(ce=R.INTERNAL,T="Unknown error status: "+We+" with message "+ue.message),y=!0,S.__(new F(ce,T)),p.close()}else O(ze,`RPC '${e}' stream ${i} received:`,j),S.a_(j)}}),P(c,Qp.STAT_EVENT,N=>{N.stat===Su.PROXY?O(ze,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Su.NOPROXY&&O(ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function eg(){return typeof document<"u"?document:null}function yl(t){return new xg(t,!0)}var Xu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var BD="PersistentStream",el=class{constructor(e,n,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Xu(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return I(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return I(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return I(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(hn(n.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>I(this,null,function*(){this.state=0,this.start()}))}G_(e){return O(BD,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(O(BD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pm=class extends el{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=IF(this.serializer,e),r=(function(o){if(!("targetChange"in o))return G.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?G.min():s.readTime?zt(s.readTime):G.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=Vg(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=Dg(u)?{documents:DF(o,u)}:{query:bF(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=Hb(o,s.resumeToken);let l=Og(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(G.min())>0){c.readTime=Wu(o,s.snapshotVersion.toTimestamp());let l=Og(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=AF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=Vg(this.serializer),n.removeTarget=e,this.k_(n)}},gm=class extends el{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=TF(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=Vg(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>wF(this.serializer,r))};this.k_(n)}};var mm=class{},ym=class extends mm{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Fg(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(R.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,Fg(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},vm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(hn(n),this._a=!1):O("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Yr="RemoteStore",_m=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>I(this,null,function*(){Jr(this)&&(O(Yr,"Restarting streams for network reachability change."),yield(function(u){return I(this,null,function*(){let l=$(u);l.Ia.add(4),yield na(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield vl(l)})})(this))}))}),this.Aa=new vm(r,i)}};function vl(t){return I(this,null,function*(){if(Jr(t))for(let e of t.da)yield e(!0)})}function na(t){return I(this,null,function*(){for(let e of t.da)yield e(!1)})}function Xb(t,e){let n=$(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),ry(n)?ny(n):fo(n).x_()&&ty(n,e))}function ey(t,e){let n=$(t),r=fo(n);n.Ta.delete(e),r.x_()&&eC(n,e),n.Ta.size===0&&(r.x_()?r.B_():Jr(n)&&n.Aa.set("Unknown"))}function ty(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(t).H_(e)}function eC(t,e){t.Ra.$e(e),fo(t).Y_(e)}function ny(t){t.Ra=new kg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),fo(t).start(),t.Aa.aa()}function ry(t){return Jr(t)&&!fo(t).M_()&&t.Ta.size>0}function Jr(t){return $(t).Ia.size===0}function tC(t){t.Ra=void 0}function qF(t){return I(this,null,function*(){t.Aa.set("Online")})}function zF(t){return I(this,null,function*(){t.Ta.forEach((e,n)=>{ty(t,e)})})}function GF(t,e){return I(this,null,function*(){tC(t),ry(t)?(t.Aa.la(e),ny(t)):t.Aa.set("Unknown")})}function WF(t,e,n){return I(this,null,function*(){if(t.Aa.set("Online"),e instanceof zu&&e.state===2&&e.cause)try{yield(function(i,o){return I(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})})(t,e)}catch(r){O(Yr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tl(t,r)}else if(e instanceof $i?t.Ra.Ye(e):e instanceof qu?t.Ra.it(e):t.Ra.et(e),!n.isEqual(G.min()))try{let r=yield Jb(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Ge.EMPTY_BYTE_STRING,h.snapshotVersion)),eC(o,u);let p=new Zs(h.target,u,l,h.sequenceNumber);ty(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n))}catch(r){O(Yr,"Failed to raise snapshot:",r),yield tl(t,r)}})}function tl(t,e,n){return I(this,null,function*(){if(!lo(e))throw e;t.Ia.add(1),yield na(t),t.Aa.set("Offline"),n||(n=()=>Jb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(null,null,function*(){O(Yr,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield vl(t)}))})}function nC(t,e){return e().catch(n=>tl(t,n,e))}function _l(t){return I(this,null,function*(){let e=$(t),n=nr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qm;for(;KF(e);)try{let i=yield BF(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,QF(e,i)}catch(i){yield tl(e,i)}rC(e)&&iC(e)})}function KF(t){return Jr(t)&&t.Pa.length<10}function QF(t,e){t.Pa.push(e);let n=nr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function rC(t){return Jr(t)&&!nr(t).M_()&&t.Pa.length>0}function iC(t){nr(t).start()}function YF(t){return I(this,null,function*(){nr(t).na()})}function ZF(t){return I(this,null,function*(){let e=nr(t);for(let n of t.Pa)e.X_(n.mutations)})}function JF(t,e,n){return I(this,null,function*(){let r=t.Pa.shift(),i=Ng.from(r,e,n);yield nC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _l(t)})}function XF(t,e){return I(this,null,function*(){e&&nr(t).Z_&&(yield(function(r,i){return I(this,null,function*(){if((function(s){return pF(s)&&s!==R.ABORTED})(i.code)){let o=r.Pa.shift();nr(r).N_(),yield nC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _l(r)}})})(t,e)),rC(t)&&iC(t)})}function UD(t,e){return I(this,null,function*(){let n=$(t);n.asyncQueue.verifyOperationInProgress(),O(Yr,"RemoteStore received new credentials");let r=Jr(n);n.Ia.add(3),yield na(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield vl(n)})}function eL(t,e){return I(this,null,function*(){let n=$(t);e?(n.Ia.delete(2),yield vl(n)):e||(n.Ia.add(2),yield na(n),n.Aa.set("Unknown"))})}function fo(t){return t.Va||(t.Va=(function(n,r,i){let o=$(n);return o.ia(),new pm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:qF.bind(null,t),e_:zF.bind(null,t),n_:GF.bind(null,t),J_:WF.bind(null,t)}),t.da.push(e=>I(null,null,function*(){e?(t.Va.N_(),ry(t)?ny(t):t.Aa.set("Unknown")):(yield t.Va.stop(),tC(t))}))),t.Va}function nr(t){return t.ma||(t.ma=(function(n,r,i){let o=$(n);return o.ia(),new gm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:YF.bind(null,t),n_:XF.bind(null,t),ea:ZF.bind(null,t),ta:JF.bind(null,t)}),t.da.push(e=>I(null,null,function*(){e?(t.ma.N_(),yield _l(t)):(yield t.ma.stop(),t.Pa.length>0&&(O(Yr,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var Em=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iy(t,e){if(hn("AsyncQueue",`${e}: ${t}`),lo(t))return new F(R.UNAVAILABLE,`${e}: ${t}`);throw t}var nl=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=Bs(),this.sortedSet=new Ee(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var rl=class{constructor(){this.fa=new Ee(V.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):B(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},oo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,nl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Im=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},wm=class{constructor(){this.queries=$D(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=$(n),o=i.queries;i.queries=$D(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function $D(){return new mn(t=>Rb(t),gl)}function tL(t,e){return I(this,null,function*(){let n=$(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Im,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=iy(s,`Initialization of query '${Li(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&oy(n)})}function nL(t,e){return I(this,null,function*(){let n=$(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function rL(t,e){let n=$(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&oy(n)}function iL(t,e,n){let r=$(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function oy(t){t.Da.forEach(e=>{e.next()})}var Tm,HD;(HD=Tm||(Tm={})).Fa="default",HD.Cache="cache";var Dm=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Tm.Cache}};var il=class{constructor(e){this.key=e}},ol=class{constructor(e){this.key=e}},bm=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ee(),this.mutatedKeys=ee(),this.Xa=Pb(e),this.eu=new nl(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new rl,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=ml(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?S!==P&&(r.track({type:3,doc:y}),N=!0):this.iu(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(c=!0)),N&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{At:N})}};return P(y)-P(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let c=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new oo(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rl,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new ol(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new il(r))}),n}uu(e){this.Ha=e.qs,this.Za=ee();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return oo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},sy="SyncEngine",Cm=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Am=class{constructor(e){this.key=e,this.lu=!1}},Sm=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new mn(c=>Rb(c),gl),this.Tu=new Map,this.Iu=new Set,this.du=new Ee(V.comparator),this.Eu=new Map,this.Au=new Xs,this.Ru={},this.Vu=new Map,this.mu=Js.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function oL(t,e,n=!0){return I(this,null,function*(){let r=lC(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield oC(r,e,n,!0),i})}function sL(t,e){return I(this,null,function*(){let n=lC(t);yield oC(n,e,!0,!1)})}function oC(t,e,n,r){return I(this,null,function*(){let i=yield UF(t.localStore,qt(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield aL(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Xb(t.remoteStore,i),c})}function aL(t,e,n,r,i){return I(this,null,function*(){t.gu=(p,m,y)=>(function(P,N,x,j){return I(this,null,function*(){let K=N.view.nu(x);K.Ds&&(K=yield VD(P.localStore,N.query,!1).then(({documents:T})=>N.view.nu(T,K)));let ue=j&&j.targetChanges.get(N.targetId),We=j&&j.targetMismatches.get(N.targetId)!=null,ce=N.view.applyChanges(K,P.isPrimaryClient,ue,We);return zD(P,N.targetId,ce._u),ce.snapshot})})(t,p,m,y);let o=yield VD(t.localStore,e,!0),s=new bm(e,o.qs),c=s.nu(o.documents),u=Ys.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);zD(t,n,l._u);let h=new Cm(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function cL(t,e,n){return I(this,null,function*(){let r=$(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!gl(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield am(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ey(r.remoteStore,i.targetId),Nm(r,i.targetId)}).catch(uo))):(Nm(r,i.targetId),yield am(r.localStore,i.targetId,!0))})}function uL(t,e){return I(this,null,function*(){let n=$(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ey(n.remoteStore,r.targetId))})}function lL(t,e,n){return I(this,null,function*(){let r=yL(t);try{let i=yield(function(s,c){let u=$(s),l=Ae.now(),h=c.reduce((y,S)=>y.add(S.key),ee()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=yn(),P=ee();return u.Os.getEntries(y,h).next(N=>{S=N,S.forEach((x,j)=>{j.isValidDocument()||(P=P.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(N=>{p=N;let x=[];for(let j of c){let K=hF(j,p.get(j.key).overlayedDocument);K!=null&&x.push(new Kt(j.key,K,Tb(K.value.mapValue),Pt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,c)}).next(N=>{m=N;let x=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,N.batchId,x)})}).then(()=>({batchId:m.batchId,changes:kb(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ee(Q)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield ra(r,i.changes),yield _l(r.remoteStore)}catch(i){let o=iy(i,"Failed to persist write");n.reject(o)}})}function sC(t,e){return I(this,null,function*(){let n=$(t);try{let r=yield VF(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ae(s.lu,14607):i.removedDocuments.size>0&&(ae(s.lu,42227),s.lu=!1))}),yield ra(n,r,e)}catch(r){yield uo(r)}})}function qD(t,e,n){let r=$(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=$(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&oy(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dL(t,e,n){return I(this,null,function*(){let r=$(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ee(V.comparator);s=s.insert(o,Mt.newNoDocument(o,G.min()));let c=ee().add(o),u=new Hu(G.min(),new Map,new Ee(Q),s,c);yield sC(r,u),r.du=r.du.remove(o),r.Eu.delete(e),ay(r)}else yield am(r.localStore,e,!1).then(()=>Nm(r,e,n)).catch(uo)})}function fL(t,e){return I(this,null,function*(){let n=$(t),r=e.batch.batchId;try{let i=yield LF(n.localStore,e);cC(n,r,null),aC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ra(n,i)}catch(i){yield uo(i)}})}function hL(t,e,n){return I(this,null,function*(){let r=$(t);try{let i=yield(function(s,c){let u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ae(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);cC(r,e,n),aC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ra(r,i)}catch(i){yield uo(i)}})}function aC(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function cC(t,e,n){let r=$(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||uC(t,r)})}function uC(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(ey(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ay(t))}function zD(t,e,n){for(let r of n)r instanceof il?(t.Au.addReference(r.key,e),pL(t,r)):r instanceof ol?(O(sy,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||uC(t,r.key)):B(19791,{yu:r})}function pL(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(O(sy,"New document in limbo: "+n),t.Iu.add(r),ay(t))}function ay(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new V(ye.fromString(e)),r=t.mu.next();t.Eu.set(r,new Am(n)),t.du=t.du.insert(n,r),Xb(t.remoteStore,new Zs(qt(Nb(n.path)),r,"TargetPurposeLimboResolution",Hm.ue))}}function ra(t,e,n){return I(this,null,function*(){let r=$(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=rm.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return I(this,null,function*(){let h=$(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!lo(p))throw p;O(Xm,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,P)}}})})(r.localStore,o))})}function gL(t,e){return I(this,null,function*(){let n=$(t);if(!n.currentUser.isEqual(e)){O(sy,"User change. New user:",e.toKey());let r=yield Zb(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new F(R.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ra(n,r.Bs)}})}function mL(t,e){let n=$(t),r=n.Eu.get(e);if(r&&r.lu)return ee().add(r.key);{let i=ee(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let c=n.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function lC(t){let e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dL.bind(null,e),e.hu.J_=rL.bind(null,e.eventManager),e.hu.pu=iL.bind(null,e.eventManager),e}function yL(t){let e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hL.bind(null,e),e}var dC=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return I(this,null,function*(){this.serializer=yl(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return FF(this.persistence,new om,n.initialUser,this.serializer)}Du(n){return new Qu(nm.Vi,this.serializer)}bu(n){return new cm}terminate(){return I(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Rm=class extends dC{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ae(this.persistence.referenceDelegate instanceof Yu,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Hg(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new Qu(r=>Yu.Vi(r,n),this.serializer)}};var vL=(()=>{class t{initialize(n,r){return I(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qD(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gL.bind(null,this.syncEngine),yield eL(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new wm})()}createDatastore(n){let r=yl(n.databaseInfo.databaseId),i=(function(s){return new hm(s)})(n.databaseInfo);return(function(s,c,u,l){return new ym(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new _m(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>qD(this.syncEngine,r,0),(function(){return Ju.C()?new Ju:new um})())}createSyncEngine(n,r){return(function(o,s,c,u,l,h,p){let m=new Sm(o,s,c,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var n,r;yield(function(o){return I(this,null,function*(){let s=$(o);O(Yr,"RemoteStore shutting down."),s.Ia.add(5),yield na(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Pm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var rr="FirestoreClient",Mm=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xe.UNAUTHENTICATED,this.clientId=zs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){O(rr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O(rr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=iy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function tg(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O(rr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(null,null,function*(){r.isEqual(i)||(yield Zb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{er("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{O("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{er("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function GD(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield _L(t);O(rr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>UD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>UD(e.remoteStore,i)),t._onlineComponents=e})}function _L(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O(rr,"Using user provided OfflineComponentProvider");try{yield tg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;er("Error using user provided cache. Falling back to memory cache: "+n),yield tg(t,new dC)}}else O(rr,"Using default OfflineComponentProvider"),yield tg(t,new Rm(void 0));return t._offlineComponents})}function fC(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O(rr,"Using user provided OnlineComponentProvider"),yield GD(t,t._uninitializedComponentsProvider._online)):(O(rr,"Using default OnlineComponentProvider"),yield GD(t,new vL))),t._onlineComponents})}function EL(t){return fC(t).then(e=>e.syncEngine)}function IL(t){return I(this,null,function*(){let e=yield fC(t),n=e.eventManager;return n.onListen=oL.bind(null,e.syncEngine),n.onUnlisten=cL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uL.bind(null,e.syncEngine),n})}function wL(t,e,n={}){let r=new $t;return t.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return(function(o,s,c,u,l){let h=new Pm({next:m=>{h.Ou(),s.enqueueAndForget(()=>nL(o,p)),m.fromCache&&u.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Dm(c,h,{includeMetadataChanges:!0,ka:!0});return tL(o,p)})(yield IL(t),t.asyncQueue,e,n,r)})),r.promise}function hC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var WD=new Map;var pC="firestore.googleapis.com",KD=!0,sl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pC,this.ssl=KD}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:KD;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kF)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},so=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rg;switch(r.type){case"firstParty":return new ag(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=WD.get(n);r&&(O("ComponentProvider","Removing Datastore"),WD.delete(n),r.terminate())})(this),Promise.resolve()}};function gC(t,e,n,r={}){var i;t=Wi(t,so);let o=Bn(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(nu(`https://${u}`),ru("Firestore",!0)),s.host!==pC&&s.host!==u&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Vt(l,c)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=xe.MOCK_USER;else{h=Ow(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xe(m)}t._authCredentials=new ig(new Ou(h,p))}}var al=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},rt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ta(n,t._jsonSchema))return new t(e,r||null,new V(ye.fromString(n.referencePath)))}};rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:Ce("string",rt._jsonSchemaVersion),referencePath:Ce("string")};var Yn=class t extends al{constructor(e,n,r){super(e,n,Nb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new V(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function mC(t,e,...n){if(t=ke(t),XD("collection","path",e),t instanceof so){let r=ye.fromString(e,...n);return hD(r),new Yn(t,null,r)}{if(!(t instanceof rt||t instanceof Yn))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ye.fromString(e,...n));return hD(r),new Yn(t.firestore,null,r)}}function cy(t,e,...n){if(t=ke(t),arguments.length===1&&(e=zs.newId()),XD("doc","path",e),t instanceof so){let r=ye.fromString(e,...n);return fD(r),new rt(t,null,new V(r))}{if(!(t instanceof rt||t instanceof Yn))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ye.fromString(e,...n));return fD(r),new rt(t.firestore,t instanceof Yn?t.converter:null,new V(r))}}var QD="AsyncQueue",cl=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Xu(this,"async_queue_retry"),this.oc=()=>{let r=eg();r&&O(QD,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=eg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new $t;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return I(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!lo(e))throw e;O(QD,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,hn("INTERNAL UNHANDLED ERROR: ",YD(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Em.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&B(47125,{hc:YD(this.tc)})}verifyOperationInProgress(){}Pc(){return I(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function YD(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Zr=class extends so{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new cl,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new cl(e),this._firestoreClient=void 0,yield e}})}};function yC(t,e){let n=typeof t=="object"?t:Fr(),r=typeof t=="string"?t:e||Bu,i=Ri(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=xw("firestore");o&&gC(i,...o)}return i}function uy(t){if(t._terminated)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TL(t),t._firestoreClient}function TL(t){var e,n,r;let i=t._freezeSettings(),o=(function(c,u,l,h){return new fg(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,hC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Mm(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(t._componentsProvider))}var Zn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ge.fromBase64String(e))}catch(n){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Ce("string",Zn._jsonSchemaVersion),bytes:Ce("string")};var ao=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ea=class{constructor(e){this._methodName=e}};var Jn=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(ta(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:Ce("string",Jn._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};var Xn=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Xn._jsonSchemaVersion="firestore/vectorValue/1.0",Xn._jsonSchema={type:Ce("string",Xn._jsonSchemaVersion),vectorValues:Ce("object")};var DL=/^__.*__$/,km=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qr(e,this.data,n,this.fieldTransforms)}},ul=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function vC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ec:t})}}var xm=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return dl(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vC(this.Ec)&&DL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Om=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yl(e)}Dc(e,n,r,i=!1){return new xm({Ec:e,methodName:n,bc:r,path:ht.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _C(t){let e=t._freezeSettings(),n=yl(t._databaseId);return new Om(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EC(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);ly("Data must be an object, but it was:",s,r);let c=IC(r,s),u,l;if(o.merge)u=new Et(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Fm(e,p,n);if(!s.contains(m))throw new F(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TC(h,m)||h.push(m)}u=new Et(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new km(new ft(c),u,l)}var ll=class t extends ea{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function bL(t,e,n,r){let i=t.Dc(1,e,n);ly("Data must be an object, but it was:",i,r);let o=[],s=ft.empty();ir(r,(u,l)=>{let h=dy(e,u,n);l=ke(l);let p=i.gc(h);if(l instanceof ll)o.push(h);else{let m=El(l,p);m!=null&&(o.push(h),s.set(h,m))}});let c=new Et(o);return new ul(s,c,i.fieldTransforms)}function CL(t,e,n,r,i,o){let s=t.Dc(1,e,n),c=[Fm(e,r,n)],u=[i];if(o.length%2!=0)throw new F(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(Fm(e,o[m])),u.push(o[m+1]);let l=[],h=ft.empty();for(let m=c.length-1;m>=0;--m)if(!TC(l,c[m])){let y=c[m],S=u[m];S=ke(S);let P=s.gc(y);if(S instanceof ll)l.push(y);else{let N=El(S,P);N!=null&&(l.push(y),h.set(y,N))}}let p=new Et(l);return new ul(h,p,s.fieldTransforms)}function El(t,e){if(wC(t=ke(t)))return ly("Unsupported field value:",e,t),IC(t,e);if(t instanceof ea)return(function(r,i){if(!vC(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=El(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ae.fromDate(r);return{timestampValue:Wu(i.serializer,o)}}if(r instanceof Ae){let o=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wu(i.serializer,o)}}if(r instanceof Jn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:Hb(i.serializer,r._byteString)};if(r instanceof rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xn)return(function(s,c){return{mapValue:{fields:{[Gm]:{stringValue:Wm},[Ki]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return Zm(c.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${$m(r)}`)})(t,e)}function IC(t,e){let n={};return gb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ir(t,(r,i)=>{let o=El(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function wC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Jn||t instanceof Zn||t instanceof rt||t instanceof ea||t instanceof Xn)}function ly(t,e,n){if(!wC(n)||!eb(n)){let r=$m(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Fm(t,e,n){if((e=ke(e))instanceof ao)return e._internalPath;if(typeof e=="string")return dy(t,e);throw dl("Field path arguments must be of type string or ",t,!1,void 0,n)}var AL=new RegExp("[~\\*/\\[\\]]");function dy(t,e,n){if(e.search(AL)>=0)throw dl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ao(...e.split("."))._internalPath}catch{throw dl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dl(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(R.INVALID_ARGUMENT,c+t+u)}function TC(t,e){return t.some(n=>n.isEqual(e))}var fl=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Lm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(DC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Lm=class extends fl{data(){return super.data()}};function DC(t,e){return typeof e=="string"?dy(t,e):e instanceof ao?e._internalPath:e._delegate._internalPath}function SL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vm=class{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ir(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ki].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>me(s.doubleValue));return new Xn(o)}convertGeoPoint(e){return new Jn(me(e.latitude),me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=pl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ks(e));default:return null}}convertTimestamp(e){let n=pn(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ye.fromString(e);ae(Qb(r),9688,{name:e});let i=new Uu(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(n)||hn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function bC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ui=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Hi=class t extends fl{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new qi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(DC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hi._jsonSchema={type:Ce("string",Hi._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};var qi=class extends Hi{data(e={}){return super.data(e)}},zi=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ui(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qi(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new qi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ui(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new qi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ui(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:NL(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function NL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}zi._jsonSchemaVersion="firestore/querySnapshot/1.0",zi._jsonSchema={type:Ce("string",zi._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};var jm=class extends Vm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}};function CC(t){t=Wi(t,al);let e=Wi(t.firestore,Zr),n=uy(e),r=new jm(e);return SL(t._query),wL(n,t._query).then(i=>new zi(e,r,t,i))}function AC(t){return fy(Wi(t.firestore,Zr),[new io(t._key,Pt.none())])}function SC(t,e){let n=Wi(t.firestore,Zr),r=cy(t),i=bC(t.converter,e);return fy(n,[EC(_C(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pt.exists(!1))]).then(()=>r)}function fy(t,e){return(function(r,i){let o=new $t;return r.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return lL(yield EL(r),i,o)})),o.promise})(uy(t),e)}var Bm=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_C(e)}set(e,n,r){this._verifyNotCommitted();let i=ng(e,this._firestore),o=bC(i.converter,n,r),s=EC(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Pt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=ng(e,this._firestore),s;return s=typeof(n=ke(n))=="string"||n instanceof ao?CL(this._dataReader,"WriteBatch.update",o._key,n,r,i):bL(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Pt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ng(e,this._firestore);return this._mutations=this._mutations.concat(new io(n._key,Pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ng(t,e){if((t=ke(t)).firestore!==e)throw new F(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function NC(t){return uy(t=Wi(t,Zr)),new Bm(t,e=>fy(t,e))}(function(e,n=!0){(function(i){co=i})($n),Nt(new Je("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Zr(new og(r.getProvider("auth-internal")),new cg(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),_e(cD,uD,e),_e(cD,uD,"esm2017")})();var ia=class{constructor(e){return e}},RC="firestore",hy=class{constructor(){return Mi(RC)}};var py=new Y("angularfire2.firestore-instances");function RL(t,e){let n=Ss(RC,t,e);return n&&new ia(n)}function PL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ia(r)}}var ML={provide:hy,deps:[[new ut,py]]},kL={provide:ia,useFactory:RL,deps:[[new ut,py],cn]};function _Y(t,...e){return _e("angularfire",Hn.full,"fst"),tn([kL,ML,{provide:py,useFactory:PL(t),multi:!0,deps:[ge,Ye,qn,Vr,[new ut,Vs],[new ut,ki],...e]}])}var EY=dt(SC,!0,2);var IY=dt(mC,!0,2);var wY=dt(AC,!0,2);var TY=dt(cy,!0,2);var DY=dt(CC,!0);var bY=dt(yC,!0);var CY=dt(NC,!0,2);var NY={production:!1,firebase:{apiKey:"AIzaSyChZ8Wd4B2kFmlxSlzdBfxSwQWHy-LzFRY",authDomain:"bookbox-8d260.firebaseapp.com",projectId:"bookbox-8d260",storageBucket:"bookbox-8d260.firebasestorage.app",messagingSenderId:"979017836304",appId:"1:979017836304:web:cd192eed082819faa66795",measurementId:"G-0ERHQRWG1C"},cloudinary:{cloudName:"dwqwodi8p",uploadPreset:"test_BookBox"}};export{$e as a,He as b,I as c,we as d,AA as e,X as f,dd as g,fd as h,Jt as i,Vo as j,Bo as k,Cn as l,LA as m,VA as n,jA as o,hr as p,pr as q,WA as r,gr as s,Ga as t,QA as u,Uo as v,e_ as w,YA as x,$o as y,yd as z,JA as A,XA as B,vd as C,eS as D,tS as E,nS as F,rS as G,iS as H,oS as I,re as J,Xa as K,fe as L,cS as M,Y as N,Le as O,L as P,tn as Q,Kd as R,nt as S,Rn as T,M_ as U,k_ as V,W_ as W,K_ as X,Ye as Y,rs as Z,is as _,Er as $,Ft as aa,pf as ba,Fn as ca,kE as da,c0 as ea,p0 as fa,g0 as ga,tI as ha,Jf as ia,y0 as ja,Ci as ka,D0 as la,q0 as ma,ls as na,ds as oa,ch as pa,sn as qa,ge as ra,ps as sa,vs as ta,Gc as ua,ZI as va,JI as wa,PR as xa,wh as ya,nw as za,jR as Aa,Wc as Ba,ow as Ca,_s as Da,$R as Ea,HR as Fa,cw as Ga,bh as Ha,Ch as Ia,uw as Ja,QR as Ka,dw as La,JR as Ma,fw as Na,gP as Oa,hw as Pa,Ah as Qa,_P as Ra,IP as Sa,yw as Ta,FG as Ua,zP as Va,LG as Wa,Yc as Xa,KP as Ya,kh as Za,Sw as _a,JP as $a,XP as ab,eM as bb,Oh as cb,m5 as db,E7 as eb,I7 as fb,qK as gb,zK as hb,ia as ib,_Y as jb,EY as kb,IY as lb,wY as mb,TY as nb,DY as ob,bY as pb,CY as qb,NY as rb};
