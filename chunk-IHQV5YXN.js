import{a as E}from"./chunk-2YMMC7SH.js";import"./chunk-VYVEJNHN.js";import{Aa as v,Ca as n,Ma as x,Mb as B,Nb as D,Ob as O,Qb as w,Ra as y,Va as c,ab as l,bb as i,cb as t,d as b,db as _,ea as f,eb as h,fa as u,fb as C,gb as m,jb as o,kb as S,la as g,lb as d,qb as p,rb as k}from"./chunk-HPGJ3KMS.js";function T(r,a){if(r&1&&(i(0,"div",14),_(1,"img",15),t()),r&2){let e=m().$implicit;n(),l("src",e.Zdjecie,v)("alt",e.Tytul)}}function j(r,a){if(r&1){let e=h();i(0,"div",4),c(1,T,2,2,"div",5),i(2,"div",6)(3,"h3",7),o(4),t(),i(5,"p",8)(6,"strong"),o(7,"Autor:"),t(),o(8),t(),i(9,"p",9)(10,"strong"),o(11,"Rok wydania:"),t(),o(12),p(13,"date"),t(),i(14,"p",10)(15,"strong"),o(16,"Data dodania:"),t(),o(17),p(18,"date"),t(),i(19,"p",11)(20,"strong"),o(21,"Szafka:"),t(),o(22),t()(),i(23,"div",12)(24,"button",13),C("click",function(){let M=f(e).$implicit,P=m();return u(P.takeBook(M.Tytul))}),o(25,"Zabierz ksi\u0105\u017Ck\u0119"),t()()()}if(r&2){let e=a.$implicit;n(),l("ngIf",e.Zdjecie),n(3),S(e.Tytul),n(4),d(" ",e.Autor),n(4),d(" ",k(13,6,e["Rok wydania"].toDate?e["Rok wydania"].toDate():e["Rok wydania"],"yyyy")),n(5),d(" ",k(18,9,e["Data dodania"]==null?null:e["Data dodania"].toDate(),"short")),n(5),d(" ",e.Szafka)}}var I=class r{constructor(a){this.bookService=a;this.sub=this.bookService.getBooks().subscribe(e=>this.books.set(e||[]))}books=g([]);sub;ngOnDestroy(){this.sub?.unsubscribe()}takeBook(a){return b(this,null,function*(){if(!a)return;let e=this.books();this.books.set(e.filter(s=>s.Tytul!==a));try{yield this.bookService.deleteBook(a)}catch(s){console.error(s),this.books.set(e)}})}static \u0275fac=function(e){return new(e||r)(x(E))};static \u0275cmp=y({type:r,selectors:[["app-book-list"]],decls:6,vars:2,consts:[[1,"book-list-section"],[1,"book-list-header"],[1,"book-list"],["class","book-card",4,"ngFor","ngForOf"],[1,"book-card"],["class","book-image",4,"ngIf"],[1,"book-info"],[1,"book-title"],[1,"book-author"],[1,"book-year"],[1,"book-added"],[1,"book-szafka"],[1,"book-actions"],["type","button",1,"take-button",3,"click"],[1,"book-image"],[3,"src","alt"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),o(3),t()(),i(4,"div",2),c(5,j,26,12,"div",3),t()()),e&2&&(n(3),d("Ksi\u0105\u017Cki w kolekcji (",s.books().length,")"),n(2),l("ngForOf",s.books()))},dependencies:[w,B,D,O],styles:[".book-list-section[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto 3rem;padding:1rem 0}.book-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem}.book-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;background:#fff;border-radius:.75rem;padding:.75rem;box-shadow:0 4px 12px #0000000f;align-items:stretch}.book-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:cover;border-radius:.5rem}.book-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.book-title[_ngcontent-%COMP%]{margin:0;font-size:1.05rem}.book-actions[_ngcontent-%COMP%]{margin-top:auto;display:flex;justify-content:flex-end}.take-button[_ngcontent-%COMP%]{padding:.5rem .85rem;background:linear-gradient(135deg,#ff5f6d,#ffc371);color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-weight:700}"]})};export{I as BookListComponent};
